{"version":3,"file":"IncidentReport-BjAzi8jv.js","sources":["../../../../../../frontend/driver-pwa/src/components/Incident/IncidentReportForm.vue","../../../../../../frontend/driver-pwa/src/views/IncidentReport.vue"],"sourcesContent":["<template>\n  <form @submit.prevent=\"submitForm\" class=\"space-y-4\">\n    <div class=\"bg-white rounded-xl shadow-card p-4\">\n      <!-- Incident Type -->\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Incident Type</label>\n        <select\n          v-model=\"form.incident_type\"\n          class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n          required\n        >\n          <option value=\"\">Select Type</option>\n          <option value=\"Accident\">Accident</option>\n          <option value=\"Breakdown\">Breakdown</option>\n          <option value=\"Medical\">Medical Emergency</option>\n          <option value=\"Security\">Security Issue</option>\n          <option value=\"Other\">Other</option>\n        </select>\n      </div>\n\n      <!-- Description -->\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n        <textarea\n          v-model=\"form.description\"\n          rows=\"4\"\n          class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n          placeholder=\"Describe what happened...\"\n          required\n        ></textarea>\n      </div>\n\n      <!-- Location -->\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Location</label>\n        <div class=\"flex space-x-2\">\n          <input\n            v-model=\"form.location\"\n            type=\"text\"\n            class=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n            placeholder=\"Location details\"\n            required\n          />\n          <button\n            type=\"button\"\n            @click=\"captureLocation\"\n            class=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700\"\n          >\n            <MapPin class=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n\n      <!-- Photo -->\n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Photos</label>\n        <button\n          type=\"button\"\n          @click=\"takePhoto\"\n          class=\"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 flex items-center justify-center\"\n        >\n          <Camera class=\"w-5 h-5 mr-2\" />\n          Take Photo\n        </button>\n        <div v-if=\"form.photo\" class=\"mt-2\">\n          <img :src=\"form.photo\" alt=\"Incident photo\" class=\"w-full h-40 object-cover rounded-lg\" />\n        </div>\n      </div>\n\n      <!-- Submit -->\n      <button\n        type=\"submit\"\n        class=\"w-full py-3 bg-danger-600 text-white rounded-lg font-medium hover:bg-danger-700 transition\"\n      >\n        Submit Report\n      </button>\n    </div>\n\n    <CameraModal\n      v-if=\"showCamera\"\n      @close=\"showCamera = false\"\n      @capture=\"handlePhotoCapture\"\n    />\n  </form>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { MapPin, Camera } from 'lucide-vue-next'\nimport { useGeolocation } from '@shared'\nimport CameraModal from '@/components/common/CameraModal.vue'\n\nconst emit = defineEmits(['submit'])\n\nconst { getCurrentPosition } = useGeolocation()\nconst showCamera = ref(false)\n\nconst form = ref({\n  incident_type: '',\n  description: '',\n  location: '',\n  photo: null,\n  coordinates: null,\n})\n\nconst captureLocation = async () => {\n  try {\n    const position = await getCurrentPosition()\n    form.value.coordinates = {\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n    }\n    form.value.location = `${position.coords.latitude.toFixed(6)}, ${position.coords.longitude.toFixed(6)}`\n  } catch (error) {\n    console.error('Failed to get location:', error)\n  }\n}\n\nconst takePhoto = () => {\n  showCamera.value = true\n}\n\nconst handlePhotoCapture = (photo) => {\n  form.value.photo = photo.dataUrl\n  showCamera.value = false\n}\n\nconst submitForm = () => {\n  emit('submit', form.value)\n}\n</script>\n","<template>\n  <div class=\"min-h-screen bg-background pb-20\">\n    <div class=\"p-4\">\n      <h1 class=\"text-2xl font-bold text-gray-800 mb-4\">Report Incident</h1>\n      <IncidentReportForm @submit=\"handleSubmit\" />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { useRouter } from 'vue-router'\nimport { useIncidentStore } from '@/stores/incident'\nimport IncidentReportForm from '@/components/Incident/IncidentReportForm.vue'\nimport { useToast } from '@shared'\n\nconst router = useRouter()\nconst incidentStore = useIncidentStore()\nconst { showToast } = useToast()\n\nconst handleSubmit = async (data) => {\n  try {\n    await incidentStore.reportIncident(data)\n    showToast('Incident reported successfully', 'success')\n    router.push('/driver')\n  } catch (error) {\n    showToast('Failed to report incident', 'error')\n  }\n}\n</script>\n"],"names":["emit","__emit","getCurrentPosition","useGeolocation","showCamera","ref","form","captureLocation","position","error","takePhoto","handlePhotoCapture","photo","submitForm","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_cache","$event","_vModelSelect","_hoisted_3","_vModelText","_hoisted_4","_hoisted_5","_createVNode","_unref","MapPin","_hoisted_6","Camera","_openBlock","_hoisted_7","_createBlock","CameraModal","router","useRouter","incidentStore","useIncidentStore","showToast","useToast","handleSubmit","data","IncidentReportForm"],"mappings":"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"}
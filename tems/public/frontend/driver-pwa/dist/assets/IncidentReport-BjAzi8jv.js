import{r as b,c as p,o as l,a as e,p as _,d as f,e as c,C as k,b as C,v,h as m,m as y,g as S,w as I,u as V}from"./vue-vendor-85nDNI24.js";import{u as M}from"./incident-D0Jc3bXl.js";import{a as T}from"./index-CvUSgFKw.js";import{u as $}from"./useGeolocation-M200pgtX.js";import{C as B,_ as F}from"./CameraModal-C0XdpclG.js";import{M as P}from"./map-pin-pIZ_tXSm.js";import"./utils-DGK9-2WQ.js";import"./Modal-BTglq67a.js";import"./x-BTU5YQqX.js";import"./createLucideIcon-TnRFscOj.js";import"./refresh-cw-BAKKBxtm.js";const N={class:"bg-white rounded-xl shadow-card p-4"},R={class:"mb-4"},U={class:"mb-4"},q={class:"mb-4"},D={class:"flex space-x-2"},L={class:"mb-4"},j={key:0,class:"mt-2"},A=["src"],E={__name:"IncidentReportForm",emits:["submit"],setup(g,{emit:d}){const u=d,{getCurrentPosition:i}=$(),s=b(!1),o=b({incident_type:"",description:"",location:"",photo:null,coordinates:null}),a=async()=>{try{const r=await i();o.value.coordinates={latitude:r.coords.latitude,longitude:r.coords.longitude},o.value.location=`${r.coords.latitude.toFixed(6)}, ${r.coords.longitude.toFixed(6)}`}catch(r){console.error("Failed to get location:",r)}},x=()=>{s.value=!0},h=r=>{o.value.photo=r.dataUrl,s.value=!1},w=()=>{u("submit",o.value)};return(r,t)=>(l(),p("form",{onSubmit:I(w,["prevent"]),class:"space-y-4"},[e("div",N,[e("div",R,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Incident Type",-1)),c(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.value.incident_type=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:""},[...t[4]||(t[4]=[C('<option value="">Select Type</option><option value="Accident">Accident</option><option value="Breakdown">Breakdown</option><option value="Medical">Medical Emergency</option><option value="Security">Security Issue</option><option value="Other">Other</option>',6)])],512),[[k,o.value.incident_type]])]),e("div",U,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),c(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.description=n),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Describe what happened...",required:""},null,512),[[v,o.value.description]])]),e("div",q,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Location",-1)),e("div",D,[c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.value.location=n),type:"text",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Location details",required:""},null,512),[[v,o.value.location]]),e("button",{type:"button",onClick:a,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"},[m(y(P),{class:"w-5 h-5"})])])]),e("div",L,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photos",-1)),e("button",{type:"button",onClick:x,class:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 flex items-center justify-center"},[m(y(B),{class:"w-5 h-5 mr-2"}),t[8]||(t[8]=S(" Take Photo ",-1))]),o.value.photo?(l(),p("div",j,[e("img",{src:o.value.photo,alt:"Incident photo",class:"w-full h-40 object-cover rounded-lg"},null,8,A)])):f("",!0)]),t[10]||(t[10]=e("button",{type:"submit",class:"w-full py-3 bg-danger-600 text-white rounded-lg font-medium hover:bg-danger-700 transition"}," Submit Report ",-1))]),s.value?(l(),_(F,{key:0,onClose:t[3]||(t[3]=n=>s.value=!1),onCapture:h})):f("",!0)],32))}},O={class:"min-h-screen bg-background pb-20"},G={class:"p-4"},ot={__name:"IncidentReport",setup(g){const d=V(),u=M(),{showToast:i}=T(),s=async o=>{try{await u.reportIncident(o),i("Incident reported successfully","success"),d.push("/driver")}catch{i("Failed to report incident","error")}};return(o,a)=>(l(),p("div",O,[e("div",G,[a[0]||(a[0]=e("h1",{class:"text-2xl font-bold text-gray-800 mb-4"},"Report Incident",-1)),m(E,{onSubmit:s})])]))}};export{ot as default};
//# sourceMappingURL=IncidentReport-BjAzi8jv.js.map

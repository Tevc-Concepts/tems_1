import{l as w,r as o,c as m}from"./vue-vendor-DZCHTKbu.js";import{f as i}from"./index-Dsp_1qOu.js";const T=w("trip",()=>{const l=o([]),c=o(null),n=o(!1),t=o(null),v=m(()=>l.value.filter(a=>new Date(a.start_time)>new Date)),d=m(()=>l.value.filter(a=>a.status==="Active"));async function u(){n.value=!0,t.value=null;try{const a=await i.call("tems.api.pwa.driver.get_driver_dashboard");return l.value=[...a.journey_plans.map(e=>({...e,type:"journey"})),...a.operation_plans.map(e=>({...e,type:"operation"}))],a}catch(a){throw t.value=a.message,a}finally{n.value=!1}}async function f(a){n.value=!0;try{return await i.call("tems.api.pwa.driver.get_journey_details",{journey_plan_name:a})}catch(e){throw t.value=e.message,e}finally{n.value=!1}}async function _(a,e,p){try{const r=await i.call("tems.api.pwa.driver.start_trip",{journey_plan_name:a,odometer_reading:e,location_data:p});return c.value=a,await u(),r}catch(r){throw t.value=r.message,r}}async function y(a,e,p,r){try{const s=await i.call("tems.api.pwa.driver.complete_trip",{journey_plan_name:a,odometer_reading:e,location_data:p,notes:r});return c.value=null,await u(),s}catch(s){throw t.value=s.message,s}}return{trips:l,activeTrip:c,loading:n,error:t,upcomingTrips:v,inProgressTrips:d,fetchDashboard:u,fetchTripDetails:f,startTrip:_,completeTrip:y}});export{T as u};
//# sourceMappingURL=trip-FwRjcpOd.js.map

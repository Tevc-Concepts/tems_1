{"version":3,"file":"Login-CpCX21RF.js","sources":["../../../../../../frontend/driver-pwa/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4\">\n    <div class=\"max-w-md w-full\">\n      <div class=\"text-center mb-8\">\n        <div class=\"inline-block p-4 bg-white rounded-full shadow-lg mb-4\">\n          <svg class=\"w-16 h-16 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n        </div>\n        <h1 class=\"text-4xl font-bold text-blue-700 mb-2\">TEMS Driver</h1>\n        <p class=\"text-gray-600\">Transport Excellence Management System</p>\n      </div>\n\n      <div class=\"bg-white rounded-lg shadow-lg p-8\">\n        <form @submit.prevent=\"handleLogin\" class=\"space-y-6\">\n          <div>\n            <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n              Username\n            </label>\n            <input\n              id=\"username\"\n              v-model=\"username\"\n              type=\"text\"\n              required\n              autocomplete=\"username\"\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Enter your username\"\n            />\n          </div>\n\n          <div>\n            <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n              Password\n            </label>\n            <input\n              id=\"password\"\n              v-model=\"password\"\n              type=\"password\"\n              required\n              autocomplete=\"current-password\"\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Enter your password\"\n            />\n          </div>\n\n          <div class=\"flex items-center\">\n            <input\n              id=\"remember\"\n              v-model=\"remember\"\n              type=\"checkbox\"\n              class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n            <label for=\"remember\" class=\"ml-2 block text-sm text-gray-700\">\n              Remember me\n            </label>\n          </div>\n\n          <button\n            type=\"submit\"\n            :disabled=\"loading\"\n            class=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            <span v-if=\"loading\" class=\"flex items-center justify-center\">\n              <svg class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              Signing in...\n            </span>\n            <span v-else>Sign In</span>\n          </button>\n\n          <div v-if=\"error\" class=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n            <p class=\"text-red-600 text-sm text-center\">{{ error }}</p>\n          </div>\n        </form>\n      </div>\n\n      <div class=\"mt-6 text-center text-sm text-gray-600\">\n        <p>Driver Portal Access</p>\n        <p class=\"mt-2\">Need help? Contact your fleet manager</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useAuth } from '@shared'\n\nconst router = useRouter()\nconst route = useRoute()\nconst { login, isAuthenticated } = useAuth()\n\nconst username = ref('')\nconst password = ref('')\nconst remember = ref(false)\nconst loading = ref(false)\nconst error = ref(null)\n\n// If already authenticated, redirect to dashboard\nonMounted(() => {\n  if (isAuthenticated.value) {\n    const redirect = route.query.redirect || '/driver'\n    router.push(redirect)\n  }\n})\n\nasync function handleLogin() {\n  loading.value = true\n  error.value = null\n\n  try {\n    await login(username.value, password.value)\n    \n    // Get redirect URL from query or default to dashboard\n    const redirect = route.query.redirect || '/driver'\n    \n    // Use router.push for internal navigation\n    router.push(redirect)\n  } catch (err) {\n    console.error('Login error:', err)\n    error.value = err.message || 'Login failed. Please check your credentials and try again.'\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n"],"names":["router","useRouter","route","useRoute","login","isAuthenticated","useAuth","username","ref","password","remember","loading","error","onMounted","redirect","handleLogin","err","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$event","_hoisted_4","_hoisted_6","_cache","_hoisted_8","_hoisted_9","_toDisplayString"],"mappings":"2nBA2FA,MAAMA,EAASC,EAAS,EAClBC,EAAQC,EAAQ,EAChB,CAAE,MAAAC,EAAO,gBAAAC,CAAe,EAAKC,EAAO,EAEpCC,EAAWC,EAAI,EAAE,EACjBC,EAAWD,EAAI,EAAE,EACjBE,EAAWF,EAAI,EAAK,EACpBG,EAAUH,EAAI,EAAK,EACnBI,EAAQJ,EAAI,IAAI,EAGtBK,EAAU,IAAM,CACd,GAAIR,EAAgB,MAAO,CACzB,MAAMS,EAAWZ,EAAM,MAAM,UAAY,UACzCF,EAAO,KAAKc,CAAQ,CACtB,CACF,CAAC,EAED,eAAeC,GAAc,CAC3BJ,EAAQ,MAAQ,GAChBC,EAAM,MAAQ,KAEd,GAAI,CACF,MAAMR,EAAMG,EAAS,MAAOE,EAAS,KAAK,EAG1C,MAAMK,EAAWZ,EAAM,MAAM,UAAY,UAGzCF,EAAO,KAAKc,CAAQ,CACtB,OAASE,EAAK,CACZ,QAAQ,MAAM,eAAgBA,CAAG,EACjCJ,EAAM,MAAQI,EAAI,SAAW,4DAC/B,QAAC,CACCL,EAAQ,MAAQ,EAClB,CACF,eA9HEM,EAAA,EAAAC,EAkFM,MAlFNC,EAkFM,CAjFJC,EAgFM,MAhFNC,EAgFM,weArEJD,EA+DM,MA/DNE,EA+DM,CA9DJF,EA6DO,OAAA,CA7DA,WAAgBL,EAAW,CAAA,SAAA,CAAA,EAAE,MAAM,cACxCK,EAaM,MAAA,KAAA,aAZJA,EAEQ,QAAA,CAFD,IAAI,WAAW,MAAM,gDAA+C,aAE3E,EAAA,KACAA,EAQE,QAAA,CAPA,GAAG,gDACMb,EAAQ,MAAAgB,GACjB,KAAK,OACL,SAAA,GACA,aAAa,WACb,MAAM,4GACN,YAAY,qCALHhB,EAAA,KAAQ,MASrBa,EAaM,MAAA,KAAA,aAZJA,EAEQ,QAAA,CAFD,IAAI,WAAW,MAAM,gDAA+C,aAE3E,EAAA,KACAA,EAQE,QAAA,CAPA,GAAG,gDACMX,EAAQ,MAAAc,GACjB,KAAK,WACL,SAAA,GACA,aAAa,mBACb,MAAM,4GACN,YAAY,qCALHd,EAAA,KAAQ,MASrBW,EAUM,MAVNI,EAUM,GATJJ,EAKE,QAAA,CAJA,GAAG,gDACMV,EAAQ,MAAAa,GACjB,KAAK,WACL,MAAM,mFAFGb,EAAA,KAAQ,gBAInBU,EAEQ,QAAA,CAFD,IAAI,WAAW,MAAM,oCAAmC,gBAE/D,EAAA,KAGFA,EAaS,SAAA,CAZP,KAAK,SACJ,SAAUT,EAAA,MACX,MAAM,sMAEMA,EAAA,OAAZM,IAAAC,EAMO,OANPO,EAMO,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CALLN,EAGM,MAAA,CAHD,MAAM,6CAA6C,MAAM,6BAA6B,KAAK,OAAO,QAAQ,cAC7GA,EAAkG,SAAA,CAA1F,MAAM,aAAa,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,OAAO,eAAe,eAAa,MACrFA,EAAwK,OAAA,CAAlK,MAAM,aAAa,KAAK,eAAe,EAAE,2HAC3C,kBAER,EAAA,QACAH,EAAA,EAAAC,EAA2B,SAAd,SAAO,SAGXN,EAAA,OAAXK,IAAAC,EAEM,MAFNS,EAEM,CADJP,EAA2D,IAA3DQ,EAA2DC,EAAZjB,EAAA,KAAK,EAAA,CAAA,iCAK1DQ,EAGM,MAAA,CAHD,MAAM,0CAAwC,CACjDA,EAA2B,SAAxB,sBAAoB,EACvBA,EAAyD,IAAA,CAAtD,MAAM,MAAM,EAAC,uCAAqC"}
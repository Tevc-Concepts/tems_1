import{r as h,c,o as A,a as d,b as e,d as p,t as a,u as o,e as i,n as _,f as x,w as g,g as E,F as N,h as S,i as q,j as n,k as F}from"./vue-vendor-DZCHTKbu.js";import{u as I}from"./index-Dsp_1qOu.js";import{u as P}from"./trip-FwRjcpOd.js";import{_ as B}from"./TripCard-CjLxzP50.js";import{_ as L}from"./LoadingSpinner-WtCRcdU3.js";import{_ as R}from"./EmptyState-iU_DxD5K.js";import{f as b,d as U}from"./utils-DGK9-2WQ.js";import{U as Y}from"./user-BIo5MDMJ.js";import{C as z}from"./credit-card-CDmtBGgx.js";import{C as W}from"./circle-alert-CDl0sScR.js";import{M as G}from"./map-pin-C3h0nU1j.js";import{C as H}from"./clipboard-check-CfdfeLM9.js";import{T as w}from"./triangle-alert-C_EpRYfh.js";import{F as J}from"./fuel-C9GWvhQU.js";import{C as K}from"./chevron-right-KEucnSx6.js";import"./StatusBadge-DxCBOwct.js";import"./circle-x-BGVxR7ZG.js";import"./createLucideIcon-DKFW70or.js";import"./package-DFPrWytG.js";import"./users-UNghsrFc.js";import"./navigation-C6cNIsDv.js";import"./truck-DIR7Sag3.js";const O={class:"space-y-6"},Q={class:"card p-6 bg-gradient-to-br from-charcoal-600 via-charcoal-500 to-charcoal-600 border-2 border-primary-500/30 shadow-neon"},X={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold mb-1 text-primary-500"},ee={class:"text-charcoal-300"},te={class:"w-16 h-16 bg-primary-500/20 rounded-2xl flex items-center justify-center backdrop-blur-sm border-2 border-primary-500/50"},se={class:"grid grid-cols-3 gap-4 mt-6"},re={class:"bg-primary-500/10 backdrop-blur-sm rounded-lg p-3 text-center border border-primary-500/30"},oe={class:"text-2xl font-bold text-primary-500"},ie={class:"bg-primary-500/10 backdrop-blur-sm rounded-lg p-3 text-center border border-primary-500/30"},ne={class:"text-2xl font-bold text-primary-500"},ae={class:"bg-primary-500/10 backdrop-blur-sm rounded-lg p-3 text-center border border-primary-500/30"},le={class:"text-2xl font-bold text-primary-500"},de={class:"flex items-center justify-between"},ce={class:"flex items-center space-x-3"},pe={class:"w-12 h-12 bg-primary-50 rounded-xl flex items-center justify-center"},ue={class:"text-sm text-gray-600"},me={class:"text-right"},xe={key:0,class:"mt-3 p-3 bg-amber-50 rounded-lg flex items-start space-x-2"},fe={class:"space-y-4"},ve={class:"flex items-center justify-between"},ye={key:1,class:"card p-4"},he={class:"space-y-3"},_e={key:0,class:"flex items-center justify-between p-3 bg-amber-50 rounded-lg"},ge={class:"flex items-center space-x-3"},be={class:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center"},we={class:"text-sm text-gray-600"},ke={key:1,class:"flex items-center justify-between p-3 bg-red-50 rounded-lg"},Ce={class:"flex items-center space-x-3"},je={class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},De={class:"text-sm text-gray-600"},Te={class:"grid grid-cols-2 gap-4"},Me={class:"flex flex-col items-center space-y-2 text-center"},$e={class:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center"},Ve={class:"flex flex-col items-center space-y-2 text-center"},Ae={class:"w-12 h-12 bg-red-50 rounded-xl flex items-center justify-center"},tt={__name:"Dashboard",setup(Ee){const f=q(),k=I(),v=P(),s=h(null),C=h(!1),j=c(()=>b(new Date,"EEEE, MMMM d, yyyy")),y=c(()=>{if(!s.value)return[];const r=s.value.journey_plans||[],t=s.value.operation_plans||[];return[...r,...t].sort((u,l)=>new Date(u.start_time)-new Date(l.start_time)).slice(0,3)}),D=c(()=>s.value?(s.value.operation_plans||[]).filter(t=>t.status==="Active").length:0),m=c(()=>{if(!s.value?.qualification?.expiry_date)return!1;const r=U(new Date(s.value.qualification.expiry_date),new Date);return r<=30&&r>=0}),T=c(()=>s.value?.pending_checks?.length>0||s.value?.recent_incidents?.length>0);function M(r){return b(new Date(r),"MMM d, yyyy")}async function $(r){f.push(`/driver/trips/${r.name}?action=start`)}function V(r){f.push(`/driver/trips/${r.name}`)}return A(async()=>{try{s.value=await v.fetchDashboard()}catch(r){console.error("Failed to load dashboard:",r)}}),(r,t)=>{const u=E("router-link");return n(),d("div",O,[e("div",Q,[e("div",X,[e("div",null,[e("h2",Z," Welcome back, "+a(o(k).driverName)+"! ",1),e("p",ee,a(j.value),1)]),e("div",te,[i(o(Y),{class:"w-8 h-8 text-primary-500"})])]),e("div",se,[e("div",re,[e("p",oe,a(s.value?.journey_plans?.length||0),1),t[3]||(t[3]=e("p",{class:"text-xs text-charcoal-300"},"Trips Today",-1))]),e("div",ie,[e("p",ne,a(D.value),1),t[4]||(t[4]=e("p",{class:"text-xs text-charcoal-300"},"Active",-1))]),e("div",ae,[e("p",le,a(s.value?.pending_checks?.length||0),1),t[5]||(t[5]=e("p",{class:"text-xs text-charcoal-300"},"Pending",-1))])])]),s.value?.qualification?(n(),d("div",{key:0,class:_(["card p-4",m.value?"border-l-4 border-amber-500":""])},[e("div",de,[e("div",ce,[e("div",pe,[i(o(z),{class:"w-6 h-6 text-primary-600"})]),e("div",null,[t[6]||(t[6]=e("h3",{class:"font-semibold text-gray-900"},"Driver License",-1)),e("p",ue,a(s.value.qualification.license_no),1)])]),e("div",me,[t[7]||(t[7]=e("p",{class:"text-xs text-gray-500"},"Expires",-1)),e("p",{class:_(["text-sm font-semibold",m.value?"text-amber-600":"text-gray-900"])},a(M(s.value.qualification.expiry_date)),3)])]),m.value?(n(),d("div",xe,[i(o(W),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),t[8]||(t[8]=e("p",{class:"text-sm text-amber-700"}," Your license is expiring soon. Please renew it to continue driving. ",-1))])):p("",!0)],2)):p("",!0),e("div",fe,[e("div",ve,[t[10]||(t[10]=e("h3",{class:"section-title mb-0"},"Today's Trips",-1)),i(u,{to:"/driver/trips",class:"text-sm text-primary-600 font-medium flex items-center space-x-1 hover:text-primary-700"},{default:g(()=>[t[9]||(t[9]=e("span",null,"View All",-1)),i(o(K),{class:"w-4 h-4"})]),_:1})]),o(v).loading?(n(),x(L,{key:0,message:"Loading trips..."})):y.value.length>0?(n(!0),d(N,{key:1},S(y.value,l=>(n(),x(B,{key:l.name,trip:l,onStart:$,onView:V},null,8,["trip"]))),128)):(n(),x(R,{key:2,icon:o(G),title:"No trips scheduled",message:"You don't have any trips scheduled for today. Check back later or contact dispatch."},null,8,["icon"]))]),T.value?(n(),d("div",ye,[t[14]||(t[14]=e("h3",{class:"section-title"},"Pending Actions",-1)),e("div",he,[s.value?.pending_checks?.length>0?(n(),d("div",_e,[e("div",ge,[e("div",be,[i(o(H),{class:"w-5 h-5 text-amber-600"})]),e("div",null,[t[11]||(t[11]=e("p",{class:"font-medium text-gray-900"},"Vehicle Inspection",-1)),e("p",we,a(s.value.pending_checks.length)+" pending check(s) ",1)])]),i(u,{to:"/driver/inspection",class:"btn-secondary text-sm py-2"},{default:g(()=>[...t[12]||(t[12]=[F(" Inspect Now ",-1)])]),_:1})])):p("",!0),s.value?.recent_incidents?.length>0?(n(),d("div",ke,[e("div",Ce,[e("div",je,[i(o(w),{class:"w-5 h-5 text-red-600"})]),e("div",null,[t[13]||(t[13]=e("p",{class:"font-medium text-gray-900"},"Recent Incidents",-1)),e("p",De,a(s.value.recent_incidents.length)+" incident(s) this week ",1)])]),e("button",{class:"btn-secondary text-sm py-2",onClick:t[0]||(t[0]=l=>C.value=!0)}," View ")])):p("",!0)])])):p("",!0),e("div",Te,[e("button",{onClick:t[1]||(t[1]=l=>r.$router.push("/driver/fuel")),class:"card p-4 hover:shadow-lg transition-shadow active:scale-95 duration-200"},[e("div",Me,[e("div",$e,[i(o(J),{class:"w-6 h-6 text-blue-600"})]),t[15]||(t[15]=e("p",{class:"font-semibold text-gray-900"},"Log Fuel",-1))])]),e("button",{onClick:t[2]||(t[2]=l=>r.$router.push("/driver/incident")),class:"card p-4 hover:shadow-lg transition-shadow active:scale-95 duration-200"},[e("div",Ve,[e("div",Ae,[i(o(w),{class:"w-6 h-6 text-red-600"})]),t[16]||(t[16]=e("p",{class:"font-semibold text-gray-900"},"Report Incident",-1))])])])])}}};export{tt as default};
//# sourceMappingURL=Dashboard-DSqPngJz.js.map

{"version":3,"file":"AppLayout-CBjlc8mU.js","sources":["../../../../../../frontend/driver-pwa/node_modules/lucide-vue-next/dist/esm/icons/ambulance.js","../../../../../../frontend/driver-pwa/node_modules/lucide-vue-next/dist/esm/icons/car.js","../../../../../../frontend/driver-pwa/node_modules/lucide-vue-next/dist/esm/icons/circle-user.js","../../../../../../frontend/driver-pwa/node_modules/lucide-vue-next/dist/esm/icons/layout-dashboard.js","../../../../../../frontend/driver-pwa/node_modules/lucide-vue-next/dist/esm/icons/wifi-off.js","../../../../../../frontend/driver-pwa/node_modules/lucide-vue-next/dist/esm/icons/wrench.js","../../../../../../frontend/driver-pwa/src/components/layout/AppHeader.vue","../../../../../../frontend/driver-pwa/src/components/layout/AppBottomNav.vue","../../../../../../frontend/driver-pwa/src/components/common/OfflineIndicator.vue","../../../../../../frontend/driver-pwa/src/components/common/SOSButton.vue","../../../../../../frontend/driver-pwa/src/components/layout/AppLayout.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.545.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ambulance = createLucideIcon(\"ambulance\", [\n  [\"path\", { d: \"M10 10H6\", key: \"1bsnug\" }],\n  [\"path\", { d: \"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2\", key: \"wrbu53\" }],\n  [\n    \"path\",\n    {\n      d: \"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14\",\n      key: \"lrkjwd\"\n    }\n  ],\n  [\"path\", { d: \"M8 8v4\", key: \"1fwk8c\" }],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"circle\", { cx: \"17\", cy: \"18\", r: \"2\", key: \"332jqn\" }],\n  [\"circle\", { cx: \"7\", cy: \"18\", r: \"2\", key: \"19iecd\" }]\n]);\n\nexport { Ambulance as default };\n//# sourceMappingURL=ambulance.js.map\n","/**\n * @license lucide-vue-next v0.545.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Car = createLucideIcon(\"car\", [\n  [\n    \"path\",\n    {\n      d: \"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2\",\n      key: \"5owen\"\n    }\n  ],\n  [\"circle\", { cx: \"7\", cy: \"17\", r: \"2\", key: \"u2ysq9\" }],\n  [\"path\", { d: \"M9 17h6\", key: \"r8uit2\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"2\", key: \"axvx0g\" }]\n]);\n\nexport { Car as default };\n//# sourceMappingURL=car.js.map\n","/**\n * @license lucide-vue-next v0.545.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleUser = createLucideIcon(\"circle-user\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }],\n  [\"path\", { d: \"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662\", key: \"154egf\" }]\n]);\n\nexport { CircleUser as default };\n//# sourceMappingURL=circle-user.js.map\n","/**\n * @license lucide-vue-next v0.545.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutDashboard = createLucideIcon(\"layout-dashboard\", [\n  [\"rect\", { width: \"7\", height: \"9\", x: \"3\", y: \"3\", rx: \"1\", key: \"10lvy0\" }],\n  [\"rect\", { width: \"7\", height: \"5\", x: \"14\", y: \"3\", rx: \"1\", key: \"16une8\" }],\n  [\"rect\", { width: \"7\", height: \"9\", x: \"14\", y: \"12\", rx: \"1\", key: \"1hutg5\" }],\n  [\"rect\", { width: \"7\", height: \"5\", x: \"3\", y: \"16\", rx: \"1\", key: \"ldoo1y\" }]\n]);\n\nexport { LayoutDashboard as default };\n//# sourceMappingURL=layout-dashboard.js.map\n","/**\n * @license lucide-vue-next v0.545.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst WifiOff = createLucideIcon(\"wifi-off\", [\n  [\"path\", { d: \"M12 20h.01\", key: \"zekei9\" }],\n  [\"path\", { d: \"M8.5 16.429a5 5 0 0 1 7 0\", key: \"1bycff\" }],\n  [\"path\", { d: \"M5 12.859a10 10 0 0 1 5.17-2.69\", key: \"1dl1wf\" }],\n  [\"path\", { d: \"M19 12.859a10 10 0 0 0-2.007-1.523\", key: \"4k23kn\" }],\n  [\"path\", { d: \"M2 8.82a15 15 0 0 1 4.177-2.643\", key: \"1grhjp\" }],\n  [\"path\", { d: \"M22 8.82a15 15 0 0 0-11.288-3.764\", key: \"z3jwby\" }],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { WifiOff as default };\n//# sourceMappingURL=wifi-off.js.map\n","/**\n * @license lucide-vue-next v0.545.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Wrench = createLucideIcon(\"wrench\", [\n  [\n    \"path\",\n    {\n      d: \"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z\",\n      key: \"1ngwbx\"\n    }\n  ]\n]);\n\nexport { Wrench as default };\n//# sourceMappingURL=wrench.js.map\n","<template>\n  <header class=\"sticky top-0 z-50 bg-gradient-to-r from-primary-600 to-primary-500 text-white shadow-lg\">\n    <div class=\"max-w-7xl mx-auto px-4\">\n      <div class=\"flex items-center justify-between h-16\">\n        <!-- Logo & Title -->\n        <div class=\"flex items-center space-x-3\">\n          <div class=\"w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-md\">\n            <Truck class=\"w-6 h-6 text-primary-600\" />\n          </div>\n          <div>\n            <h1 class=\"text-lg font-bold\">TEMS Driver</h1>\n            <p class=\"text-xs text-primary-100\">{{ pageTitle }}</p>\n          </div>\n        </div>\n        \n        <!-- Actions -->\n        <div class=\"flex items-center space-x-3\">\n          <!-- Sync Status -->\n          <button \n            v-if=\"offlineStore.hasPendingChanges\"\n            @click=\"handleSync\"\n            class=\"p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors\"\n            :disabled=\"offlineStore.syncInProgress\"\n          >\n            <RefreshCw \n              :class=\"['w-5 h-5', offlineStore.syncInProgress && 'animate-spin']\" \n            />\n          </button>\n          \n          <!-- Profile -->\n          <button \n            @click=\"showProfile = !showProfile\"\n            class=\"flex items-center space-x-2 p-2 rounded-lg hover:bg-white/20 transition-colors\"\n          >\n            <div class=\"w-8 h-8 bg-white rounded-full flex items-center justify-center\">\n              <User class=\"w-5 h-5 text-primary-600\" />\n            </div>\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Profile Dropdown -->\n    <transition name=\"slide-down\">\n      <div \n        v-if=\"showProfile\"\n        class=\"absolute right-4 top-20 w-64 bg-white rounded-xl shadow-2xl overflow-hidden z-50\"\n      >\n        <div class=\"p-4 bg-gradient-to-br from-primary-50 to-white border-b\">\n          <p class=\"font-semibold text-gray-900\">{{ authStore.driverName }}</p>\n          <p class=\"text-sm text-gray-600\">{{ authStore.user?.email }}</p>\n        </div>\n        \n        <div class=\"p-2\">\n          <router-link\n            to=\"/driver/profile\"\n            class=\"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors text-gray-700\"\n            @click=\"showProfile = false\"\n          >\n            <UserCircle class=\"w-5 h-5\" />\n            <span>My Profile</span>\n          </router-link>\n          \n          <button\n            @click=\"handleLogout\"\n            class=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-red-50 transition-colors text-red-600\"\n          >\n            <LogOut class=\"w-5 h-5\" />\n            <span>Logout</span>\n          </button>\n        </div>\n      </div>\n    </transition>\n  </header>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { Truck, User, UserCircle, LogOut, RefreshCw } from 'lucide-vue-next'\nimport { useAuthStore } from '@/stores/auth'\nimport { useOfflineStore } from '@/stores/offline'\n\nconst route = useRoute()\nconst authStore = useAuthStore()\nconst offlineStore = useOfflineStore()\nconst showProfile = ref(false)\n\nconst pageTitle = computed(() => route.meta.title || 'Dashboard')\n\nasync function handleSync() {\n  try {\n    await offlineStore.syncOfflineData()\n    // Show success notification\n  } catch (error) {\n    console.error('Sync failed:', error)\n  }\n}\n\nasync function handleLogout() {\n  await authStore.logout()\n}\n</script>\n\n<style scoped>\n.slide-down-enter-active,\n.slide-down-leave-active {\n  transition: all 0.2s ease;\n}\n\n.slide-down-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.slide-down-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n</style>","<template>\n  <nav class=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 safe-bottom z-40\">\n    <div class=\"max-w-7xl mx-auto px-2\">\n      <div class=\"flex justify-around items-center h-16\">\n        <router-link\n          v-for=\"item in navItems\"\n          :key=\"item.name\"\n          :to=\"item.path\"\n          class=\"flex flex-col items-center justify-center flex-1 py-2 px-1 rounded-lg transition-all duration-200\"\n          :class=\"isActive(item.path) ? 'text-primary-600' : 'text-gray-500 hover:text-gray-700'\"\n        >\n          <component \n            :is=\"item.icon\" \n            :class=\"['w-6 h-6 mb-1 transition-transform', isActive(item.path) && 'scale-110']\"\n          />\n          <span class=\"text-xs font-medium\">{{ item.label }}</span>\n          <div \n            v-if=\"isActive(item.path)\"\n            class=\"absolute bottom-0 w-12 h-1 bg-primary-600 rounded-t-full\"\n          />\n        </router-link>\n      </div>\n    </div>\n  </nav>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { \n  LayoutDashboard, \n  MapPin, \n  ClipboardCheck, \n  AlertTriangle,\n  User \n} from 'lucide-vue-next'\n\nconst route = useRoute()\n\nconst navItems = [\n  {\n    name: 'dashboard',\n    label: 'Dashboard',\n    path: '/driver',\n    icon: LayoutDashboard\n  },\n  {\n    name: 'trips',\n    label: 'Trips',\n    path: '/driver/trips',\n    icon: MapPin\n  },\n  {\n    name: 'inspection',\n    label: 'Inspect',\n    path: '/driver/inspection',\n    icon: ClipboardCheck\n  },\n  {\n    name: 'incident',\n    label: 'Incident',\n    path: '/driver/incident',\n    icon: AlertTriangle\n  },\n  {\n    name: 'profile',\n    label: 'Profile',\n    path: '/driver/profile',\n    icon: User\n  }\n]\n\nfunction isActive(path) {\n  if (path === '/driver') {\n    return route.path === path\n  }\n  return route.path.startsWith(path)\n}\n</script>","<template>\n  <transition name=\"slide-up\">\n    <div \n      v-if=\"!offlineStore.isOnline\"\n      class=\"fixed bottom-20 left-4 right-4 bg-amber-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 flex items-center justify-between\"\n    >\n      <div class=\"flex items-center space-x-2\">\n        <WifiOff class=\"w-5 h-5\" />\n        <div>\n          <p class=\"font-medium text-sm\">You're offline</p>\n          <p class=\"text-xs text-amber-100\">Changes will sync when online</p>\n        </div>\n      </div>\n      \n      <div \n        v-if=\"offlineStore.hasPendingChanges\"\n        class=\"bg-white text-amber-600 px-2 py-1 rounded text-xs font-bold\"\n      >\n        {{ offlineStore.pendingSync }} pending\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script setup>\nimport { WifiOff } from 'lucide-vue-next'\nimport { useOfflineStore } from '@/stores/offline'\n\nconst offlineStore = useOfflineStore()\n</script>\n\n<style scoped>\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: all 0.3s ease;\n}\n\n.slide-up-enter-from,\n.slide-up-leave-to {\n  transform: translateY(100px);\n  opacity: 0;\n}\n</style>","<template>\n  <Teleport to=\"body\">\n    <!-- SOS Floating Button -->\n    <button\n      v-if=\"!showModal\"\n      @click=\"openModal\"\n      class=\"fixed bottom-24 right-4 z-40 w-16 h-16 bg-red-600 hover:bg-red-700 rounded-full shadow-lg flex items-center justify-center animate-pulse active:scale-95 transition-transform\"\n      :class=\"{ 'opacity-50': sending }\"\n      :disabled=\"sending\"\n    >\n      <AlertCircle class=\"w-8 h-8 text-white\" />\n    </button>\n\n    <!-- SOS Modal -->\n    <Modal v-model=\"showModal\" title=\"Emergency SOS\" size=\"md\" :close-on-backdrop=\"false\">\n      <div class=\"space-y-4\">\n        <!-- Warning -->\n        <div class=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n          <div class=\"flex items-start space-x-3\">\n            <AlertTriangle class=\"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p class=\"font-semibold text-red-900\">Emergency Alert</p>\n              <p class=\"text-sm text-red-700 mt-1\">\n                This will send an immediate alert to the operations control room with your current location.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Current Location -->\n        <div v-if=\"locationData\" class=\"p-4 bg-gray-50 rounded-lg\">\n          <div class=\"flex items-start space-x-3\">\n            <MapPin class=\"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5\" />\n            <div class=\"flex-1\">\n              <p class=\"text-sm font-medium text-gray-900\">Current Location</p>\n              <p class=\"text-xs text-gray-600 mt-1\">\n                {{ formatCoordinates(locationData.latitude, locationData.longitude) }}\n              </p>\n              <p class=\"text-xs text-gray-500 mt-1\">\n                Accuracy: Â±{{ Math.round(locationData.accuracy) }}m\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div v-else-if=\"gettingLocation\" class=\"p-4 bg-gray-50 rounded-lg text-center\">\n          <div class=\"inline-block w-6 h-6 border-2 border-gray-300 border-t-primary-600 rounded-full animate-spin mb-2\"></div>\n          <p class=\"text-sm text-gray-600\">Getting your location...</p>\n        </div>\n\n        <div v-else-if=\"locationError\" class=\"p-4 bg-amber-50 border border-amber-200 rounded-lg\">\n          <div class=\"flex items-start space-x-2\">\n            <AlertTriangle class=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p class=\"text-sm font-medium text-amber-900\">Location Error</p>\n              <p class=\"text-xs text-amber-700 mt-1\">{{ locationError }}</p>\n              <button @click=\"retryLocation\" class=\"mt-2 text-xs text-amber-700 underline\">\n                Try Again\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Additional Notes -->\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n            Additional Information (Optional)\n          </label>\n          <textarea\n            v-model=\"notes\"\n            rows=\"3\"\n            class=\"w-full px-4 py-2 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent\"\n            placeholder=\"Describe the emergency situation...\"\n          ></textarea>\n        </div>\n\n        <!-- Quick Emergency Types -->\n        <div>\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n            Emergency Type\n          </label>\n          <div class=\"grid grid-cols-2 gap-2\">\n            <button\n              v-for=\"type in emergencyTypes\"\n              :key=\"type.value\"\n              @click=\"selectEmergencyType(type)\"\n              class=\"p-3 border rounded-lg text-left hover:bg-gray-50 transition-colors\"\n              :class=\"selectedType === type.value ? 'border-red-600 bg-red-50' : 'border-gray-300'\"\n            >\n              <component :is=\"type.icon\" class=\"w-5 h-5 mb-1\" :class=\"selectedType === type.value ? 'text-red-600' : 'text-gray-600'\" />\n              <p class=\"text-sm font-medium text-gray-900\">{{ type.label }}</p>\n            </button>\n          </div>\n        </div>\n\n        <!-- Actions -->\n        <div class=\"flex space-x-3 pt-4\">\n          <button\n            @click=\"showModal = false\"\n            class=\"flex-1 btn-secondary py-3\"\n            :disabled=\"sending\"\n          >\n            Cancel\n          </button>\n          <button\n            @click=\"sendSOS\"\n            class=\"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center\"\n            :disabled=\"sending || (!locationData && !locationError)\"\n          >\n            <AlertCircle v-if=\"!sending\" class=\"w-5 h-5 mr-2\" />\n            <div v-else class=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n            {{ sending ? 'Sending...' : 'Send SOS Alert' }}\n          </button>\n        </div>\n      </div>\n    </Modal>\n\n    <!-- Success Toast -->\n    <Toast\n      v-model=\"showToast\"\n      type=\"success\"\n      title=\"SOS Alert Sent\"\n      message=\"Emergency services have been notified. Help is on the way.\"\n    />\n  </Teleport>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { AlertCircle, AlertTriangle, MapPin, Phone, Ambulance, Car, Wrench } from 'lucide-vue-next'\nimport { useGeolocation, formatCoordinates } from '@/composables/useGeolocation'\nimport { useIncidentStore } from '@/stores/incident'\nimport Modal from './Modal.vue'\nimport Toast from './Toast.vue'\n\nconst { coords, error: locationError, getCurrentPosition } = useGeolocation()\n\nconst showModal = ref(false)\nconst showToast = ref(false)\nconst sending = ref(false)\nconst gettingLocation = ref(false)\nconst locationData = ref(null)\nconst notes = ref('')\nconst selectedType = ref('general')\n\nconst incidentStore = useIncidentStore()\n\nconst emergencyTypes = [\n  { value: 'medical', label: 'Medical', icon: Ambulance },\n  { value: 'accident', label: 'Accident', icon: Car },\n  { value: 'breakdown', label: 'Breakdown', icon: Wrench },\n  { value: 'general', label: 'Other', icon: AlertCircle }\n]\n\nasync function openModal() {\n  showModal.value = true\n  notes.value = ''\n  selectedType.value = 'general'\n  \n  // Get current location\n  await getLocation()\n}\n\nasync function getLocation() {\n  gettingLocation.value = true\n  \n  try {\n    const position = await getCurrentPosition()\n    locationData.value = position\n  } catch (error) {\n    console.error('Failed to get location:', error)\n  } finally {\n    gettingLocation.value = false\n  }\n}\n\nasync function retryLocation() {\n  await getLocation()\n}\n\nfunction selectEmergencyType(type) {\n  selectedType.value = type.value\n  if (!notes.value) {\n    notes.value = `${type.label} emergency`\n  }\n}\n\nasync function sendSOS() {\n  sending.value = true\n  \n  try {\n    const sosData = {\n      lat: locationData.value?.latitude,\n      lng: locationData.value?.longitude,\n      accuracy: locationData.value?.accuracy\n    }\n    \n    const fullNotes = `${selectedType.value.toUpperCase()}: ${notes.value || 'Emergency situation'}`\n    \n    await incidentStore.sendSOSAlert(sosData, fullNotes)\n    \n    showModal.value = false\n    showToast.value = true\n    \n    // Clear form\n    notes.value = ''\n    selectedType.value = 'general'\n    locationData.value = null\n    \n    // Vibrate if supported\n    if ('vibrate' in navigator) {\n      navigator.vibrate([200, 100, 200, 100, 200])\n    }\n  } catch (error) {\n    console.error('Failed to send SOS:', error)\n    alert('Failed to send SOS alert. Please try calling emergency services directly.')\n  } finally {\n    sending.value = false\n  }\n}\n\nwatch(() => coords.value, (newCoords) => {\n  if (newCoords && !locationData.value) {\n    locationData.value = newCoords\n  }\n})\n</script>\n","<template>\n  <div class=\"min-h-screen flex flex-col bg-gray-50\">\n    <!-- Header -->\n    <AppHeader />\n    \n    <!-- Main Content -->\n    <main class=\"flex-1 pb-20 safe-bottom\">\n      <div class=\"max-w-7xl mx-auto px-4 py-6\">\n        <router-view v-slot=\"{ Component }\">\n          <transition name=\"fade\" mode=\"out-in\">\n            <component :is=\"Component\" />\n          </transition>\n        </router-view>\n      </div>\n    </main>\n    \n    <!-- Bottom Navigation -->\n    <AppBottomNav />\n    \n    <!-- SOS Emergency Button -->\n    <SOSButton />\n    \n    <!-- Offline Indicator -->\n    <OfflineIndicator />\n  </div>\n</template>\n\n<script setup>\nimport { onMounted } from 'vue'\nimport AppHeader from './AppHeader.vue'\nimport AppBottomNav from './AppBottomNav.vue'\nimport OfflineIndicator from '../common/OfflineIndicator.vue'\nimport SOSButton from '../common/SOSButton.vue'\nimport { useAuthStore } from '@/stores/auth'\nimport { useOfflineStore } from '@/stores/offline'\n\nconst authStore = useAuthStore()\nconst offlineStore = useOfflineStore()\n\nonMounted(async () => {\n  await authStore.fetchUserInfo()\n  offlineStore.initializeOnlineListener()\n})\n</script>\n\n<style scoped>\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>"],"names":["Ambulance","createLucideIcon","Car","CircleUser","LayoutDashboard","WifiOff","Wrench","route","useRoute","authStore","useAuthStore","offlineStore","useOfflineStore","showProfile","ref","pageTitle","computed","handleSync","error","handleLogout","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_unref","Truck","_cache","_hoisted_6","_toDisplayString","_hoisted_7","RefreshCw","_normalizeClass","$event","_hoisted_9","User","_Transition","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_component_router_link","UserCircle","LogOut","navItems","MapPin","ClipboardCheck","AlertTriangle","isActive","path","_Fragment","_renderList","item","_createBlock","_resolveDynamicComponent","coords","locationError","getCurrentPosition","useGeolocation","showModal","showToast","sending","gettingLocation","locationData","notes","selectedType","incidentStore","useIncidentStore","emergencyTypes","AlertCircle","openModal","getLocation","position","retryLocation","selectEmergencyType","type","sendSOS","sosData","fullNotes","watch","newCoords","_Teleport","Modal","_hoisted_8","formatCoordinates","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20","_createTextVNode","Toast","onMounted","AppHeader","_component_router_view","_withCtx","Component","AppBottomNav","SOSButton","OfflineIndicator"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}
import{x as w,r as o,j as m}from"./vue-vendor-Drzz9AVS.js";import{f as i}from"./index-Ddao6l4m.js";const j=w("trip",()=>{const s=o([]),u=o(null),n=o(!1),t=o(null),v=m(()=>s.value.filter(a=>new Date(a.start_time)>new Date)),d=m(()=>s.value.filter(a=>a.status==="Active"));async function c(){n.value=!0,t.value=null;try{const a=await i.call("tems.api.pwa.driver.get_driver_dashboard");return s.value=[...a.journey_plans.map(e=>({...e,type:"journey"})),...a.operation_plans.map(e=>({...e,type:"operation"}))],a}catch(a){throw t.value=a.message,a}finally{n.value=!1}}async function f(a){n.value=!0;try{return await i.call("tems.api.pwa.driver.get_journey_details",{journey_plan_name:a})}catch(e){throw t.value=e.message,e}finally{n.value=!1}}async function _(a,e,p){try{const r=await i.call("tems.api.pwa.driver.start_trip",{journey_plan_name:a,odometer_reading:e,location_data:p});return u.value=a,await c(),r}catch(r){throw t.value=r.message,r}}async function y(a,e,p,r){try{const l=await i.call("tems.api.pwa.driver.complete_trip",{journey_plan_name:a,odometer_reading:e,location_data:p,notes:r});return u.value=null,await c(),l}catch(l){throw t.value=l.message,l}}return{trips:s,activeTrip:u,loading:n,error:t,upcomingTrips:v,inProgressTrips:d,fetchDashboard:c,fetchTripDetails:f,startTrip:_,completeTrip:y}});export{j as u};
//# sourceMappingURL=trip-BhkitPdW.js.map

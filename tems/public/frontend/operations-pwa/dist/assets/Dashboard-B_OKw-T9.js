import{c as p,a as A,f as d,w as B,g,j as b,i as l,D as _,n as C,E as D,C as R,t as z,F,h as H,y as J,l as I,k as X,b as x,G as q,d as O,r as S,o as Y,u as f,B as K}from"./vue-vendor-Dxtg618h.js";import{_ as P,f as $}from"./index-D1KR3w15.js";import"./utils-2PtTei_Y.js";const W={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},ee={key:2},te={__name:"Button",props:{label:{type:String,default:""},variant:{type:String,default:"primary",validator:e=>["primary","secondary","danger","success","outline","ghost","link"].includes(e)},size:{type:String,default:"md",validator:e=>["xs","sm","md","lg","xl"].includes(e)},type:{type:String,default:"button",validator:e=>["button","submit","reset"].includes(e)},tag:{type:String,default:"button",validator:e=>["button","a"].includes(e)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},block:{type:Boolean,default:!1},icon:{type:[Object,String],default:null},iconRight:{type:Boolean,default:!1},rounded:{type:String,default:"lg",validator:e=>["none","sm","md","lg","full"].includes(e)}},emits:["click"],setup(e,{emit:n}){const t=e,a=n,i=p(()=>{const r=["inline-flex items-center justify-center font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed"],h={xs:"px-2.5 py-1.5 text-xs",sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-5 py-3 text-base",xl:"px-6 py-3.5 text-base"};r.push(h[t.size]);const u={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"};r.push(u[t.rounded]);const s={primary:"bg-neon-green text-charcoal hover:bg-neon-green-600 focus:ring-neon-green shadow-sm",secondary:"bg-charcoal text-white hover:bg-charcoal-light focus:ring-charcoal shadow-sm",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-sm",outline:"border-2 border-neon-green text-neon-green hover:bg-neon-green hover:text-charcoal focus:ring-neon-green",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-300",link:"text-neon-green hover:text-neon-green-600 underline-offset-4 hover:underline focus:ring-neon-green"};return r.push(s[t.variant]),t.block&&r.push("w-full"),r.join(" ")}),v=p(()=>{const r=["flex-shrink-0"],h={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-5 h-5",xl:"w-6 h-6"};return r.push(h[t.size]),(t.label||t.$slots.default)&&(t.iconRight?r.push("ml-2"):r.push("mr-2")),r.join(" ")});function m(r){!t.disabled&&!t.loading&&a("click",r)}return(r,h)=>(d(),A(_(e.tag),{type:e.tag==="button"?e.type:void 0,disabled:e.disabled||e.loading,class:C(i.value),onClick:m},{default:B(()=>[e.loading?(d(),g("svg",W,[...h[0]||(h[0]=[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):b("",!0),e.icon&&!e.iconRight?(d(),A(_(e.icon),{key:1,class:C(v.value)},null,8,["class"])):b("",!0),r.$slots.default||e.label?(d(),g("span",ee,[D(r.$slots,"default",{},()=>[R(z(e.label),1)],!0)])):b("",!0),e.icon&&e.iconRight?(d(),A(_(e.icon),{key:3,class:C(v.value)},null,8,["class"])):b("",!0)]),_:3},8,["type","disabled","class"]))}},E=P(te,[["__scopeId","data-v-5cd97749"]]),se={key:1,class:"flex space-x-2"},ae={key:3,class:"space-y-3 w-full"},le={key:4,class:"w-full"},ne={__name:"Loading",props:{visible:{type:Boolean,default:!0},type:{type:String,default:"spinner",validator:e=>["spinner","dots","pulse","bar","skeleton"].includes(e)},size:{type:String,default:"md",validator:e=>["sm","md","lg","xl"].includes(e)},color:{type:String,default:"primary",validator:e=>["primary","secondary","white","gray"].includes(e)},text:{type:String,default:""},fullscreen:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},bars:{type:Number,default:3}},setup(e){const n=e,t=p(()=>{const s=["flex flex-col items-center justify-center"];return n.fullscreen&&s.push("fixed inset-0 z-50"),n.overlay&&s.push("bg-black bg-opacity-50"),s.join(" ")}),a=p(()=>[{sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24"}[n.size],r.value].join(" ")),i=p(()=>({sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4",xl:"w-6 h-6"})[n.size]),v=p(()=>[{sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24"}[n.size],r.value,"relative"].join(" ")),m=p(()=>[{sm:"h-2",md:"h-3",lg:"h-4",xl:"h-6"}[n.size],"bg-gray-300"].join(" ")),r=p(()=>({primary:"text-neon-green",secondary:"text-charcoal",white:"text-white",gray:"text-gray-500"})[n.color]),h=p(()=>[{sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"}[n.size],"mt-4 font-medium",n.overlay?"text-white":"text-gray-700"].join(" "));function u(s){const o=["100%","85%","70%","95%","80%"];return o[s%o.length]}return(s,o)=>e.visible?(d(),g("div",{key:0,class:C(t.value)},[e.type==="spinner"?(d(),g("div",{key:0,class:C(a.value)},[...o[0]||(o[0]=[l("svg",{class:"animate-spin",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])],2)):e.type==="dots"?(d(),g("div",se,[(d(),g(F,null,H(3,w=>l("div",{key:w,class:C(["rounded-full animate-bounce",i.value,r.value]),style:I({animationDelay:`${w*.15}s`})},null,6)),64))])):e.type==="pulse"?(d(),g("div",{key:2,class:C(v.value)},[...o[1]||(o[1]=[l("div",{class:"w-full h-full rounded-full animate-ping"},null,-1)])],2)):e.type==="bar"?(d(),g("div",ae,[(d(!0),g(F,null,H(e.bars,w=>(d(),g("div",{key:w,class:C(["animate-pulse rounded",m.value]),style:I({width:u(w)})},null,6))),128))])):e.type==="skeleton"?(d(),g("div",le,[D(s.$slots,"skeleton",{},()=>[o[2]||(o[2]=J('<div class="animate-pulse space-y-4" data-v-ceff5077><div class="flex items-center space-x-4" data-v-ceff5077><div class="rounded-full bg-gray-300 h-12 w-12" data-v-ceff5077></div><div class="flex-1 space-y-2" data-v-ceff5077><div class="h-4 bg-gray-300 rounded w-3/4" data-v-ceff5077></div><div class="h-4 bg-gray-300 rounded w-1/2" data-v-ceff5077></div></div></div><div class="space-y-2" data-v-ceff5077><div class="h-4 bg-gray-300 rounded" data-v-ceff5077></div><div class="h-4 bg-gray-300 rounded w-5/6" data-v-ceff5077></div><div class="h-4 bg-gray-300 rounded w-4/6" data-v-ceff5077></div></div></div>',1))])])):b("",!0),e.text?(d(),g("p",{key:5,class:C(h.value)},z(e.text),3)):b("",!0)],2)):b("",!0)}},G=P(ne,[["__scopeId","data-v-ceff5077"]]),re={key:2},oe={__name:"Badge",props:{label:{type:[String,Number],default:""},variant:{type:String,default:"default",validator:e=>["default","primary","secondary","success","danger","warning","info"].includes(e)},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},rounded:{type:String,default:"full",validator:e=>["sm","md","lg","full"].includes(e)},dot:{type:Boolean,default:!1},icon:{type:[Object,String],default:null},iconRight:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},outline:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const t=e,a=n,i=p(()=>{const r=["inline-flex items-center justify-center font-medium","transition-all duration-200"],h={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-0.5 text-xs gap-1",lg:"px-3 py-1 text-sm gap-1.5"};r.push(h[t.size]);const u={sm:"rounded",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"};if(r.push(u[t.rounded]),t.outline){const s={default:"border border-gray-300 text-gray-700 hover:bg-gray-50",primary:"border border-neon-green text-neon-green hover:bg-neon-green hover:text-charcoal",secondary:"border border-charcoal text-charcoal hover:bg-charcoal hover:text-white",success:"border border-green-500 text-green-700 hover:bg-green-50",danger:"border border-red-500 text-red-700 hover:bg-red-50",warning:"border border-yellow-500 text-yellow-700 hover:bg-yellow-50",info:"border border-blue-500 text-blue-700 hover:bg-blue-50"};r.push(s[t.variant])}else{const s={default:"bg-gray-100 text-gray-800",primary:"bg-neon-green text-charcoal",secondary:"bg-charcoal text-white",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"};r.push(s[t.variant])}return r.join(" ")}),v=p(()=>{const r=["w-2 h-2 rounded-full"],h={default:"bg-gray-400",primary:"bg-neon-green-700",secondary:"bg-white",success:"bg-green-500",danger:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"};return r.push(h[t.variant]),["success","danger","warning"].includes(t.variant)&&r.push("animate-pulse"),r.join(" ")});function m(){a("close")}return(r,h)=>(d(),g("span",{class:C(i.value)},[e.icon&&!e.iconRight?(d(),A(_(e.icon),{key:0,class:"w-3 h-3"})):b("",!0),e.dot?(d(),g("span",{key:1,class:C(v.value)},null,2)):b("",!0),r.$slots.default||e.label?(d(),g("span",re,[D(r.$slots,"default",{},()=>[R(z(e.label),1)])])):b("",!0),e.icon&&e.iconRight?(d(),A(_(e.icon),{key:3,class:"w-3 h-3"})):b("",!0),e.closable?(d(),g("button",{key:4,type:"button",onClick:X(m,["stop"]),class:"ml-1 -mr-0.5 flex-shrink-0 hover:opacity-70 transition-opacity"},[...h[0]||(h[0]=[l("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])):b("",!0)],2))}},ie=P(oe,[["__scopeId","data-v-45e36c99"]]),ce={class:"flex items-center space-x-3"},de={class:"text-lg font-semibold text-gray-900"},ue={key:0,class:"text-sm text-gray-500"},ge={key:0,class:"flex items-center space-x-2"},he={key:2,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg"},fe={__name:"Card",props:{title:{type:String,default:""},subtitle:{type:String,default:""},icon:{type:[Object,String],default:null},variant:{type:String,default:"default",validator:e=>["default","bordered","elevated","flat"].includes(e)},hoverable:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padding:{type:Boolean,default:!0},rounded:{type:String,default:"lg",validator:e=>["none","sm","md","lg","xl"].includes(e)},headerClass:{type:String,default:""},bodyClass:{type:String,default:""},footerClass:{type:String,default:""}},emits:["click"],setup(e,{emit:n}){const t=e,a=p(()=>{const i=["relative bg-white transition-all duration-200"],v={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl"};i.push(v[t.rounded]);const m={default:"border border-gray-200",bordered:"border-2 border-gray-300",elevated:"shadow-lg",flat:""};return i.push(m[t.variant]),t.hoverable&&i.push("hover:shadow-xl hover:scale-[1.02]"),t.clickable&&i.push("cursor-pointer hover:shadow-md"),t.loading&&i.push("overflow-hidden"),i.join(" ")});return(i,v)=>(d(),g("div",{class:C(a.value)},[e.title||i.$slots.header||i.$slots.actions?(d(),g("div",{key:0,class:C(["flex items-center justify-between",e.headerClass||"px-6 py-4 border-b border-gray-200"])},[D(i.$slots,"header",{},()=>[l("div",ce,[e.icon?(d(),A(_(e.icon),{key:0,class:"w-6 h-6 text-gray-600"})):b("",!0),l("div",null,[l("h3",de,z(e.title),1),e.subtitle?(d(),g("p",ue,z(e.subtitle),1)):b("",!0)])])]),i.$slots.actions?(d(),g("div",ge,[D(i.$slots,"actions",{},void 0)])):b("",!0)],2)):b("",!0),l("div",{class:C(e.bodyClass||"px-6 py-4")},[D(i.$slots,"default",{},void 0)],2),i.$slots.footer?(d(),g("div",{key:1,class:C(e.footerClass||"px-6 py-4 border-t border-gray-200 bg-gray-50")},[D(i.$slots,"footer",{},void 0)],2)):b("",!0),e.loading?(d(),g("div",he,[x(G,{type:"spinner",size:"lg"})])):b("",!0)],2))}},V=P(fe,[["__scopeId","data-v-51e49d88"]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ve=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,a)=>a?a.toUpperCase():t.toLowerCase()),ye=e=>{const n=ve(e);return n.charAt(0).toUpperCase()+n.slice(1)},pe=(...e)=>e.filter((n,t,a)=>!!n&&n.trim()!==""&&a.indexOf(n)===t).join(" ").trim(),U=e=>e==="";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=({name:e,iconNode:n,absoluteStrokeWidth:t,"absolute-stroke-width":a,strokeWidth:i,"stroke-width":v,size:m=N.width,color:r=N.stroke,...h},{slots:u})=>q("svg",{...N,...h,width:m,height:m,stroke:r,"stroke-width":U(t)||U(a)||t===!0||a===!0?Number(i||v||N["stroke-width"])*24/Number(m):i||v||N["stroke-width"],class:pe("lucide",h.class,...e?[`lucide-${T(ye(e))}-icon`,`lucide-${T(e)}`]:["lucide-icon"])},[...n.map(s=>q(...s)),...u.default?[u.default()]:[]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=(e,n)=>(t,{slots:a,attrs:i})=>q(me,{...i,...t,iconNode:n,name:e},a);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=L("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=L("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=L("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=L("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=L("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=L("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Se=O("fleet",()=>{const e=S([]),n=S([]),t=S(!1),a=S(null),i=S(null),v=p(()=>e.value.length),m=p(()=>n.value.filter(c=>c.status==="active").length),r=p(()=>e.value.filter(c=>c.availability==="available").length);async function h(){t.value=!0,a.value=null;try{const c=await $.call({method:"tems.api.pwa.operations.get_fleet_vehicles",args:{}});return e.value=c.message||[],i.value=new Date,e.value}catch(c){throw a.value=c.message,c}finally{t.value=!1}}async function u(){t.value=!0,a.value=null;try{const c=await $.call({method:"tems.api.pwa.operations.get_active_vehicles",args:{}});return n.value=c.message||[],n.value}catch(c){throw a.value=c.message,c}finally{t.value=!1}}async function s(c){try{return(await $.call({method:"tems.api.pwa.operations.get_vehicle_location",args:{vehicle_id:c}})).message}catch(y){throw a.value=y.message,y}}async function o(c,y){try{const k=await $.call({method:"tems.api.pwa.operations.update_vehicle_status",args:{vehicle_id:c,status:y}}),M=e.value.findIndex(j=>j.name===c);return M!==-1&&(e.value[M].status=y),k.message}catch(k){throw a.value=k.message,k}}function w(){a.value=null}return{vehicles:e,activeVehicles:n,loading:t,error:a,lastUpdate:i,totalVehicles:v,activeCount:m,availableCount:r,fetchVehicles:h,fetchActiveVehicles:u,getVehicleLocation:s,updateVehicleStatus:o,clearError:w}}),$e=O("dispatch",()=>{const e=S([]),n=S([]),t=S(!1),a=S(null),i=p(()=>e.value.length),v=p(()=>n.value.length),m=p(()=>e.value.filter(c=>c.status==="in_progress"));async function r(c={}){t.value=!0,a.value=null;try{const y=await $.call({method:"tems.api.pwa.operations.get_dispatches",args:{filters:c}});return e.value=y.message||[],e.value}catch(y){throw a.value=y.message,y}finally{t.value=!1}}async function h(){t.value=!0,a.value=null;try{const c=await $.call({method:"tems.api.pwa.operations.get_pending_dispatches",args:{}});return n.value=c.message||[],n.value}catch(c){throw a.value=c.message,c}finally{t.value=!1}}async function u(c){t.value=!0,a.value=null;try{const k=(await $.call({method:"tems.api.pwa.operations.create_dispatch",args:{dispatch_data:c}})).message;return e.value.unshift(k),k}catch(y){throw a.value=y.message,y}finally{t.value=!1}}async function s(c,y,k){try{const M=await $.call({method:"tems.api.pwa.operations.assign_driver",args:{dispatch_id:c,driver_id:y,vehicle_id:k}}),j=e.value.findIndex(Q=>Q.name===c);return j!==-1&&(e.value[j].driver=y,e.value[j].vehicle=k,e.value[j].status="assigned"),M.message}catch(M){throw a.value=M.message,M}}async function o(c,y){try{const k=await $.call({method:"tems.api.pwa.operations.update_dispatch_status",args:{dispatch_id:c,status:y}}),M=e.value.findIndex(j=>j.name===c);return M!==-1&&(e.value[M].status=y),k.message}catch(k){throw a.value=k.message,k}}function w(){a.value=null}return{dispatches:e,pendingDispatches:n,loading:t,error:a,totalDispatches:i,pendingCount:v,activeDispatches:m,fetchDispatches:r,fetchPendingDispatches:h,createDispatch:u,assignDriver:s,updateDispatchStatus:o,clearError:w}}),ze=O("route",()=>{const e=S([]),n=S([]),t=S(!1),a=S(null),i=p(()=>e.value.length),v=p(()=>n.value.length);async function m(){t.value=!0,a.value=null;try{const o=await $.call({method:"tems.api.pwa.operations.get_routes",args:{}});return e.value=o.message||[],e.value}catch(o){throw a.value=o.message,o}finally{t.value=!1}}async function r(){t.value=!0,a.value=null;try{const o=await $.call({method:"tems.api.pwa.operations.get_active_routes",args:{}});return n.value=o.message||[],n.value}catch(o){throw a.value=o.message,o}finally{t.value=!1}}async function h(o){try{return(await $.call({method:"tems.api.pwa.operations.get_route_details",args:{route_id:o}})).message}catch(w){throw a.value=w.message,w}}async function u(o){try{return(await $.call({method:"tems.api.pwa.operations.optimize_route",args:{route_id:o}})).message}catch(w){throw a.value=w.message,w}}function s(){a.value=null}return{routes:e,activeRoutes:n,loading:t,error:a,totalRoutes:i,activeCount:v,fetchRoutes:m,fetchActiveRoutes:r,getRouteDetails:h,optimizeRoute:u,clearError:s}}),Be={class:"min-h-screen bg-gray-50"},Me={class:"max-w-7xl mx-auto px-4 py-6 space-y-8"},je={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},De={class:"flex items-center justify-between"},Ve={class:"text-3xl font-bold text-primary-600"},Re={class:"flex items-center justify-between"},Ae={class:"text-3xl font-bold text-warning"},_e={class:"flex items-center justify-between"},Le={class:"text-3xl font-bold text-success"},Ne={class:"flex items-center justify-between"},Pe={class:"text-3xl font-bold text-info"},Ee={class:"mb-8"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},He={class:"mb-8"},qe={key:0,class:"text-center py-8"},Oe={key:1,class:"text-center py-8 text-gray-500"},Ie={key:2,class:"space-y-4"},Te={class:"font-medium text-gray-900"},Ue={class:"text-sm text-gray-600"},Je={__name:"Dashboard",setup(e){const n=K(),t=Se(),a=$e(),i=ze(),v=p(()=>a.dispatches.slice(0,5));function m(u){return{pending:"warning",assigned:"info",in_progress:"primary",completed:"success",cancelled:"error"}[u]||"secondary"}const r=S(!0),h=S(null);return Y(async()=>{try{await Promise.all([t.fetchActiveVehicles().catch(u=>console.warn("Fleet fetch error:",u)),a.fetchPendingDispatches().catch(u=>console.warn("Dispatch fetch error:",u)),a.fetchDispatches({limit:5}).catch(u=>console.warn("Dispatches fetch error:",u)),i.fetchActiveRoutes().catch(u=>console.warn("Routes fetch error:",u))])}catch(u){h.value=u.message,console.error("Dashboard data fetch error:",u)}finally{r.value=!1}}),(u,s)=>(d(),g("div",Be,[s[13]||(s[13]=l("div",{class:"bg-white border-b border-gray-200 px-4 py-6"},[l("div",{class:"max-w-7xl mx-auto"},[l("h1",{class:"text-2xl font-bold text-gray-900"},"Operations Dashboard"),l("p",{class:"text-sm text-gray-600 mt-1"},"Fleet Tracking & Dispatch Management")])],-1)),l("div",Me,[l("div",je,[x(f(V),null,{default:B(()=>[l("div",De,[l("div",null,[s[3]||(s[3]=l("p",{class:"text-sm text-gray-600"},"Active Vehicles",-1)),l("p",Ve,z(f(t).activeCount),1)]),x(f(Ce),{class:"w-12 h-12 text-primary-400"})])]),_:1}),x(f(V),null,{default:B(()=>[l("div",Re,[l("div",null,[s[4]||(s[4]=l("p",{class:"text-sm text-gray-600"},"Pending Dispatches",-1)),l("p",Ae,z(f(a).pendingCount),1)]),x(f(be),{class:"w-12 h-12 text-warning"})])]),_:1}),x(f(V),null,{default:B(()=>[l("div",_e,[l("div",null,[s[5]||(s[5]=l("p",{class:"text-sm text-gray-600"},"Active Routes",-1)),l("p",Le,z(f(i).activeCount),1)]),x(f(Z),{class:"w-12 h-12 text-success"})])]),_:1}),x(f(V),null,{default:B(()=>[l("div",Ne,[l("div",null,[s[6]||(s[6]=l("p",{class:"text-sm text-gray-600"},"Available Vehicles",-1)),l("p",Pe,z(f(t).availableCount),1)]),x(f(xe),{class:"w-12 h-12 text-info"})])]),_:1})]),l("div",Ee,[s[10]||(s[10]=l("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),l("div",Fe,[x(f(E),{variant:"primary",onClick:s[0]||(s[0]=o=>f(n).push("/dispatch")),class:"py-6"},{default:B(()=>[x(f(we),{class:"w-5 h-5 mr-2"}),s[7]||(s[7]=R(" New Dispatch ",-1))]),_:1}),x(f(E),{variant:"secondary",onClick:s[1]||(s[1]=o=>f(n).push("/fleet")),class:"py-6"},{default:B(()=>[x(f(Z),{class:"w-5 h-5 mr-2"}),s[8]||(s[8]=R(" Track Fleet ",-1))]),_:1}),x(f(E),{variant:"secondary",onClick:s[2]||(s[2]=o=>f(n).push("/routes")),class:"py-6"},{default:B(()=>[x(f(ke),{class:"w-5 h-5 mr-2"}),s[9]||(s[9]=R(" Manage Routes ",-1))]),_:1})])]),l("div",He,[x(f(V),null,{default:B(()=>[...s[11]||(s[11]=[l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Active Vehicles",-1),l("div",{class:"bg-gray-100 h-96 rounded-lg flex items-center justify-center"},[l("p",{class:"text-gray-500"},"Map View (Leaflet integration)")],-1)])]),_:1})]),l("div",null,[s[12]||(s[12]=l("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Recent Dispatches",-1)),x(f(V),null,{default:B(()=>[f(a).loading?(d(),g("div",qe,[x(f(G))])):v.value.length===0?(d(),g("div",Oe," No recent dispatches ")):(d(),g("div",Ie,[(d(!0),g(F,null,H(v.value,o=>(d(),g("div",{key:o.name,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50"},[l("div",null,[l("h4",Te,z(o.route_name),1),l("p",Ue,"Driver: "+z(o.driver_name||"Unassigned"),1)]),x(f(ie),{variant:m(o.status)},{default:B(()=>[R(z(o.status),1)]),_:2},1032,["variant"])]))),128))]))]),_:1})])])]))}};export{Je as default};
//# sourceMappingURL=Dashboard-B_OKw-T9.js.map

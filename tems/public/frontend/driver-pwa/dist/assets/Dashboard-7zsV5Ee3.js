import{r as h,k as u,l as E,c as a,a as e,t as l,m as o,d as m,h as n,n as I,u as N,p as v,i as y,j as S,F as q,q as R,o as i,g as P}from"./vue-vendor-85nDNI24.js";import"./index-CvUSgFKw.js";import{u as B}from"./useAuth-DE1TjW5q.js";import{u as L}from"./trip-C6EWYD5d.js";import{_ as F}from"./TripCard-DuyOCdnh.js";import{_ as U}from"./LoadingSpinner-BQrI8T8P.js";import{_ as Y}from"./EmptyState-Ws_K2wgV.js";import{f as _,d as z}from"./utils-DGK9-2WQ.js";import{T as Q}from"./truck-iOzUoDvC.js";import{R as w,C as k,a as W}from"./route-ugDfWfcc.js";import{C as G}from"./credit-card-9EbXiG2r.js";import{C as H}from"./StatusBadge-q7HUT-w6.js";import{T as C}from"./triangle-alert-f0HtByGp.js";import{M as J}from"./map-pin-pIZ_tXSm.js";import{C as K}from"./chevron-right-CW-NWNE4.js";import"./package-BrCQSYfT.js";import"./createLucideIcon-TnRFscOj.js";import"./users-BMsH5R0H.js";import"./navigation-BNa_ULIU.js";import"./circle-x-RwOzPd3h.js";const O={class:"min-h-screen bg-gray-50"},X={class:"bg-white border-b border-gray-200 px-4 py-6"},Z={class:"max-w-7xl mx-auto"},ee={class:"text-sm text-gray-600 mt-1"},te={class:"max-w-7xl mx-auto px-4 py-6 space-y-8"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},oe={class:"bg-white rounded-lg shadow p-6"},re={class:"flex items-center justify-between"},ne={class:"text-3xl font-bold text-blue-600"},ie={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},ae={class:"bg-white rounded-lg shadow p-6"},le={class:"flex items-center justify-between"},de={class:"text-3xl font-bold text-green-600"},ce={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},ue={class:"bg-white rounded-lg shadow p-6"},me={class:"flex items-center justify-between"},pe={class:"text-3xl font-bold text-amber-600"},ge={class:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center"},xe={key:0,class:"bg-white rounded-lg shadow p-6"},be={class:"flex items-center justify-between mb-4"},fe={class:"flex items-center justify-between"},he={class:"font-medium text-gray-900"},ve={class:"text-right"},ye={key:0,class:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start space-x-2"},_e={class:"bg-white rounded-lg shadow p-6"},we={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ke={class:"bg-white rounded-lg shadow p-6"},Ce={class:"flex items-center justify-between mb-4"},je={key:0,class:"flex justify-center py-8"},De={key:1,class:"space-y-4"},Te={key:1,class:"bg-white rounded-lg shadow p-6"},Me={class:"space-y-3"},Ae={key:0,class:"flex items-center justify-between p-4 bg-amber-50 border border-amber-200 rounded-lg"},Ve={class:"flex items-center space-x-3"},$e={class:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center"},Ee={class:"text-sm text-gray-600"},Ie={key:1,class:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg"},Ne={class:"flex items-center space-x-3"},Se={class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},qe={class:"text-sm text-gray-600"},rt={__name:"Dashboard",setup(Re){const c=N(),g=B(),x=L(),s=h(null),j=h(!1),D=u(()=>_(new Date,"EEEE, MMMM d, yyyy")),b=u(()=>{if(!s.value)return[];const r=s.value.journey_plans||[],t=s.value.operation_plans||[];return[...r,...t].sort((p,d)=>new Date(p.start_time)-new Date(d.start_time)).slice(0,3)}),T=u(()=>s.value?(s.value.operation_plans||[]).filter(t=>t.status==="Active").length:0),f=u(()=>{if(!s.value?.qualification?.expiry_date)return!1;const r=z(new Date(s.value.qualification.expiry_date),new Date);return r<=30&&r>=0}),M=u(()=>s.value?.pending_checks?.length>0||s.value?.recent_incidents?.length>0);function A(r){return _(new Date(r),"MMM d, yyyy")}async function V(r){c.push(`/driver/trips/${r.name}?action=start`)}function $(r){c.push(`/driver/trips/${r.name}`)}return E(async()=>{try{g.isAuthenticated||await g.fetchUserInfo(),s.value=await x.fetchDashboard()}catch(r){console.error("Failed to load dashboard:",r)}}),(r,t)=>{const p=S("router-link");return i(),a("div",O,[e("div",X,[e("div",Z,[t[4]||(t[4]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Driver Dashboard",-1)),e("p",ee,"Welcome back, "+l(o(g).userName||"Driver")+"! â€¢ "+l(D.value),1)])]),e("div",te,[e("div",se,[e("div",oe,[e("div",re,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-600"},"Trips Today",-1)),e("p",ne,l(s.value?.journey_plans?.length||0),1)]),e("div",ie,[n(o(Q),{class:"w-6 h-6 text-blue-600"})])])]),e("div",ae,[e("div",le,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-600"},"Active Trips",-1)),e("p",de,l(T.value),1)]),e("div",ce,[n(o(w),{class:"w-6 h-6 text-green-600"})])])]),e("div",ue,[e("div",me,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm text-gray-600"},"Pending Tasks",-1)),e("p",pe,l(s.value?.pending_checks?.length||0),1)]),e("div",ge,[n(o(k),{class:"w-6 h-6 text-amber-600"})])])])]),s.value?.qualification?(i(),a("div",xe,[e("div",be,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Driver License Status",-1)),n(o(G),{class:"w-6 h-6 text-gray-400"})]),e("div",fe,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm text-gray-600"},"License Number",-1)),e("p",he,l(s.value.qualification.license_no),1)]),e("div",ve,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Expires",-1)),e("p",{class:I(["font-medium",f.value?"text-amber-600":"text-gray-900"])},l(A(s.value.qualification.expiry_date)),3)])]),f.value?(i(),a("div",ye,[n(o(H),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),t[11]||(t[11]=e("p",{class:"text-sm text-amber-700"}," Your license is expiring soon. Please renew it to continue driving. ",-1))])):m("",!0)])):m("",!0),e("div",_e,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",we,[e("button",{onClick:t[0]||(t[0]=d=>o(c).push("/trips")),class:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"},[n(o(w),{class:"w-8 h-8 text-blue-600 mx-auto mb-2"}),t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-900"},"My Trips",-1))]),e("button",{onClick:t[1]||(t[1]=d=>o(c).push("/inspection")),class:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"},[n(o(k),{class:"w-8 h-8 text-blue-600 mx-auto mb-2"}),t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-900"},"Inspection",-1))]),e("button",{onClick:t[2]||(t[2]=d=>o(c).push("/incident")),class:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"},[n(o(C),{class:"w-8 h-8 text-blue-600 mx-auto mb-2"}),t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-900"},"Report Incident",-1))])])]),e("div",ke,[e("div",Ce,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Today's Trips",-1)),n(p,{to:"/trips",class:"text-sm text-blue-600 font-medium flex items-center space-x-1 hover:text-blue-700"},{default:y(()=>[t[16]||(t[16]=e("span",null,"View All",-1)),n(o(K),{class:"w-4 h-4"})]),_:1})]),o(x).loading?(i(),a("div",je,[n(U,{message:"Loading trips..."})])):b.value.length>0?(i(),a("div",De,[(i(!0),a(q,null,R(b.value,d=>(i(),v(F,{key:d.name,trip:d,onStart:V,onView:$},null,8,["trip"]))),128))])):(i(),v(Y,{key:2,icon:o(J),title:"No trips scheduled",message:"You don't have any trips scheduled for today. Check back later or contact dispatch."},null,8,["icon"]))]),M.value?(i(),a("div",Te,[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Pending Actions",-1)),e("div",Me,[s.value?.pending_checks?.length>0?(i(),a("div",Ae,[e("div",Ve,[e("div",$e,[n(o(W),{class:"w-5 h-5 text-amber-600"})]),e("div",null,[t[18]||(t[18]=e("p",{class:"font-medium text-gray-900"},"Vehicle Inspection",-1)),e("p",Ee,l(s.value.pending_checks.length)+" pending check(s) ",1)])]),n(p,{to:"/inspection",class:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 text-sm font-medium"},{default:y(()=>[...t[19]||(t[19]=[P(" Inspect Now ",-1)])]),_:1})])):m("",!0),s.value?.recent_incidents?.length>0?(i(),a("div",Ie,[e("div",Ne,[e("div",Se,[n(o(C),{class:"w-5 h-5 text-red-600"})]),e("div",null,[t[20]||(t[20]=e("p",{class:"font-medium text-gray-900"},"Recent Incidents",-1)),e("p",qe,l(s.value.recent_incidents.length)+" incident(s) this week ",1)])]),e("button",{onClick:t[3]||(t[3]=d=>j.value=!0),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium"}," View ")])):m("",!0)])])):m("",!0)])])}}};export{rt as default};
//# sourceMappingURL=Dashboard-7zsV5Ee3.js.map

import{m as _,i as r,p as k,c,e as w,k as a,b as e,l as n,t as b,T as O,r as f,G as N,n as M,f as D,v as B,F as P,s as U,E as $,h as F,D as q,j as R,q as G,a as W,u as Y}from"./vue-vendor-Drzz9AVS.js";import{_ as V,d as J}from"./index-Ddao6l4m.js";import{f as K,A as Q,a as X}from"./AppBottomNav-RiYsXbB_.js";import{c as v}from"./createLucideIcon-_YMTRyyK.js";import{u as Z}from"./useGeolocation-D92nn38v.js";import{u as ee}from"./incident-BTB4hAqI.js";import{M as te}from"./Modal--Nc8TLzj.js";import{T as ae}from"./Toast-iY29jcEz.js";import{C as S}from"./circle-alert-CoqcVHEx.js";import{T as C}from"./triangle-alert-C4Mkg0bL.js";import{M as se}from"./map-pin-CmG9l5GE.js";import{U as oe}from"./user-B7IlW45Z.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=v("ambulance",[["path",{d:"M10 10H6",key:"1bsnug"}],["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14",key:"lrkjwd"}],["path",{d:"M8 8v4",key:"1fwk8c"}],["path",{d:"M9 18h6",key:"x1upvd"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=v("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=v("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=v("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=v("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=v("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=v("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]),me={key:0,class:"fixed bottom-20 left-4 right-4 bg-amber-500 text-white px-4 py-3 rounded-lg shadow-lg z-50 flex items-center justify-between"},pe={class:"flex items-center space-x-2"},fe={key:0,class:"bg-white text-amber-600 px-2 py-1 rounded text-xs font-bold"},ve={__name:"OfflineIndicator",setup(A){const d=J();return(y,h)=>(r(),_(O,{name:"slide-up"},{default:k(()=>[a(d).isOnline?w("",!0):(r(),c("div",me,[e("div",pe,[n(a(de),{class:"w-5 h-5"}),h[0]||(h[0]=e("div",null,[e("p",{class:"font-medium text-sm"},"You're offline"),e("p",{class:"text-xs text-amber-100"},"Changes will sync when online")],-1))]),a(d).hasPendingChanges?(r(),c("div",fe,b(a(d).pendingSync)+" pending ",1)):w("",!0)]))]),_:1}))}},ye=V(ve,[["__scopeId","data-v-e270a2b7"]]),he=["disabled"],ge={class:"space-y-4"},be={class:"p-4 bg-red-50 border border-red-200 rounded-lg"},xe={class:"flex items-start space-x-3"},_e={key:0,class:"p-4 bg-gray-50 rounded-lg"},ke={class:"flex items-start space-x-3"},we={class:"flex-1"},Me={class:"text-xs text-gray-600 mt-1"},Se={class:"text-xs text-gray-500 mt-1"},Ce={key:1,class:"p-4 bg-gray-50 rounded-lg text-center"},Ae={key:2,class:"p-4 bg-amber-50 border border-amber-200 rounded-lg"},Te={class:"flex items-start space-x-2"},Oe={class:"text-xs text-amber-700 mt-1"},$e={class:"grid grid-cols-2 gap-2"},Ve=["onClick"],Le={class:"text-sm font-medium text-gray-900"},je={class:"flex space-x-3 pt-4"},He=["disabled"],ze=["disabled"],Ee={key:1,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"},Ie={__name:"SOSButton",setup(A){const{coords:d,error:y,getCurrentPosition:h}=Z(),u=f(!1),m=f(!1),i=f(!1),x=f(!1),s=f(null),p=f(""),g=f("general"),L=ee(),j=[{value:"medical",label:"Medical",icon:re},{value:"accident",label:"Accident",icon:le},{value:"breakdown",label:"Breakdown",icon:ue},{value:"general",label:"Other",icon:S}];async function H(){u.value=!0,p.value="",g.value="general",await T()}async function T(){x.value=!0;try{const o=await h();s.value=o}catch(o){console.error("Failed to get location:",o)}finally{x.value=!1}}async function z(){await T()}function E(o){g.value=o.value,p.value||(p.value=`${o.label} emergency`)}async function I(){i.value=!0;try{const o={lat:s.value?.latitude,lng:s.value?.longitude,accuracy:s.value?.accuracy},t=`${g.value.toUpperCase()}: ${p.value||"Emergency situation"}`;await L.sendSOSAlert(o,t),u.value=!1,m.value=!0,p.value="",g.value="general",s.value=null,"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200])}catch(o){console.error("Failed to send SOS:",o),alert("Failed to send SOS alert. Please try calling emergency services directly.")}finally{i.value=!1}}return N(()=>d.value,o=>{o&&!s.value&&(s.value=o)}),(o,t)=>(r(),_(q,{to:"body"},[u.value?w("",!0):(r(),c("button",{key:0,onClick:H,class:M(["fixed bottom-24 right-4 z-40 w-16 h-16 bg-red-600 hover:bg-red-700 rounded-full shadow-lg flex items-center justify-center animate-pulse active:scale-95 transition-transform",{"opacity-50":i.value}]),disabled:i.value},[n(a(S),{class:"w-8 h-8 text-white"})],10,he)),n(te,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l),title:"Emergency SOS",size:"md","close-on-backdrop":!1},{default:k(()=>[e("div",ge,[e("div",be,[e("div",xe,[n(a(C),{class:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),t[4]||(t[4]=e("div",null,[e("p",{class:"font-semibold text-red-900"},"Emergency Alert"),e("p",{class:"text-sm text-red-700 mt-1"}," This will send an immediate alert to the operations control room with your current location. ")],-1))])]),s.value?(r(),c("div",_e,[e("div",ke,[n(a(se),{class:"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5"}),e("div",we,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-gray-900"},"Current Location",-1)),e("p",Me,b(a(K)(s.value.latitude,s.value.longitude)),1),e("p",Se," Accuracy: Â±"+b(Math.round(s.value.accuracy))+"m ",1)])])])):x.value?(r(),c("div",Ce,[...t[6]||(t[6]=[e("div",{class:"inline-block w-6 h-6 border-2 border-gray-300 border-t-primary-600 rounded-full animate-spin mb-2"},null,-1),e("p",{class:"text-sm text-gray-600"},"Getting your location...",-1)])])):a(y)?(r(),c("div",Ae,[e("div",Te,[n(a(C),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-amber-900"},"Location Error",-1)),e("p",Oe,b(a(y)),1),e("button",{onClick:z,class:"mt-2 text-xs text-amber-700 underline"}," Try Again ")])])])):w("",!0),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Information (Optional) ",-1)),D(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Describe the emergency situation..."},null,512),[[B,p.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Emergency Type ",-1)),e("div",$e,[(r(),c(P,null,U(j,l=>e("button",{key:l.value,onClick:Fe=>E(l),class:M(["p-3 border rounded-lg text-left hover:bg-gray-50 transition-colors",g.value===l.value?"border-red-600 bg-red-50":"border-gray-300"])},[(r(),_($(l.icon),{class:M(["w-5 h-5 mb-1",g.value===l.value?"text-red-600":"text-gray-600"])},null,8,["class"])),e("p",Le,b(l.label),1)],10,Ve)),64))])]),e("div",je,[e("button",{onClick:t[1]||(t[1]=l=>u.value=!1),class:"flex-1 btn-secondary py-3",disabled:i.value}," Cancel ",8,He),e("button",{onClick:I,class:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center",disabled:i.value||!s.value&&!a(y)},[i.value?(r(),c("div",Ee)):(r(),_(a(S),{key:0,class:"w-5 h-5 mr-2"})),F(" "+b(i.value?"Sending...":"Send SOS Alert"),1)],8,ze)])])]),_:1},8,["modelValue"]),n(ae,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l),type:"success",title:"SOS Alert Sent",message:"Emergency services have been notified. Help is on the way."},null,8,["modelValue"])]))}},Ne={class:"min-h-screen flex flex-col bg-gray-50"},De={class:"flex-1 pb-20 safe-bottom"},Be={class:"max-w-7xl mx-auto px-4 py-6"},Pe={__name:"AppLayout",setup(A){const d=W();Y();const y=R(()=>[{name:"Home",href:"/driver",icon:ie},{name:"Trips",href:"/driver/trips",icon:ce},{name:"Inspect",href:"/driver/inspection",icon:ne},{name:"Incident",href:"/driver/incident",icon:C},{name:"Profile",href:"/driver/profile",icon:oe}]);function h(m){d.push(m.href)}function u(){d.push("/login")}return(m,i)=>{const x=G("router-view");return r(),c("div",Ne,[n(a(Q),{title:"Driver Portal","show-sync-status":!0,onLogout:u}),e("main",De,[e("div",Be,[n(x,null,{default:k(({Component:s})=>[n(O,{name:"fade",mode:"out-in"},{default:k(()=>[(r(),_($(s)))]),_:2},1024)]),_:1})])]),n(a(X),{items:y.value,"current-route":m.$route.path,onNavigate:h},null,8,["items","current-route"]),n(Ie),n(ye)])}}},Ue=V(Pe,[["__scopeId","data-v-e9eb6311"]]),at=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"}));export{Ue as A,ce as R,at as a};
//# sourceMappingURL=AppLayout-n43_rp7j.js.map

import{c as p,a as V,f as c,w as S,g as f,j as x,i as r,B as L,n as C,C as D,D as R,t as B,F as H,h as q,l as I,E as J,k as X,b,G as O,d as F,r as $,o as Y,u as g,A as K}from"./vue-vendor-CiCQoITm.js";import{_ as P,f as z}from"./index-t7dltJZN.js";import{A as W}from"./AppLayout-BkfRTcZ7.js";import"./utils-2PtTei_Y.js";import"./useAuth-CLu5WQcG.js";const ee={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},te={key:2},se={__name:"Button",props:{label:{type:String,default:""},variant:{type:String,default:"primary",validator:e=>["primary","secondary","danger","success","outline","ghost","link"].includes(e)},size:{type:String,default:"md",validator:e=>["xs","sm","md","lg","xl"].includes(e)},type:{type:String,default:"button",validator:e=>["button","submit","reset"].includes(e)},tag:{type:String,default:"button",validator:e=>["button","a"].includes(e)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},block:{type:Boolean,default:!1},icon:{type:[Object,String],default:null},iconRight:{type:Boolean,default:!1},rounded:{type:String,default:"lg",validator:e=>["none","sm","md","lg","full"].includes(e)}},emits:["click"],setup(e,{emit:l}){const t=e,a=l,o=p(()=>{const n=["inline-flex items-center justify-center font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed"],s={xs:"px-2.5 py-1.5 text-xs",sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-5 py-3 text-base",xl:"px-6 py-3.5 text-base"};n.push(s[t.size]);const h={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"};n.push(h[t.rounded]);const u={primary:"bg-neon-green text-charcoal hover:bg-neon-green-600 focus:ring-neon-green shadow-sm",secondary:"bg-charcoal text-white hover:bg-charcoal-light focus:ring-charcoal shadow-sm",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-sm",outline:"border-2 border-neon-green text-neon-green hover:bg-neon-green hover:text-charcoal focus:ring-neon-green",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-300",link:"text-neon-green hover:text-neon-green-600 underline-offset-4 hover:underline focus:ring-neon-green"};return n.push(u[t.variant]),t.block&&n.push("w-full"),n.join(" ")}),v=p(()=>{const n=["flex-shrink-0"],s={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-5 h-5",xl:"w-6 h-6"};return n.push(s[t.size]),(t.label||t.$slots.default)&&(t.iconRight?n.push("ml-2"):n.push("mr-2")),n.join(" ")});function m(n){!t.disabled&&!t.loading&&a("click",n)}return(n,s)=>(c(),V(L(e.tag),{type:e.tag==="button"?e.type:void 0,disabled:e.disabled||e.loading,class:C(o.value),onClick:m},{default:S(()=>[e.loading?(c(),f("svg",ee,[...s[0]||(s[0]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),e.icon&&!e.iconRight?(c(),V(L(e.icon),{key:1,class:C(v.value)},null,8,["class"])):x("",!0),n.$slots.default||e.label?(c(),f("span",te,[D(n.$slots,"default",{},()=>[R(B(e.label),1)],!0)])):x("",!0),e.icon&&e.iconRight?(c(),V(L(e.icon),{key:3,class:C(v.value)},null,8,["class"])):x("",!0)]),_:3},8,["type","disabled","class"]))}},E=P(se,[["__scopeId","data-v-5cd97749"]]),ae={key:1,class:"flex space-x-2"},le={key:3,class:"space-y-3 w-full"},ne={key:4,class:"w-full"},re={__name:"Loading",props:{visible:{type:Boolean,default:!0},type:{type:String,default:"spinner",validator:e=>["spinner","dots","pulse","bar","skeleton"].includes(e)},size:{type:String,default:"md",validator:e=>["sm","md","lg","xl"].includes(e)},color:{type:String,default:"primary",validator:e=>["primary","secondary","white","gray"].includes(e)},text:{type:String,default:""},fullscreen:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},bars:{type:Number,default:3}},setup(e){const l=e,t=p(()=>{const u=["flex flex-col items-center justify-center"];return l.fullscreen&&u.push("fixed inset-0 z-50"),l.overlay&&u.push("bg-black bg-opacity-50"),u.join(" ")}),a=p(()=>[{sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24"}[l.size],n.value].join(" ")),o=p(()=>({sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4",xl:"w-6 h-6"})[l.size]),v=p(()=>[{sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16",xl:"w-24 h-24"}[l.size],n.value,"relative"].join(" ")),m=p(()=>[{sm:"h-2",md:"h-3",lg:"h-4",xl:"h-6"}[l.size],"bg-gray-300"].join(" ")),n=p(()=>({primary:"text-neon-green",secondary:"text-charcoal",white:"text-white",gray:"text-gray-500"})[l.color]),s=p(()=>[{sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"}[l.size],"mt-4 font-medium",l.overlay?"text-white":"text-gray-700"].join(" "));function h(u){const d=["100%","85%","70%","95%","80%"];return d[u%d.length]}return(u,d)=>e.visible?(c(),f("div",{key:0,class:C(t.value)},[e.type==="spinner"?(c(),f("div",{key:0,class:C(a.value)},[...d[0]||(d[0]=[r("svg",{class:"animate-spin",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])],2)):e.type==="dots"?(c(),f("div",ae,[(c(),f(H,null,q(3,w=>r("div",{key:w,class:C(["rounded-full animate-bounce",o.value,n.value]),style:I({animationDelay:`${w*.15}s`})},null,6)),64))])):e.type==="pulse"?(c(),f("div",{key:2,class:C(v.value)},[...d[1]||(d[1]=[r("div",{class:"w-full h-full rounded-full animate-ping"},null,-1)])],2)):e.type==="bar"?(c(),f("div",le,[(c(!0),f(H,null,q(e.bars,w=>(c(),f("div",{key:w,class:C(["animate-pulse rounded",m.value]),style:I({width:h(w)})},null,6))),128))])):e.type==="skeleton"?(c(),f("div",ne,[D(u.$slots,"skeleton",{},()=>[d[2]||(d[2]=J('<div class="animate-pulse space-y-4" data-v-ceff5077><div class="flex items-center space-x-4" data-v-ceff5077><div class="rounded-full bg-gray-300 h-12 w-12" data-v-ceff5077></div><div class="flex-1 space-y-2" data-v-ceff5077><div class="h-4 bg-gray-300 rounded w-3/4" data-v-ceff5077></div><div class="h-4 bg-gray-300 rounded w-1/2" data-v-ceff5077></div></div></div><div class="space-y-2" data-v-ceff5077><div class="h-4 bg-gray-300 rounded" data-v-ceff5077></div><div class="h-4 bg-gray-300 rounded w-5/6" data-v-ceff5077></div><div class="h-4 bg-gray-300 rounded w-4/6" data-v-ceff5077></div></div></div>',1))])])):x("",!0),e.text?(c(),f("p",{key:5,class:C(s.value)},B(e.text),3)):x("",!0)],2)):x("",!0)}},G=P(re,[["__scopeId","data-v-ceff5077"]]),oe={key:2},ie={__name:"Badge",props:{label:{type:[String,Number],default:""},variant:{type:String,default:"default",validator:e=>["default","primary","secondary","success","danger","warning","info"].includes(e)},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},rounded:{type:String,default:"full",validator:e=>["sm","md","lg","full"].includes(e)},dot:{type:Boolean,default:!1},icon:{type:[Object,String],default:null},iconRight:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},outline:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:l}){const t=e,a=l,o=p(()=>{const n=["inline-flex items-center justify-center font-medium","transition-all duration-200"],s={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-0.5 text-xs gap-1",lg:"px-3 py-1 text-sm gap-1.5"};n.push(s[t.size]);const h={sm:"rounded",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"};if(n.push(h[t.rounded]),t.outline){const u={default:"border border-gray-300 text-gray-700 hover:bg-gray-50",primary:"border border-neon-green text-neon-green hover:bg-neon-green hover:text-charcoal",secondary:"border border-charcoal text-charcoal hover:bg-charcoal hover:text-white",success:"border border-green-500 text-green-700 hover:bg-green-50",danger:"border border-red-500 text-red-700 hover:bg-red-50",warning:"border border-yellow-500 text-yellow-700 hover:bg-yellow-50",info:"border border-blue-500 text-blue-700 hover:bg-blue-50"};n.push(u[t.variant])}else{const u={default:"bg-gray-100 text-gray-800",primary:"bg-neon-green text-charcoal",secondary:"bg-charcoal text-white",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"};n.push(u[t.variant])}return n.join(" ")}),v=p(()=>{const n=["w-2 h-2 rounded-full"],s={default:"bg-gray-400",primary:"bg-neon-green-700",secondary:"bg-white",success:"bg-green-500",danger:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"};return n.push(s[t.variant]),["success","danger","warning"].includes(t.variant)&&n.push("animate-pulse"),n.join(" ")});function m(){a("close")}return(n,s)=>(c(),f("span",{class:C(o.value)},[e.icon&&!e.iconRight?(c(),V(L(e.icon),{key:0,class:"w-3 h-3"})):x("",!0),e.dot?(c(),f("span",{key:1,class:C(v.value)},null,2)):x("",!0),n.$slots.default||e.label?(c(),f("span",oe,[D(n.$slots,"default",{},()=>[R(B(e.label),1)])])):x("",!0),e.icon&&e.iconRight?(c(),V(L(e.icon),{key:3,class:"w-3 h-3"})):x("",!0),e.closable?(c(),f("button",{key:4,type:"button",onClick:X(m,["stop"]),class:"ml-1 -mr-0.5 flex-shrink-0 hover:opacity-70 transition-opacity"},[...s[0]||(s[0]=[r("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])):x("",!0)],2))}},ce=P(ie,[["__scopeId","data-v-45e36c99"]]),de={class:"flex items-center space-x-3"},ue={class:"text-lg font-semibold text-gray-900"},ge={key:0,class:"text-sm text-gray-500"},fe={key:0,class:"flex items-center space-x-2"},he={key:2,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg"},ve={__name:"Card",props:{title:{type:String,default:""},subtitle:{type:String,default:""},icon:{type:[Object,String],default:null},variant:{type:String,default:"default",validator:e=>["default","bordered","elevated","flat"].includes(e)},hoverable:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padding:{type:Boolean,default:!0},rounded:{type:String,default:"lg",validator:e=>["none","sm","md","lg","xl"].includes(e)},headerClass:{type:String,default:""},bodyClass:{type:String,default:""},footerClass:{type:String,default:""}},emits:["click"],setup(e,{emit:l}){const t=e,a=p(()=>{const o=["relative bg-white transition-all duration-200"],v={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl"};o.push(v[t.rounded]);const m={default:"border border-gray-200",bordered:"border-2 border-gray-300",elevated:"shadow-lg",flat:""};return o.push(m[t.variant]),t.hoverable&&o.push("hover:shadow-xl hover:scale-[1.02]"),t.clickable&&o.push("cursor-pointer hover:shadow-md"),t.loading&&o.push("overflow-hidden"),o.join(" ")});return(o,v)=>(c(),f("div",{class:C(a.value)},[e.title||o.$slots.header||o.$slots.actions?(c(),f("div",{key:0,class:C(["flex items-center justify-between",e.headerClass||"px-6 py-4 border-b border-gray-200"])},[D(o.$slots,"header",{},()=>[r("div",de,[e.icon?(c(),V(L(e.icon),{key:0,class:"w-6 h-6 text-gray-600"})):x("",!0),r("div",null,[r("h3",ue,B(e.title),1),e.subtitle?(c(),f("p",ge,B(e.subtitle),1)):x("",!0)])])]),o.$slots.actions?(c(),f("div",fe,[D(o.$slots,"actions",{},void 0)])):x("",!0)],2)):x("",!0),r("div",{class:C(e.bodyClass||"px-6 py-4")},[D(o.$slots,"default",{},void 0)],2),o.$slots.footer?(c(),f("div",{key:1,class:C(e.footerClass||"px-6 py-4 border-t border-gray-200 bg-gray-50")},[D(o.$slots,"footer",{},void 0)],2)):x("",!0),e.loading?(c(),f("div",he,[b(G,{type:"spinner",size:"lg"})])):x("",!0)],2))}},A=P(ve,[["__scopeId","data-v-51e49d88"]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ye=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,t,a)=>a?a.toUpperCase():t.toLowerCase()),pe=e=>{const l=ye(e);return l.charAt(0).toUpperCase()+l.slice(1)},me=(...e)=>e.filter((l,t,a)=>!!l&&l.trim()!==""&&a.indexOf(l)===t).join(" ").trim(),T=e=>e==="";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=({name:e,iconNode:l,absoluteStrokeWidth:t,"absolute-stroke-width":a,strokeWidth:o,"stroke-width":v,size:m=N.width,color:n=N.stroke,...s},{slots:h})=>O("svg",{...N,...s,width:m,height:m,stroke:n,"stroke-width":T(t)||T(a)||t===!0||a===!0?Number(o||v||N["stroke-width"])*24/Number(m):o||v||N["stroke-width"],class:me("lucide",s.class,...e?[`lucide-${U(pe(e))}-icon`,`lucide-${U(e)}`]:["lucide-icon"])},[...l.map(u=>O(...u)),...h.default?[h.default()]:[]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=(e,l)=>(t,{slots:a,attrs:o})=>O(be,{...o,...t,iconNode:l,name:e},a);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=_("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=_("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=_("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=_("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=_("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=_("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),$e=F("fleet",()=>{const e=$([]),l=$([]),t=$(!1),a=$(null),o=$(null),v=p(()=>e.value.length),m=p(()=>l.value.filter(i=>i.status==="active").length),n=p(()=>e.value.filter(i=>i.availability==="available").length);async function s(){t.value=!0,a.value=null;try{const i=await z.call({method:"tems.api.pwa.operations.get_fleet_vehicles",args:{}});return e.value=i.message||[],o.value=new Date,e.value}catch(i){throw a.value=i.message,i}finally{t.value=!1}}async function h(){t.value=!0,a.value=null;try{const i=await z.call({method:"tems.api.pwa.operations.get_active_vehicles",args:{}});return l.value=i.message||[],l.value}catch(i){throw a.value=i.message,i}finally{t.value=!1}}async function u(i){try{return(await z.call({method:"tems.api.pwa.operations.get_vehicle_location",args:{vehicle_id:i}})).message}catch(y){throw a.value=y.message,y}}async function d(i,y){try{const k=await z.call({method:"tems.api.pwa.operations.update_vehicle_status",args:{vehicle_id:i,status:y}}),M=e.value.findIndex(j=>j.name===i);return M!==-1&&(e.value[M].status=y),k.message}catch(k){throw a.value=k.message,k}}function w(){a.value=null}return{vehicles:e,activeVehicles:l,loading:t,error:a,lastUpdate:o,totalVehicles:v,activeCount:m,availableCount:n,fetchVehicles:s,fetchActiveVehicles:h,getVehicleLocation:u,updateVehicleStatus:d,clearError:w}}),ze=F("dispatch",()=>{const e=$([]),l=$([]),t=$(!1),a=$(null),o=p(()=>e.value.length),v=p(()=>l.value.length),m=p(()=>e.value.filter(i=>i.status==="in_progress"));async function n(i={}){t.value=!0,a.value=null;try{const y=await z.call({method:"tems.api.pwa.operations.get_dispatches",args:{filters:i}});return e.value=y.message||[],e.value}catch(y){throw a.value=y.message,y}finally{t.value=!1}}async function s(){t.value=!0,a.value=null;try{const i=await z.call({method:"tems.api.pwa.operations.get_pending_dispatches",args:{}});return l.value=i.message||[],l.value}catch(i){throw a.value=i.message,i}finally{t.value=!1}}async function h(i){t.value=!0,a.value=null;try{const k=(await z.call({method:"tems.api.pwa.operations.create_dispatch",args:{dispatch_data:i}})).message;return e.value.unshift(k),k}catch(y){throw a.value=y.message,y}finally{t.value=!1}}async function u(i,y,k){try{const M=await z.call({method:"tems.api.pwa.operations.assign_driver",args:{dispatch_id:i,driver_id:y,vehicle_id:k}}),j=e.value.findIndex(Q=>Q.name===i);return j!==-1&&(e.value[j].driver=y,e.value[j].vehicle=k,e.value[j].status="assigned"),M.message}catch(M){throw a.value=M.message,M}}async function d(i,y){try{const k=await z.call({method:"tems.api.pwa.operations.update_dispatch_status",args:{dispatch_id:i,status:y}}),M=e.value.findIndex(j=>j.name===i);return M!==-1&&(e.value[M].status=y),k.message}catch(k){throw a.value=k.message,k}}function w(){a.value=null}return{dispatches:e,pendingDispatches:l,loading:t,error:a,totalDispatches:o,pendingCount:v,activeDispatches:m,fetchDispatches:n,fetchPendingDispatches:s,createDispatch:h,assignDriver:u,updateDispatchStatus:d,clearError:w}}),Be=F("route",()=>{const e=$([]),l=$([]),t=$(!1),a=$(null),o=p(()=>e.value.length),v=p(()=>l.value.length);async function m(){t.value=!0,a.value=null;try{const d=await z.call({method:"tems.api.pwa.operations.get_routes",args:{}});return e.value=d.message||[],e.value}catch(d){throw a.value=d.message,d}finally{t.value=!1}}async function n(){t.value=!0,a.value=null;try{const d=await z.call({method:"tems.api.pwa.operations.get_active_routes",args:{}});return l.value=d.message||[],l.value}catch(d){throw a.value=d.message,d}finally{t.value=!1}}async function s(d){try{return(await z.call({method:"tems.api.pwa.operations.get_route_details",args:{route_id:d}})).message}catch(w){throw a.value=w.message,w}}async function h(d){try{return(await z.call({method:"tems.api.pwa.operations.optimize_route",args:{route_id:d}})).message}catch(w){throw a.value=w.message,w}}function u(){a.value=null}return{routes:e,activeRoutes:l,loading:t,error:a,totalRoutes:o,activeCount:v,fetchRoutes:m,fetchActiveRoutes:n,getRouteDetails:s,optimizeRoute:h,clearError:u}}),Me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},je={class:"flex items-center justify-between"},De={class:"text-3xl font-bold text-primary-600"},Ve={class:"flex items-center justify-between"},Ae={class:"text-3xl font-bold text-warning"},Re={class:"flex items-center justify-between"},Le={class:"text-3xl font-bold text-success"},_e={class:"flex items-center justify-between"},Ne={class:"text-3xl font-bold text-info"},Pe={class:"mb-8"},Ee={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},He={class:"mb-8"},qe={key:0,class:"text-center py-8"},Oe={key:1,class:"text-center py-8 text-gray-500"},Fe={key:2,class:"space-y-4"},Ie={class:"font-medium text-gray-900"},Ue={class:"text-sm text-gray-600"},Xe={__name:"Dashboard",setup(e){const l=K(),t=$e(),a=ze(),o=Be(),v=p(()=>a.dispatches.slice(0,5));function m(n){return{pending:"warning",assigned:"info",in_progress:"primary",completed:"success",cancelled:"error"}[n]||"secondary"}return Y(async()=>{await Promise.all([t.fetchActiveVehicles(),a.fetchPendingDispatches(),a.fetchDispatches({limit:5}),o.fetchActiveRoutes()])}),(n,s)=>(c(),V(g(W),null,{header:S(()=>[...s[3]||(s[3]=[r("h1",{class:"text-2xl font-bold text-gray-900"},"Operations Dashboard",-1)])]),default:S(()=>[r("div",Me,[b(g(A),null,{default:S(()=>[r("div",je,[r("div",null,[s[4]||(s[4]=r("p",{class:"text-sm text-gray-600"},"Active Vehicles",-1)),r("p",De,B(g(t).activeCount),1)]),b(g(Se),{class:"w-12 h-12 text-primary-400"})])]),_:1}),b(g(A),null,{default:S(()=>[r("div",Ve,[r("div",null,[s[5]||(s[5]=r("p",{class:"text-sm text-gray-600"},"Pending Dispatches",-1)),r("p",Ae,B(g(a).pendingCount),1)]),b(g(we),{class:"w-12 h-12 text-warning"})])]),_:1}),b(g(A),null,{default:S(()=>[r("div",Re,[r("div",null,[s[6]||(s[6]=r("p",{class:"text-sm text-gray-600"},"Active Routes",-1)),r("p",Le,B(g(o).activeCount),1)]),b(g(Z),{class:"w-12 h-12 text-success"})])]),_:1}),b(g(A),null,{default:S(()=>[r("div",_e,[r("div",null,[s[7]||(s[7]=r("p",{class:"text-sm text-gray-600"},"Available Vehicles",-1)),r("p",Ne,B(g(t).availableCount),1)]),b(g(xe),{class:"w-12 h-12 text-info"})])]),_:1})]),r("div",Pe,[s[11]||(s[11]=r("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),r("div",Ee,[b(g(E),{variant:"primary",onClick:s[0]||(s[0]=h=>g(l).push("/dispatch")),class:"py-6"},{default:S(()=>[b(g(ke),{class:"w-5 h-5 mr-2"}),s[8]||(s[8]=R(" New Dispatch ",-1))]),_:1}),b(g(E),{variant:"secondary",onClick:s[1]||(s[1]=h=>g(l).push("/fleet")),class:"py-6"},{default:S(()=>[b(g(Z),{class:"w-5 h-5 mr-2"}),s[9]||(s[9]=R(" Track Fleet ",-1))]),_:1}),b(g(E),{variant:"secondary",onClick:s[2]||(s[2]=h=>g(l).push("/routes")),class:"py-6"},{default:S(()=>[b(g(Ce),{class:"w-5 h-5 mr-2"}),s[10]||(s[10]=R(" Manage Routes ",-1))]),_:1})])]),r("div",He,[b(g(A),null,{default:S(()=>[...s[12]||(s[12]=[r("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Active Vehicles",-1),r("div",{class:"bg-gray-100 h-96 rounded-lg flex items-center justify-center"},[r("p",{class:"text-gray-500"},"Map View (Leaflet integration)")],-1)])]),_:1})]),r("div",null,[s[13]||(s[13]=r("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Recent Dispatches",-1)),b(g(A),null,{default:S(()=>[g(a).loading?(c(),f("div",qe,[b(g(G))])):v.value.length===0?(c(),f("div",Oe," No recent dispatches ")):(c(),f("div",Fe,[(c(!0),f(H,null,q(v.value,h=>(c(),f("div",{key:h.name,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50"},[r("div",null,[r("h4",Ie,B(h.route_name),1),r("p",Ue,"Driver: "+B(h.driver_name||"Unassigned"),1)]),b(g(ce),{variant:m(h.status)},{default:S(()=>[R(B(h.status),1)]),_:2},1032,["variant"])]))),128))]))]),_:1})])]),_:1}))}};export{Xe as default};
//# sourceMappingURL=Dashboard-Bj77Gn6Q.js.map

import{r as y,c as w,o as b,L as x,a as l,b as e,e as i,f as d,F as k,i as M,p as g,s as C,z as S,D as T,k as c,n as m,t as h}from"./index-B9iqHgVa.js";import{u as j}from"./communication-CvhZjMii.js";import{_ as z}from"./LoadingSpinner-Oft2iDVO.js";import{_ as F}from"./EmptyState-667vxpza.js";import{c as p}from"./createLucideIcon-CT7AaelC.js";import{p as H}from"./parseISO-9qduH5JA.js";import{f as L}from"./format-BFuVVRWF.js";import"./en-US-DL7QEam1.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=p("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=p("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=p("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),N={class:"h-[calc(100vh-12rem)] flex flex-col"},O={class:"flex-1 card overflow-hidden flex flex-col"},V={key:0,class:"flex-1 flex items-center justify-center"},I={key:1,class:"flex-1 flex items-center justify-center"},$={class:"text-sm whitespace-pre-wrap"},A={class:"p-4 border-t bg-white"},E={class:"flex-1"},P=["onKeydown"],U=["disabled"],Y=["disabled"],se={__name:"Communication",setup(q){const r=j(),n=y(""),t=y(null),u=w(()=>r.messages);async function f(){if(n.value.trim())try{await r.sendMessage("Operations Control","operations",n.value),n.value="",await x(),t.value&&(t.value.scrollTop=t.value.scrollHeight)}catch(a){console.error("Failed to send message:",a)}}function v(){console.log("Attach file")}function _(a){if(!a)return"";try{const o=typeof a=="string"?H(a):a;return L(o,"HH:mm")}catch{return""}}return b(async()=>{await r.fetchMessages(),await x(),t.value&&(t.value.scrollTop=t.value.scrollHeight)}),(a,o)=>(c(),l("div",N,[o[1]||(o[1]=e("div",{class:"card p-4 mb-4"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Messages"),e("p",{class:"text-sm text-gray-600"},"Communication with Operations Control")],-1)),e("div",O,[i(r).loading?(c(),l("div",V,[d(z,{message:"Loading messages..."})])):u.value.length===0?(c(),l("div",I,[d(F,{icon:i(B),title:"No messages",message:"You don't have any messages yet. Start a conversation with operations control."},null,8,["icon"])])):(c(),l("div",{key:2,ref_key:"messageContainer",ref:t,class:"flex-1 overflow-y-auto p-4 space-y-4"},[(c(!0),l(k,null,M(u.value,s=>(c(),l("div",{key:s.name||s.timestamp,class:m(["flex",s.sender==="me"?"justify-end":"justify-start"])},[e("div",{class:m(["max-w-[75%] rounded-2xl px-4 py-2",s.sender==="me"?"bg-primary-600 text-white":"bg-gray-100 text-gray-900"])},[e("p",$,h(s.message),1),e("p",{class:m(["text-xs mt-1",s.sender==="me"?"text-primary-100":"text-gray-500"])},h(_(s.timestamp)),3)],2)],2))),128))],512)),e("div",A,[e("form",{onSubmit:g(f,["prevent"]),class:"flex items-end space-x-2"},[e("div",E,[C(e("textarea",{"onUpdate:modelValue":o[0]||(o[0]=s=>n.value=s),placeholder:"Type your message...",rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",onKeydown:T(g(f,["exact","prevent"]),["enter"])},null,40,P),[[S,n.value]])]),e("button",{type:"button",onClick:v,class:"btn-secondary p-3",disabled:i(r).loading},[d(i(D),{class:"w-5 h-5"})],8,U),e("button",{type:"submit",class:"btn-primary p-3",disabled:!n.value.trim()||i(r).loading},[d(i(K),{class:"w-5 h-5"})],8,Y)],32)])])]))}};export{se as default};
//# sourceMappingURL=Communication-Doo5qq0p.js.map

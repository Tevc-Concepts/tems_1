const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-PcK2SAYs.js","assets/index-BootKDzc.css"])))=>i.map(i=>d[i]);
import{y as T,M as q,N as G,O as w,P as h,c as A,Q as D,o as V,R as H,e as p,r as x,u as J,x as z,a as j,b as e,f as O,d as Q,t as _,l as N,n as b,_ as Y,k as P}from"./index-PcK2SAYs.js";import{_ as K}from"./StatusBadge-Cp8b1Ujq.js";import{T as X}from"./Toast-mYUahUM_.js";import{C as Z}from"./circle-x-DQl-CdHB.js";import{R as ee}from"./refresh-cw-hDmae7zB.js";import{c as L}from"./createLucideIcon-BA_zicjl.js";import{L as te}from"./log-out-C3CLS_jr.js";import{f as ne}from"./formatDistanceToNow-CGlPWvUP.js";import"./circle-alert-DgqhRVXg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./info-DqSwZgxb.js";import"./triangle-alert-FxvP7yeT.js";import"./x-BbFY30U9.js";import"./en-US-DL7QEam1.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=L("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=L("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function oe(n){return q()?(G(n),!0):!1}const le=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ie=Object.prototype.toString,re=n=>ie.call(n)==="[object Object]";function M(n){return Array.isArray(n)?n:[n]}function ue(n,l,s){return T(n,l,{...s,immediate:!0})}const I=le?window:void 0;function ce(n){var l;const s=D(n);return(l=s?.$el)!=null?l:s}function E(...n){const l=[],s=()=>{l.forEach(a=>a()),l.length=0},k=(a,o,i,f)=>(a.addEventListener(o,i,f),()=>a.removeEventListener(o,i,f)),d=A(()=>{const a=M(D(n[0])).filter(o=>o!=null);return a.every(o=>typeof o!="string")?a:void 0}),u=ue(()=>{var a,o;return[(o=(a=d.value)==null?void 0:a.map(i=>ce(i)))!=null?o:[I].filter(i=>i!=null),M(D(d.value?n[1]:n[0])),M(p(d.value?n[2]:n[1])),D(d.value?n[3]:n[2])]},([a,o,i,f])=>{if(s(),!a?.length||!o?.length||!i?.length)return;const m=re(f)?{...f}:f;l.push(...a.flatMap(y=>o.flatMap(r=>i.map(g=>k(y,r,g,m)))))},{flush:"post"}),c=()=>{u(),s()};return oe(s),c}function de(){const n=w(!1),l=H();return l&&V(()=>{n.value=!0},l),n}function fe(n){const l=de();return A(()=>(l.value,!!n()))}function ve(n={}){const{window:l=I}=n,s=l?.navigator,k=fe(()=>s&&"connection"in s),d=w(!0),u=w(!1),c=w(void 0),a=w(void 0),o=w(void 0),i=w(void 0),f=w(void 0),m=w(void 0),y=w("unknown"),r=k.value&&s.connection;function g(){s&&(d.value=s.onLine,c.value=d.value?void 0:Date.now(),a.value=d.value?Date.now():void 0,r&&(o.value=r.downlink,i.value=r.downlinkMax,m.value=r.effectiveType,f.value=r.rtt,u.value=r.saveData,y.value=r.type))}const C={passive:!0};return l&&(E(l,"offline",()=>{d.value=!1,c.value=Date.now()},C),E(l,"online",()=>{d.value=!0,a.value=Date.now()},C)),r&&E(r,"change",g,C),g(),{isSupported:k,isOnline:h(d),saveData:h(u),offlineAt:h(c),onlineAt:h(a),downlink:h(o),downlinkMax:h(i),effectiveType:h(m),rtt:h(f),type:h(y)}}function pe(n={}){const{isOnline:l}=ve(n);return l}function me(){const n=x(Notification.permission),l="Notification"in window,s=pe();async function k(){if(!l)return console.warn("Notifications not supported"),"denied";const u=await Notification.requestPermission();return n.value=u,u}function d(u,c={}){if(n.value!=="granted")return console.warn("Notification permission not granted"),null;const a={icon:"/assets/tems/frontend/driver-pwa/dist/pwa-192x192.png",badge:"/assets/tems/frontend/driver-pwa/dist/pwa-192x192.png",vibrate:[200,100,200],...c};return"serviceWorker"in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(o=>o.showNotification(u,a)):new Notification(u,a)}return T(s,u=>{u&&d("Back Online",{body:"You are back online. Syncing data...",tag:"online-status"})}),{permission:n,isSupported:l,requestPermission:k,showNotification:d}}const ye={class:"space-y-6"},ge={class:"card p-4"},be={class:"flex items-center justify-between mb-4"},xe={class:"space-y-3"},we={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},he={class:"text-lg font-bold text-primary-600"},ke={key:0,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Se={class:"text-xs text-gray-600"},Oe=["disabled"],Ce=["disabled"],_e={class:"card p-4"},Ne={class:"space-y-3"},De={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Me={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Ee={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Te={class:"card p-4"},Ae={class:"space-y-3"},je={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Pe={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Ve={class:"card p-4"},Le={class:"space-y-2 text-sm"},Ie={class:"flex justify-between"},Be={class:"font-medium text-gray-900"},We={class:"card p-4"},$e={class:"card p-4"},tt={__name:"Settings",setup(n){const l=J(),s=z(),{permission:k,requestPermission:d}=me(),u=x(!1),c=x(!1),a=x("success"),o=x(""),i=x(""),f=x(k.value==="granted"),m=x(!0),y=x(!0),r=x(!0),g=x(!0),C=x("20251013"),B=A(()=>{if(!s.lastSyncTime)return"Never";try{return ne(s.lastSyncTime,{addSuffix:!0})}catch{return"Unknown"}});async function W(){try{const v=await s.syncOfflineData();a.value="success",o.value="Sync Complete",i.value=`Synced ${v.synced} items successfully`,c.value=!0}catch(v){a.value="error",o.value="Sync Failed",i.value=v.message||"Failed to sync data",c.value=!0}}async function $(){u.value=!0;try{await s.downloadOfflineData(),a.value="success",o.value="Download Complete",i.value="Offline data downloaded successfully",c.value=!0}catch(v){a.value="error",o.value="Download Failed",i.value=v.message||"Failed to download data",c.value=!0}finally{u.value=!1}}async function R(){if(f.value)f.value=!1;else{const v=await d();f.value=v==="granted",f.value||(a.value="warning",o.value="Permission Denied",i.value="Enable notifications in browser settings",c.value=!0)}}async function U(){if(confirm("Are you sure you want to clear all cached data? This cannot be undone."))try{await(await Y(async()=>{const{default:t}=await import("./index-PcK2SAYs.js").then(S=>S.U);return{default:t}},__vite__mapDeps([0,1]))).default.clearCache(),a.value="success",o.value="Cache Cleared",i.value="All cached data has been cleared",c.value=!0}catch{a.value="error",o.value="Error",i.value="Failed to clear cache",c.value=!0}}async function F(){confirm("Are you sure you want to logout?")&&await l.logout()}return V(()=>{const v=localStorage.getItem("driver_app_prefs");if(v){const t=JSON.parse(v);m.value=t.soundEnabled??!0,y.value=t.vibrationEnabled??!0,r.value=t.locationEnabled??!0,g.value=t.highAccuracyMode??!0}}),T([m,y,r,g],()=>{localStorage.setItem("driver_app_prefs",JSON.stringify({soundEnabled:m.value,vibrationEnabled:y.value,locationEnabled:r.value,highAccuracyMode:g.value}))}),(v,t)=>(P(),j("div",ye,[t[22]||(t[22]=e("div",{class:"card p-4"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Settings"),e("p",{class:"text-sm text-gray-600"},"Manage your app preferences")],-1)),e("div",ge,[e("div",be,[t[5]||(t[5]=e("h3",{class:"font-semibold text-gray-900"},"Offline Data",-1)),O(K,{status:p(s).isOnline?"Online":"Offline"},null,8,["status"])]),e("div",xe,[e("div",we,[t[6]||(t[6]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Pending Sync"),e("p",{class:"text-xs text-gray-600"},"Data waiting to be uploaded")],-1)),e("span",he,_(p(s).pendingSync),1)]),p(s).lastSyncTime?(P(),j("div",ke,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-900"},"Last Sync",-1)),e("p",Se,_(B.value),1)]),O(p(Z),{class:"w-5 h-5 text-green-600"})])):Q("",!0),e("button",{onClick:W,class:"w-full btn-primary py-3",disabled:!p(s).isOnline||p(s).syncInProgress},[O(p(ee),{class:b(["w-5 h-5 mr-2",{"animate-spin":p(s).syncInProgress}])},null,8,["class"]),N(" "+_(p(s).syncInProgress?"Syncing...":"Sync Now"),1)],8,Oe),e("button",{onClick:$,class:"w-full btn-secondary py-3",disabled:!p(s).isOnline||u.value},[O(p(se),{class:b(["w-5 h-5 mr-2",{"animate-spin":u.value}])},null,8,["class"]),N(" "+_(u.value?"Downloading...":"Download for Offline Use"),1)],8,Ce)])]),e("div",_e,[t[11]||(t[11]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Notifications",-1)),e("div",Ne,[e("div",De,[t[8]||(t[8]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Push Notifications"),e("p",{class:"text-xs text-gray-600"},"Receive alerts and updates")],-1)),e("button",{onClick:R,class:b(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",f.value?"bg-primary-600":"bg-gray-200"])},[e("span",{class:b(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",f.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Me,[t[9]||(t[9]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Sound Alerts"),e("p",{class:"text-xs text-gray-600"},"Play sound for notifications")],-1)),e("button",{onClick:t[0]||(t[0]=S=>m.value=!m.value),class:b(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",m.value?"bg-primary-600":"bg-gray-200"])},[e("span",{class:b(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",m.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Ee,[t[10]||(t[10]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Vibration"),e("p",{class:"text-xs text-gray-600"},"Vibrate for important alerts")],-1)),e("button",{onClick:t[1]||(t[1]=S=>y.value=!y.value),class:b(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",y.value?"bg-primary-600":"bg-gray-200"])},[e("span",{class:b(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",y.value?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),e("div",Te,[t[14]||(t[14]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Location",-1)),e("div",Ae,[e("div",je,[t[12]||(t[12]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"Location Tracking"),e("p",{class:"text-xs text-gray-600"},"Track location during trips")],-1)),e("button",{onClick:t[2]||(t[2]=S=>r.value=!r.value),class:b(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",r.value?"bg-primary-600":"bg-gray-200"])},[e("span",{class:b(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",r.value?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Pe,[t[13]||(t[13]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-900"},"High Accuracy Mode"),e("p",{class:"text-xs text-gray-600"},"Use GPS for precise location")],-1)),e("button",{onClick:t[3]||(t[3]=S=>g.value=!g.value),class:b(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",g.value?"bg-primary-600":"bg-gray-200"])},[e("span",{class:b(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",g.value?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),e("div",Ve,[t[18]||(t[18]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"App Information",-1)),e("div",Le,[t[16]||(t[16]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-600"},"Version"),e("span",{class:"font-medium text-gray-900"},"1.0.0")],-1)),e("div",Ie,[t[15]||(t[15]=e("span",{class:"text-gray-600"},"Build",-1)),e("span",Be,_(C.value),1)]),t[17]||(t[17]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-600"},"Last Updated"),e("span",{class:"font-medium text-gray-900"},"Oct 2025")],-1))])]),e("div",We,[t[20]||(t[20]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Storage",-1)),e("button",{onClick:U,class:"w-full btn-secondary py-3 text-red-600 hover:bg-red-50"},[O(p(ae),{class:"w-5 h-5 mr-2"}),t[19]||(t[19]=N(" Clear Cache ",-1))])]),e("div",$e,[e("button",{onClick:F,class:"w-full btn-secondary py-3 text-red-600 hover:bg-red-50"},[O(p(te),{class:"w-5 h-5 mr-2"}),t[21]||(t[21]=N(" Logout ",-1))])]),O(X,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=S=>c.value=S),type:a.value,title:o.value,message:i.value},null,8,["modelValue","type","title","message"])]))}};export{tt as default};
//# sourceMappingURL=Settings-CZ2KFNF2.js.map

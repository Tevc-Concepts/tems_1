{"version":3,"file":"Login-Cdmt5iX_.js","sources":["../../../../../../frontend/shared/src/composables/useAuth.js","../../../../../../frontend/operations-pwa/src/views/Login.vue"],"sourcesContent":["import { useAuthStore } from '../stores/auth.js'\nimport { storeToRefs } from 'pinia'\n\n/**\n * Authentication composable\n * Provides reactive access to authentication state and methods\n * \n * @example\n * ```javascript\n * import { useAuth } from '@shared/composables/useAuth'\n * \n * const { user, isAuthenticated, logout } = useAuth()\n * ```\n */\nexport function useAuth() {\n    const authStore = useAuthStore()\n\n    // Convert store state to refs for reactivity\n    const {\n        user,\n        employee,\n        isAuthenticated,\n        userName,\n        userInitials,\n        roles,\n        loading,\n        error\n    } = storeToRefs(authStore)\n\n    return {\n        // State\n        user,\n        employee,\n        isAuthenticated,\n        userName,\n        userInitials,\n        roles,\n        loading,\n        error,\n\n        // Actions\n        fetchUserInfo: authStore.fetchUserInfo,\n        login: authStore.login,\n        hasRole: authStore.hasRole,\n        hasAnyRole: authStore.hasAnyRole,\n        hasPermission: authStore.hasPermission,\n        logout: authStore.logout,\n        clearAuth: authStore.clearAuth\n    }\n}\n","<template>\n  <div class=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4\">\n    <div class=\"max-w-md w-full\">\n      <div class=\"text-center mb-8\">\n        <div class=\"flex justify-center mb-4\">\n          <img src=\"/logo.png\" alt=\"TEMS Logo\" class=\"h-16 w-16\" />\n        </div>\n        <h1 class=\"text-4xl font-bold text-primary-700 mb-2\">TEMS Operations</h1>\n        <p class=\"text-gray-600\">Fleet Tracking & Dispatch Management</p>\n      </div>\n\n      <div class=\"bg-white rounded-lg shadow-lg p-8\">\n        <form @submit.prevent=\"handleLogin\" class=\"space-y-6\">\n          <div>\n            <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n              Username\n            </label>\n            <input\n              id=\"username\"\n              v-model=\"username\"\n              type=\"text\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              placeholder=\"Enter your username\"\n            />\n          </div>\n\n          <div>\n            <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n              Password\n            </label>\n            <input\n              id=\"password\"\n              v-model=\"password\"\n              type=\"password\"\n              required\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              placeholder=\"Enter your password\"\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            :disabled=\"loading\"\n            class=\"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary-700 focus:outline-none focus:ring-4 focus:ring-primary-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            {{ loading ? 'Signing in...' : 'Sign In' }}\n          </button>\n\n          <div v-if=\"error\" class=\"text-red-600 text-sm text-center\">\n            {{ error }}\n          </div>\n        </form>\n      </div>\n\n      <div class=\"mt-6 text-center text-sm text-gray-600\">\n        <p>Operations Manager Access Only</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuth, useToast } from '@shared'\n\nconst router = useRouter()\nconst { login } = useAuth()\nconst toast = useToast()\n\nconst username = ref('')\nconst password = ref('')\nconst loading = ref(false)\nconst error = ref(null)\n\nasync function handleLogin() {\n  loading.value = true\n  error.value = null\n\n  try {\n    await login(username.value, password.value)\n    toast.success('Login successful')\n    router.push({ name: 'Dashboard' })\n  } catch (err) {\n    error.value = err.message || 'Login failed. Please check your credentials.'\n    toast.error(error.value)\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n"],"names":["useAuth","authStore","useAuthStore","user","employee","isAuthenticated","userName","userInitials","roles","loading","error","storeToRefs","router","useRouter","login","toast","useToast","username","ref","password","handleLogin","err","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$event","_hoisted_4","_hoisted_5","_toDisplayString"],"mappings":"uOAcO,SAASA,GAAU,CACtB,MAAMC,EAAYC,EAAY,EAGxB,CACF,KAAAC,EACA,SAAAC,EACA,gBAAAC,EACA,SAAAC,EACA,aAAAC,EACA,MAAAC,EACA,QAAAC,EACA,MAAAC,CACR,EAAQC,EAAYV,CAAS,EAEzB,MAAO,CAEH,KAAAE,EACA,SAAAC,EACA,gBAAAC,EACA,SAAAC,EACA,aAAAC,EACA,MAAAC,EACA,QAAAC,EACA,MAAAC,EAGA,cAAeT,EAAU,cACzB,MAAOA,EAAU,MACjB,QAASA,EAAU,QACnB,WAAYA,EAAU,WACtB,cAAeA,EAAU,cACzB,OAAQA,EAAU,OAClB,UAAWA,EAAU,SAC7B,CACA,8RCkBA,MAAMW,EAASC,EAAS,EAClB,CAAE,MAAAC,CAAK,EAAKd,EAAO,EACnBe,EAAQC,EAAQ,EAEhBC,EAAWC,EAAI,EAAE,EACjBC,EAAWD,EAAI,EAAE,EACjBT,EAAUS,EAAI,EAAK,EACnBR,EAAQQ,EAAI,IAAI,EAEtB,eAAeE,GAAc,CAC3BX,EAAQ,MAAQ,GAChBC,EAAM,MAAQ,KAEd,GAAI,CACF,MAAMI,EAAMG,EAAS,MAAOE,EAAS,KAAK,EAC1CJ,EAAM,QAAQ,kBAAkB,EAChCH,EAAO,KAAK,CAAE,KAAM,WAAW,CAAE,CACnC,OAASS,EAAK,CACZX,EAAM,MAAQW,EAAI,SAAW,+CAC7BN,EAAM,MAAML,EAAM,KAAK,CACzB,QAAC,CACCD,EAAQ,MAAQ,EAClB,CACF,eAzFEa,EAAA,EAAAC,EA0DM,MA1DNC,EA0DM,CAzDJC,EAwDM,MAxDNC,EAwDM,uSA/CJD,EA0CM,MA1CNE,EA0CM,CAzCJF,EAwCO,OAAA,CAxCA,WAAgBL,EAAW,CAAA,SAAA,CAAA,EAAE,MAAM,cACxCK,EAYM,MAAA,KAAA,aAXJA,EAEQ,QAAA,CAFD,IAAI,WAAW,MAAM,gDAA+C,aAE3E,EAAA,KACAA,EAOE,QAAA,CANA,GAAG,gDACMR,EAAQ,MAAAW,GACjB,KAAK,OACL,SAAA,GACA,MAAM,kHACN,YAAY,qCAJHX,EAAA,KAAQ,MAQrBQ,EAYM,MAAA,KAAA,aAXJA,EAEQ,QAAA,CAFD,IAAI,WAAW,MAAM,gDAA+C,aAE3E,EAAA,KACAA,EAOE,QAAA,CANA,GAAG,gDACMN,EAAQ,MAAAS,GACjB,KAAK,WACL,SAAA,GACA,MAAM,kHACN,YAAY,qCAJHT,EAAA,KAAQ,MAQrBM,EAMS,SAAA,CALP,KAAK,SACJ,SAAUhB,EAAA,MACX,MAAM,4MAEHA,EAAA,MAAO,gBAAA,SAAA,EAAA,EAAAoB,CAAA,EAGDnB,EAAA,WAAXa,EAEM,MAFNO,EAEMC,EADDrB,EAAA,KAAK,EAAA,CAAA,+BAKde,EAEM,MAAA,CAFD,MAAM,0CAAwC,CACjDA,EAAqC,SAAlC,gCAA8B"}
{"version":3,"mappings":"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","names":["FrappeClient","localforage","method","args","cache","endpoint","cacheKey","response","errorData","data","error","doctype","name","cached","fields","filters","limit","orderBy","params","result","file","isPrivate","folder","docname","formData","url","options","attempt","row","action","queue","queueItem","results","item","f","ms","resolve","frappeClient","useAuthStore","defineStore","user","ref","employee","permissions","roles","loading","isAuthenticated","computed","userName","userInitials","n","fetchUserInfo","currentUser","userData","r","employeeList","err","hasRole","role","hasAnyRole","roleList","hasPermission","logout","clearAuth","useOfflineStore","isOnline","syncInProgress","lastSyncTime","queueCount","syncErrors","isSyncing","hasPendingChanges","lastSyncFormatted","diff","minutes","hours","days","init","syncOfflineData","updateQueueCount","clearOfflineData","retryFailed","useOfflineSync","autoInit","offlineStore","storeToRefs","onMounted","toasts","nextId","useToast","activeToasts","show","message","type","duration","id","toast","dismiss","toastId","index","t","dismissAll","success","warning","info","promise","messages","loadingMsg","successMsg","errorMsg","loadingId","toastClasses","baseClasses","typeClasses","handleDismiss","getProgress","elapsed","_createBlock","_Teleport","_createVNode","_TransitionGroup","_createElementBlock","_Fragment","_renderList","_unref","_normalizeClass","$event","_createElementVNode","_hoisted_2","_hoisted_3","_openBlock","_hoisted_4","_cache","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","_withModifiers","_hoisted_11","_normalizeStyle","routes","__vitePreload","router","createRouter","createWebHistory","to","from","next","authStore","startSync","_hoisted_1","_component_router_view","Toast","app","createApp","App","pinia","createPinia"],"ignoreList":[],"sources":["../../../../../../frontend/shared/src/utils/frappeClient.js","../../../../../../frontend/shared/src/stores/auth.js","../../../../../../frontend/shared/src/stores/offline.js","../../../../../../frontend/shared/src/composables/useOfflineSync.js","../../../../../../frontend/shared/src/composables/useToast.js","../../../../../../frontend/shared/src/components/common/Toast.vue","../../../../../../frontend/fleet-pwa/src/router/index.js","../../../../../../frontend/fleet-pwa/src/App.vue","../../../../../../frontend/fleet-pwa/src/main.js"],"sourcesContent":["import localforage from 'localforage'\n\n/**\n * Enhanced Frappe API Client with offline-first capabilities\n * Supports session-based and JWT authentication\n * Implements request queuing and automatic sync\n */\nclass FrappeClient {\n    constructor() {\n        this.baseURL = window.location.origin\n        this.isOnline = navigator.onLine\n        this.retryAttempts = 3\n        this.retryDelay = 1000 // ms\n\n        // Setup offline storage\n        this.offlineStore = localforage.createInstance({\n            name: 'tems_offline'\n        })\n\n        this.queueStore = localforage.createInstance({\n            name: 'tems_queue'\n        })\n\n        // Monitor online status\n        window.addEventListener('online', () => {\n            this.isOnline = true\n            this.syncOfflineData()\n        })\n\n        window.addEventListener('offline', () => {\n            this.isOnline = false\n        })\n    }\n\n    /**\n     * Call a Frappe RPC method\n     * @param {string} method - Method path (e.g., 'tems.api.pwa.driver.get_trips')\n     * @param {object} args - Method arguments\n     * @param {boolean} cache - Whether to cache the result\n     * @returns {Promise<any>}\n     */\n    async call(method, args = {}, cache = false) {\n        const endpoint = `${this.baseURL}/api/method/${method}`\n        const cacheKey = `rpc:${method}:${JSON.stringify(args)}`\n\n        try {\n            const response = await this.fetchWithRetry(endpoint, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-Frappe-CSRF-Token': this.getCSRFToken(),\n                },\n                credentials: 'include',\n                body: JSON.stringify(args),\n            })\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}))\n                throw new Error(errorData.message || `HTTP error! status: ${response.status}`)\n            }\n\n            const data = await response.json()\n\n            // Cache if requested\n            if (cache && data.message) {\n                await this.offlineStore.setItem(cacheKey, {\n                    data: data.message,\n                    timestamp: Date.now()\n                })\n            }\n\n            return data.message\n        } catch (error) {\n            if (!this.isOnline) {\n                return this.handleOfflineRequest(cacheKey)\n            }\n            throw error\n        }\n    }\n\n    /**\n     * Get a single document\n     * @param {string} doctype - DocType name\n     * @param {string} name - Document name\n     * @returns {Promise<object>}\n     */\n    async getDoc(doctype, name) {\n        const endpoint = `${this.baseURL}/api/resource/${doctype}/${name}`\n        const cacheKey = `${doctype}:${name}`\n\n        try {\n            const response = await this.fetchWithRetry(endpoint, {\n                credentials: 'include',\n                headers: {\n                    'X-Frappe-CSRF-Token': this.getCSRFToken(),\n                }\n            })\n\n            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`)\n\n            const data = await response.json()\n\n            // Cache for offline use\n            await this.offlineStore.setItem(cacheKey, {\n                data: data.data,\n                timestamp: Date.now()\n            })\n\n            return data.data\n        } catch (error) {\n            if (!this.isOnline) {\n                const cached = await this.offlineStore.getItem(cacheKey)\n                if (cached) return cached.data\n            }\n            throw error\n        }\n    }\n\n    /**\n     * Get a list of documents\n     * @param {string} doctype - DocType name\n     * @param {string[]} fields - Fields to fetch\n     * @param {object|array} filters - Frappe filters\n     * @param {number} limit - Number of records\n     * @param {string} orderBy - Order by clause\n     * @returns {Promise<array>}\n     */\n    async getList(doctype, fields = ['name'], filters = {}, limit = 20, orderBy = 'modified desc') {\n        const endpoint = `${this.baseURL}/api/resource/${doctype}`\n        const params = new URLSearchParams({\n            fields: JSON.stringify(fields),\n            filters: JSON.stringify(filters),\n            limit_page_length: limit,\n            order_by: orderBy\n        })\n\n        const cacheKey = `list:${doctype}:${JSON.stringify(filters)}:${limit}`\n\n        try {\n            const response = await this.fetchWithRetry(`${endpoint}?${params}`, {\n                credentials: 'include',\n                headers: {\n                    'X-Frappe-CSRF-Token': this.getCSRFToken(),\n                }\n            })\n\n            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`)\n\n            const data = await response.json()\n\n            // Cache list for offline\n            await this.offlineStore.setItem(cacheKey, {\n                data: data.data,\n                timestamp: Date.now()\n            })\n\n            return data.data\n        } catch (error) {\n            if (!this.isOnline) {\n                const cached = await this.offlineStore.getItem(cacheKey)\n                if (cached) return cached.data\n            }\n            throw error\n        }\n    }\n\n    /**\n     * Update a document\n     * @param {string} doctype - DocType name\n     * @param {string} name - Document name\n     * @param {object} data - Fields to update\n     * @returns {Promise<object>}\n     */\n    async setDoc(doctype, name, data) {\n        if (!this.isOnline) {\n            return this.queueOfflineWrite(doctype, name, data, 'update')\n        }\n\n        const endpoint = `${this.baseURL}/api/resource/${doctype}/${name}`\n\n        const response = await this.fetchWithRetry(endpoint, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-Frappe-CSRF-Token': this.getCSRFToken(),\n            },\n            credentials: 'include',\n            body: JSON.stringify(data),\n        })\n\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`)\n\n        const result = await response.json()\n\n        // Update cache\n        await this.offlineStore.setItem(`${doctype}:${name}`, {\n            data: result.data,\n            timestamp: Date.now()\n        })\n\n        return result.data\n    }\n\n    /**\n     * Create a new document\n     * @param {string} doctype - DocType name\n     * @param {object} data - Document data\n     * @returns {Promise<object>}\n     */\n    async createDoc(doctype, data) {\n        if (!this.isOnline) {\n            return this.queueOfflineWrite(doctype, null, data, 'create')\n        }\n\n        const endpoint = `${this.baseURL}/api/resource/${doctype}`\n\n        const response = await this.fetchWithRetry(endpoint, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-Frappe-CSRF-Token': this.getCSRFToken(),\n            },\n            credentials: 'include',\n            body: JSON.stringify(data),\n        })\n\n        if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}))\n            throw new Error(errorData.message || 'Failed to create document')\n        }\n\n        return await response.json()\n    }\n\n    /**\n     * Delete a document\n     * @param {string} doctype - DocType name\n     * @param {string} name - Document name\n     * @returns {Promise<void>}\n     */\n    async deleteDoc(doctype, name) {\n        if (!this.isOnline) {\n            return this.queueOfflineWrite(doctype, name, {}, 'delete')\n        }\n\n        const endpoint = `${this.baseURL}/api/resource/${doctype}/${name}`\n\n        const response = await fetch(endpoint, {\n            method: 'DELETE',\n            headers: {\n                'X-Frappe-CSRF-Token': this.getCSRFToken(),\n            },\n            credentials: 'include',\n        })\n\n        if (!response.ok) throw new Error('Failed to delete document')\n\n        // Remove from cache\n        await this.offlineStore.removeItem(`${doctype}:${name}`)\n    }\n\n    /**\n     * Upload a file to Frappe\n     * @param {File} file - File object\n     * @param {boolean} isPrivate - Whether file is private\n     * @param {string} folder - Folder path\n     * @param {string} doctype - Optional: Link to doctype\n     * @param {string} docname - Optional: Link to document\n     * @returns {Promise<object>}\n     */\n    async uploadFile(file, isPrivate = false, folder = 'Home', doctype = null, docname = null) {\n        const formData = new FormData()\n        formData.append('file', file)\n        formData.append('is_private', isPrivate ? 1 : 0)\n        formData.append('folder', folder)\n\n        if (doctype) formData.append('doctype', doctype)\n        if (docname) formData.append('docname', docname)\n\n        const response = await fetch(`${this.baseURL}/api/method/upload_file`, {\n            method: 'POST',\n            headers: {\n                'X-Frappe-CSRF-Token': this.getCSRFToken(),\n            },\n            credentials: 'include',\n            body: formData\n        })\n\n        if (!response.ok) throw new Error('Upload failed')\n\n        const data = await response.json()\n        return data.message\n    }\n\n    /**\n     * Fetch with automatic retry on failure\n     * @private\n     */\n    async fetchWithRetry(url, options, attempt = 1) {\n        try {\n            return await fetch(url, options)\n        } catch (error) {\n            if (attempt < this.retryAttempts && this.isOnline) {\n                await this.delay(this.retryDelay * attempt)\n                return this.fetchWithRetry(url, options, attempt + 1)\n            }\n            throw error\n        }\n    }\n\n    /**\n     * Get CSRF token from meta tag or cookie\n     * @private\n     */\n    getCSRFToken() {\n        return document.querySelector('meta[name=\"csrf-token\"]')?.getAttribute('content') ||\n            document.cookie.split('; ').find(row => row.startsWith('csrf_token='))?.split('=')[1] || ''\n    }\n\n    /**\n     * Queue a write operation for offline sync\n     * @private\n     */\n    async queueOfflineWrite(doctype, name, data, action = 'update') {\n        const queue = await this.queueStore.getItem('write_queue') || []\n        const queueItem = {\n            id: `${Date.now()}_${Math.random()}`,\n            doctype,\n            name,\n            data,\n            action,\n            timestamp: Date.now()\n        }\n\n        queue.push(queueItem)\n        await this.queueStore.setItem('write_queue', queue)\n\n        return {\n            queued: true,\n            offline: true,\n            queueId: queueItem.id,\n            message: 'Saved offline. Will sync when online.'\n        }\n    }\n\n    /**\n     * Sync all queued offline operations\n     * @returns {Promise<object>} Sync results\n     */\n    async syncOfflineData() {\n        const queue = await this.queueStore.getItem('write_queue') || []\n        if (queue.length === 0) return { synced: 0, failed: [] }\n\n        const results = {\n            synced: 0,\n            failed: []\n        }\n\n        for (const item of queue) {\n            try {\n                if (item.action === 'create') {\n                    await this.createDoc(item.doctype, item.data)\n                } else if (item.action === 'update') {\n                    await this.setDoc(item.doctype, item.name, item.data)\n                } else if (item.action === 'delete') {\n                    await this.deleteDoc(item.doctype, item.name)\n                }\n                results.synced++\n            } catch (error) {\n                console.error('Sync failed for item:', item, error)\n                results.failed.push({ item, error: error.message })\n            }\n        }\n\n        // Remove synced items\n        if (results.failed.length === 0) {\n            await this.queueStore.setItem('write_queue', [])\n        } else {\n            await this.queueStore.setItem('write_queue', results.failed.map(f => f.item))\n        }\n\n        return results\n    }\n\n    /**\n     * Get count of pending offline operations\n     * @returns {Promise<number>}\n     */\n    async getPendingQueueCount() {\n        const queue = await this.queueStore.getItem('write_queue') || []\n        return queue.length\n    }\n\n    /**\n     * Handle offline request by returning cached data\n     * @private\n     */\n    async handleOfflineRequest(cacheKey) {\n        const cached = await this.offlineStore.getItem(cacheKey)\n\n        if (cached) return cached.data\n\n        return {\n            offline: true,\n            error: 'No cached data available',\n            message: 'You are offline and this data is not cached'\n        }\n    }\n\n    /**\n     * Clear all cached data and queue\n     * @returns {Promise<void>}\n     */\n    async clearCache() {\n        await this.offlineStore.clear()\n        await this.queueStore.clear()\n    }\n\n    /**\n     * Simple delay utility\n     * @private\n     */\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms))\n    }\n\n    /**\n     * Check authentication status\n     * @returns {Promise<boolean>}\n     */\n    async isAuthenticated() {\n        try {\n            const response = await fetch(`${this.baseURL}/api/method/frappe.auth.get_logged_user`, {\n                credentials: 'include',\n                headers: {\n                    'X-Frappe-CSRF-Token': this.getCSRFToken(),\n                }\n            })\n\n            if (!response.ok) return false\n\n            const data = await response.json()\n            return data.message && data.message !== 'Guest'\n        } catch {\n            return false\n        }\n    }\n\n    /**\n     * Get current logged-in user\n     * @returns {Promise<string|null>}\n     */\n    async getCurrentUser() {\n        try {\n            const response = await fetch(`${this.baseURL}/api/method/frappe.auth.get_logged_user`, {\n                credentials: 'include',\n                headers: {\n                    'X-Frappe-CSRF-Token': this.getCSRFToken(),\n                }\n            })\n\n            if (!response.ok) return null\n\n            const data = await response.json()\n            return data.message !== 'Guest' ? data.message : null\n        } catch {\n            return null\n        }\n    }\n}\n\nexport const frappeClient = new FrappeClient()\nexport default frappeClient\n","import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport frappeClient from '../utils/frappeClient.js'\n\n/**\n * Authentication store\n * Manages user authentication state and employee profile\n */\nexport const useAuthStore = defineStore('auth', () => {\n    const user = ref(null)\n    const employee = ref(null)\n    const permissions = ref([])\n    const roles = ref([])\n    const loading = ref(false)\n    const error = ref(null)\n\n    const isAuthenticated = computed(() => !!user.value)\n    const userName = computed(() => employee.value?.employee_name || user.value?.full_name || 'User')\n    const userInitials = computed(() => {\n        const name = userName.value\n        return name.split(' ').map(n => n[0]).slice(0, 2).join('').toUpperCase()\n    })\n\n    /**\n     * Fetch current user information and employee details\n     */\n    async function fetchUserInfo() {\n        loading.value = true\n        error.value = null\n\n        try {\n            // Get logged user\n            const currentUser = await frappeClient.getCurrentUser()\n\n            if (!currentUser || currentUser === 'Guest') {\n                throw new Error('Not authenticated')\n            }\n\n            // Get user doc\n            const userData = await frappeClient.getDoc('User', currentUser)\n            user.value = userData\n            roles.value = userData.roles?.map(r => r.role) || []\n\n            // Get employee details if linked\n            if (userData.name) {\n                try {\n                    const employeeList = await frappeClient.getList(\n                        'Employee',\n                        ['name', 'employee_name', 'designation', 'image', 'department', 'cell_number'],\n                        [['user_id', '=', userData.name]],\n                        1\n                    )\n\n                    if (employeeList && employeeList.length > 0) {\n                        employee.value = employeeList[0]\n                    }\n                } catch (err) {\n                    console.warn('Employee not found for user:', err)\n                }\n            }\n\n            return userData\n        } catch (err) {\n            error.value = err.message\n            console.error('Failed to fetch user info:', err)\n            throw err\n        } finally {\n            loading.value = false\n        }\n    }\n\n    /**\n     * Check if user has a specific role\n     */\n    function hasRole(role) {\n        return roles.value.includes(role)\n    }\n\n    /**\n     * Check if user has any of the specified roles\n     */\n    function hasAnyRole(roleList) {\n        return roleList.some(role => roles.value.includes(role))\n    }\n\n    /**\n     * Check if user has permission for a doctype action\n     */\n    function hasPermission(doctype, action = 'read') {\n        // TODO: Implement proper permission check via Frappe API\n        return true\n    }\n\n    /**\n     * Logout current user\n     */\n    async function logout() {\n        try {\n            await frappeClient.call('logout')\n            user.value = null\n            employee.value = null\n            permissions.value = []\n            roles.value = []\n\n            // Redirect to login\n            window.location.href = '/login'\n        } catch (err) {\n            console.error('Logout failed:', err)\n            error.value = err.message\n        }\n    }\n\n    /**\n     * Clear auth state\n     */\n    function clearAuth() {\n        user.value = null\n        employee.value = null\n        permissions.value = []\n        roles.value = []\n        error.value = null\n    }\n\n    return {\n        user,\n        employee,\n        permissions,\n        roles,\n        loading,\n        error,\n        isAuthenticated,\n        userName,\n        userInitials,\n        fetchUserInfo,\n        hasRole,\n        hasAnyRole,\n        hasPermission,\n        logout,\n        clearAuth\n    }\n})\n","import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport frappeClient from '../utils/frappeClient.js'\n\n/**\n * Offline sync store\n * Manages offline queue and synchronization\n */\nexport const useOfflineStore = defineStore('offline', () => {\n    const isOnline = ref(navigator.onLine)\n    const syncInProgress = ref(false)\n    const lastSyncTime = ref(null)\n    const queueCount = ref(0)\n    const syncErrors = ref([])\n\n    const isSyncing = computed(() => syncInProgress.value)\n    const hasPendingChanges = computed(() => queueCount.value > 0)\n    const lastSyncFormatted = computed(() => {\n        if (!lastSyncTime.value) return 'Never'\n        const diff = Date.now() - lastSyncTime.value\n        const minutes = Math.floor(diff / 60000)\n        if (minutes < 1) return 'Just now'\n        if (minutes === 1) return '1 minute ago'\n        if (minutes < 60) return `${minutes} minutes ago`\n        const hours = Math.floor(minutes / 60)\n        if (hours === 1) return '1 hour ago'\n        if (hours < 24) return `${hours} hours ago`\n        const days = Math.floor(hours / 24)\n        return days === 1 ? '1 day ago' : `${days} days ago`\n    })\n\n    /**\n     * Initialize offline monitoring\n     */\n    function init() {\n        // Update online status\n        window.addEventListener('online', () => {\n            isOnline.value = true\n            syncOfflineData()\n        })\n\n        window.addEventListener('offline', () => {\n            isOnline.value = false\n        })\n\n        // Update queue count\n        updateQueueCount()\n\n        // Auto-sync every 5 minutes if online\n        setInterval(() => {\n            if (isOnline.value && !syncInProgress.value) {\n                syncOfflineData()\n            }\n        }, 5 * 60 * 1000)\n    }\n\n    /**\n     * Update queue count\n     */\n    async function updateQueueCount() {\n        try {\n            queueCount.value = await frappeClient.getPendingQueueCount()\n        } catch (error) {\n            console.error('Failed to update queue count:', error)\n        }\n    }\n\n    /**\n     * Sync offline data\n     */\n    async function syncOfflineData() {\n        if (syncInProgress.value || !isOnline.value) return\n\n        syncInProgress.value = true\n        syncErrors.value = []\n\n        try {\n            const result = await frappeClient.syncOfflineData()\n\n            if (result.synced > 0) {\n                console.log(`Synced ${result.synced} offline changes`)\n                lastSyncTime.value = Date.now()\n            }\n\n            if (result.failed && result.failed.length > 0) {\n                syncErrors.value = result.failed\n                console.error('Some items failed to sync:', result.failed)\n            }\n\n            await updateQueueCount()\n\n            return result\n        } catch (error) {\n            console.error('Sync failed:', error)\n            syncErrors.value.push({ error: error.message })\n        } finally {\n            syncInProgress.value = false\n        }\n    }\n\n    /**\n     * Clear all offline data\n     */\n    async function clearOfflineData() {\n        try {\n            await frappeClient.clearCache()\n            queueCount.value = 0\n            syncErrors.value = []\n            lastSyncTime.value = null\n        } catch (error) {\n            console.error('Failed to clear offline data:', error)\n            throw error\n        }\n    }\n\n    /**\n     * Retry failed sync items\n     */\n    async function retryFailed() {\n        return syncOfflineData()\n    }\n\n    return {\n        isOnline,\n        syncInProgress,\n        lastSyncTime,\n        queueCount,\n        syncErrors,\n        isSyncing,\n        hasPendingChanges,\n        lastSyncFormatted,\n        init,\n        updateQueueCount,\n        syncOfflineData,\n        clearOfflineData,\n        retryFailed\n    }\n})\n","import { useOfflineStore } from '../stores/offline.js'\nimport { storeToRefs } from 'pinia'\nimport { onMounted } from 'vue'\n\n/**\n * Offline sync composable\n * Manages offline queue and synchronization\n * \n * @example\n * ```javascript\n * import { useOfflineSync } from '@shared/composables/useOfflineSync'\n * \n * const { isOnline, hasPendingChanges, sync } = useOfflineSync()\n * \n * // Initialize in App.vue\n * onMounted(() => {\n *   offlineSync.init()\n * })\n * \n * // Manual sync\n * await sync()\n * ```\n */\nexport function useOfflineSync(options = {}) {\n    const { autoInit = false } = options\n\n    const offlineStore = useOfflineStore()\n\n    const {\n        isOnline,\n        syncInProgress,\n        lastSyncTime,\n        queueCount,\n        syncErrors,\n        isSyncing,\n        hasPendingChanges,\n        lastSyncFormatted\n    } = storeToRefs(offlineStore)\n\n    // Auto-initialize if requested\n    if (autoInit) {\n        onMounted(() => {\n            offlineStore.init()\n        })\n    }\n\n    return {\n        // State\n        isOnline,\n        syncInProgress,\n        lastSyncTime,\n        queueCount,\n        syncErrors,\n        isSyncing,\n        hasPendingChanges,\n        lastSyncFormatted,\n\n        // Actions\n        init: offlineStore.init,\n        sync: offlineStore.syncOfflineData,\n        updateQueueCount: offlineStore.updateQueueCount,\n        clearCache: offlineStore.clearOfflineData,\n        retryFailed: offlineStore.retryFailed\n    }\n}\n","import { ref, computed } from 'vue'\n\n/**\n * Toast notification composable\n * Provides methods to show toast notifications\n * \n * @returns {object} Toast state and methods\n * \n * @example\n * ```javascript\n * import { useToast } from '@shared/composables/useToast'\n * \n * const toast = useToast()\n * \n * // Show different types\n * toast.success('Operation completed!')\n * toast.error('Something went wrong')\n * toast.warning('Please be careful')\n * toast.info('New message received')\n * \n * // Custom duration\n * toast.success('Saved!', 5000)\n * \n * // Manual dismiss\n * const id = toast.info('Loading...')\n * // Later...\n * toast.dismiss(id)\n * ```\n */\n\n// Global toast state (shared across all components)\nconst toasts = ref([])\nlet nextId = 0\n\nexport function useToast() {\n    const activeToasts = computed(() => toasts.value)\n\n    /**\n     * Show a toast notification\n     * @param {string} message - Toast message\n     * @param {string} type - Toast type (success, error, warning, info)\n     * @param {number} duration - Duration in ms (0 = no auto-dismiss)\n     * @returns {number} Toast ID\n     */\n    function show(message, type = 'info', duration = 3000) {\n        const id = nextId++\n\n        const toast = {\n            id,\n            message,\n            type,\n            visible: true,\n            timestamp: Date.now()\n        }\n\n        toasts.value.push(toast)\n\n        // Auto-dismiss\n        if (duration > 0) {\n            setTimeout(() => {\n                dismiss(id)\n            }, duration)\n        }\n\n        return id\n    }\n\n    /**\n     * Dismiss a toast\n     * @param {number} toastId - Toast ID to dismiss\n     */\n    function dismiss(toastId) {\n        const index = toasts.value.findIndex(t => t.id === toastId)\n        if (index > -1) {\n            toasts.value.splice(index, 1)\n        }\n    }\n\n    /**\n     * Dismiss all toasts\n     */\n    function dismissAll() {\n        toasts.value = []\n    }\n\n    /**\n     * Show success toast\n     * @param {string} message - Message\n     * @param {number} duration - Duration in ms\n     * @returns {number} Toast ID\n     */\n    function success(message, duration = 3000) {\n        return show(message, 'success', duration)\n    }\n\n    /**\n     * Show error toast\n     * @param {string} message - Message\n     * @param {number} duration - Duration in ms (0 = manual dismiss)\n     * @returns {number} Toast ID\n     */\n    function error(message, duration = 5000) {\n        return show(message, 'error', duration)\n    }\n\n    /**\n     * Show warning toast\n     * @param {string} message - Message\n     * @param {number} duration - Duration in ms\n     * @returns {number} Toast ID\n     */\n    function warning(message, duration = 4000) {\n        return show(message, 'warning', duration)\n    }\n\n    /**\n     * Show info toast\n     * @param {string} message - Message\n     * @param {number} duration - Duration in ms\n     * @returns {number} Toast ID\n     */\n    function info(message, duration = 3000) {\n        return show(message, 'info', duration)\n    }\n\n    /**\n     * Show loading toast (no auto-dismiss)\n     * @param {string} message - Message\n     * @returns {number} Toast ID (use to dismiss later)\n     */\n    function loading(message = 'Loading...') {\n        return show(message, 'info', 0)\n    }\n\n    /**\n     * Show promise toast\n     * Automatically shows loading, then success or error\n     * @param {Promise} promise - Promise to track\n     * @param {object} messages - Messages for each state\n     * @returns {Promise}\n     */\n    async function promise(promise, messages = {}) {\n        const {\n            loading: loadingMsg = 'Loading...',\n            success: successMsg = 'Success!',\n            error: errorMsg = 'Error occurred'\n        } = messages\n\n        const loadingId = show(loadingMsg, 'info', 0)\n\n        try {\n            const result = await promise\n            dismiss(loadingId)\n            success(successMsg)\n            return result\n        } catch (err) {\n            dismiss(loadingId)\n            error(errorMsg + (err.message ? `: ${err.message}` : ''))\n            throw err\n        }\n    }\n\n    return {\n        // State\n        toasts: activeToasts,\n\n        // Methods\n        show,\n        dismiss,\n        dismissAll,\n        success,\n        error,\n        warning,\n        info,\n        loading,\n        promise\n    }\n}\n","<template>\n  <teleport to=\"body\">\n    <transition-group\n      name=\"toast\"\n      tag=\"div\"\n      class=\"fixed top-4 right-4 z-50 space-y-2 pointer-events-none\"\n    >\n      <div\n        v-for=\"toast in toasts\"\n        :key=\"toast.id\"\n        :class=\"toastClasses(toast)\"\n        class=\"pointer-events-auto\"\n        @click=\"handleDismiss(toast.id)\"\n      >\n        <div class=\"flex items-start space-x-3 p-4\">\n          <!-- Icon -->\n          <div class=\"flex-shrink-0\">\n            <svg v-if=\"toast.type === 'success'\" class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"/>\n            </svg>\n            <svg v-else-if=\"toast.type === 'error'\" class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\"/>\n            </svg>\n            <svg v-else-if=\"toast.type === 'warning'\" class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"/>\n            </svg>\n            <svg v-else class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"/>\n            </svg>\n          </div>\n\n          <!-- Message -->\n          <div class=\"flex-1 pt-0.5\">\n            <p class=\"text-sm font-medium\">{{ toast.message }}</p>\n          </div>\n\n          <!-- Close Button -->\n          <button\n            type=\"button\"\n            @click.stop=\"handleDismiss(toast.id)\"\n            class=\"flex-shrink-0 text-current opacity-70 hover:opacity-100 transition-opacity\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"/>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Progress Bar (optional) -->\n        <div\n          v-if=\"toast.duration > 0\"\n          class=\"h-1 bg-white bg-opacity-30 rounded-b\"\n        >\n          <div\n            class=\"h-full bg-white bg-opacity-50 rounded-b transition-all\"\n            :style=\"{ width: getProgress(toast) + '%' }\"\n          ></div>\n        </div>\n      </div>\n    </transition-group>\n  </teleport>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { useToast } from '../../composables/useToast.js'\n\n// Get toasts from composable\nconst { toasts, dismiss } = useToast()\n\n// Methods\nfunction toastClasses(toast) {\n  const baseClasses = [\n    'rounded-lg shadow-lg max-w-sm w-full transform transition-all duration-300 cursor-pointer',\n    'hover:scale-105'\n  ]\n\n  const typeClasses = {\n    success: 'bg-green-600 text-white',\n    error: 'bg-red-600 text-white',\n    warning: 'bg-yellow-500 text-gray-900',\n    info: 'bg-blue-600 text-white'\n  }\n\n  return [...baseClasses, typeClasses[toast.type] || typeClasses.info].join(' ')\n}\n\nfunction handleDismiss(toastId) {\n  dismiss(toastId)\n}\n\nfunction getProgress(toast) {\n  // Calculate progress based on time elapsed\n  const now = Date.now()\n  const elapsed = now - toast.timestamp\n  const duration = toast.duration || 3000\n  const remaining = Math.max(0, duration - elapsed)\n  return (remaining / duration) * 100\n}\n</script>\n\n<style scoped>\n/* Toast animations */\n.toast-enter-active,\n.toast-leave-active {\n  transition: all 0.3s ease;\n}\n\n.toast-enter-from {\n  opacity: 0;\n  transform: translateX(100%) scale(0.8);\n}\n\n.toast-enter-to {\n  opacity: 1;\n  transform: translateX(0) scale(1);\n}\n\n.toast-leave-from {\n  opacity: 1;\n  transform: translateX(0) scale(1);\n}\n\n.toast-leave-to {\n  opacity: 0;\n  transform: translateX(100%) scale(0.8);\n}\n\n/* Move animation for remaining toasts */\n.toast-move {\n  transition: transform 0.3s ease;\n}\n</style>\n","import { createRouter, createWebHistory } from 'vue-router'\nimport { useAuthStore } from '@shared'\n\nconst routes = [\n    {\n        path: '/login',\n        name: 'Login',\n        component: () => import('../views/Login.vue'),\n        meta: { requiresAuth: false }\n    },\n    {\n        path: '/',\n        component: () => import('../views/Layout.vue'),\n        meta: { requiresAuth: true },\n        children: [\n            {\n                path: '',\n                name: 'Dashboard',\n                component: () => import('../views/Dashboard.vue')\n            },\n            {\n                path: 'assets',\n                name: 'AssetManagement',\n                component: () => import('../views/AssetManagement.vue')\n            },\n            {\n                path: 'assets/:id',\n                name: 'AssetDetails',\n                component: () => import('../views/AssetDetails.vue')\n            },\n            {\n                path: 'maintenance',\n                name: 'MaintenanceSchedule',\n                component: () => import('../views/MaintenanceSchedule.vue')\n            },\n            {\n                path: 'fuel',\n                name: 'FuelAnalytics',\n                component: () => import('../views/FuelAnalytics.vue')\n            },\n            {\n                path: 'lifecycle',\n                name: 'LifecycleTracking',\n                component: () => import('../views/LifecycleTracking.vue')\n            },\n            {\n                path: 'reports',\n                name: 'Reports',\n                component: () => import('../views/Reports.vue')\n            },\n            {\n                path: 'settings',\n                name: 'Settings',\n                component: () => import('../views/Settings.vue')\n            }\n        ]\n    }\n]\n\nconst router = createRouter({\n    history: createWebHistory('/fleet/'),\n    routes\n})\n\n// Navigation guard\nrouter.beforeEach((to, from, next) => {\n    const authStore = useAuthStore()\n\n    if (to.meta.requiresAuth && !authStore.isAuthenticated) {\n        next({ name: 'Login', query: { redirect: to.fullPath } })\n    } else if (to.name === 'Login' && authStore.isAuthenticated) {\n        next({ name: 'Dashboard' })\n    } else {\n        next()\n    }\n})\n\nexport default router\n","<template>\n  <div id=\"app\" class=\"min-h-screen bg-gray-50\">\n    <router-view />\n    <Toast />\n  </div>\n</template>\n\n<script setup>\nimport { onMounted } from 'vue'\nimport { Toast, useOfflineSync } from '@shared'\n\nconst { startSync } = useOfflineSync()\n\nonMounted(() => {\n  // Start background sync for offline operations\n  startSync()\n})\n</script>\n\n<style>\n@import './assets/main.css';\n</style>\n","import { createApp } from 'vue'\nimport { createPinia } from 'pinia'\nimport router from './router'\nimport App from './App.vue'\nimport './assets/main.css'\n\nconst app = createApp(App)\nconst pinia = createPinia()\n\napp.use(pinia)\napp.use(router)\napp.mount('#app')\n"],"file":"index-BS761ZJE.js"}
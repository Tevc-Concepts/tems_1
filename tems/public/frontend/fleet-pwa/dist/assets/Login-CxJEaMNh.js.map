{"version":3,"file":"Login-CxJEaMNh.js","sources":["../../../../../../frontend/shared/src/composables/useAuth.js","../../../../../../frontend/fleet-pwa/src/views/Login.vue"],"sourcesContent":["import { useAuthStore } from '../stores/auth.js'\nimport { storeToRefs } from 'pinia'\n\n/**\n * Authentication composable\n * Provides reactive access to authentication state and methods\n * \n * @example\n * ```javascript\n * import { useAuth } from '@shared/composables/useAuth'\n * \n * const { user, isAuthenticated, logout } = useAuth()\n * ```\n */\nexport function useAuth() {\n    const authStore = useAuthStore()\n\n    // Convert store state to refs for reactivity\n    const {\n        user,\n        employee,\n        isAuthenticated,\n        userName,\n        userInitials,\n        roles,\n        loading,\n        error\n    } = storeToRefs(authStore)\n\n    return {\n        // State\n        user,\n        employee,\n        isAuthenticated,\n        userName,\n        userInitials,\n        roles,\n        loading,\n        error,\n\n        // Actions\n        fetchUserInfo: authStore.fetchUserInfo,\n        login: authStore.login,\n        hasRole: authStore.hasRole,\n        hasAnyRole: authStore.hasAnyRole,\n        hasPermission: authStore.hasPermission,\n        logout: authStore.logout,\n        clearAuth: authStore.clearAuth\n    }\n}\n","<template>\n  <div class=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-gray-900 dark:to-gray-800 px-4\">\n    <div class=\"max-w-md w-full space-y-8\">\n      <div class=\"text-center\">\n        <div class=\"flex justify-center mb-4\">\n          <img src=\"/logo.png\" alt=\"TEMS Logo\" class=\"h-16 w-16\" />\n        </div>\n        <h2 class=\"text-4xl font-bold text-emerald-600 dark:text-emerald-400 mb-2\">TEMS Fleet</h2>\n        <p class=\"text-gray-600 dark:text-gray-400\">Fleet Manager Access</p>\n      </div>\n\n      <form @submit.prevent=\"handleLogin\" class=\"mt-8 space-y-6 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-xl\">\n        <div class=\"space-y-4\">\n          <div>\n            <label for=\"usr\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Username\n            </label>\n            <input\n              id=\"usr\"\n              v-model=\"credentials.usr\"\n              type=\"text\"\n              required\n              class=\"appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 dark:bg-gray-700 sm:text-sm\"\n              placeholder=\"Enter your username\"\n            />\n          </div>\n\n          <div>\n            <label for=\"pwd\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Password\n            </label>\n            <input\n              id=\"pwd\"\n              v-model=\"credentials.pwd\"\n              type=\"password\"\n              required\n              class=\"appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-lg focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 dark:bg-gray-700 sm:text-sm\"\n              placeholder=\"Enter your password\"\n            />\n          </div>\n        </div>\n\n        <div v-if=\"error\" class=\"text-red-600 dark:text-red-400 text-sm text-center\">\n          {{ error }}\n        </div>\n\n        <button\n          type=\"submit\"\n          :disabled=\"loading\"\n          class=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          <span v-if=\"!loading\">Sign In</span>\n          <span v-else class=\"flex items-center\">\n            <svg class=\"animate-spin h-5 w-5 mr-2\" viewBox=\"0 0 24 24\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\" fill=\"none\"></circle>\n              <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n            Signing in...\n          </span>\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuth, useToast } from '@shared'\n\nconst router = useRouter()\nconst { login } = useAuth()\nconst toast = useToast()\n\nconst credentials = ref({\n  usr: '',\n  pwd: ''\n})\n\nconst loading = ref(false)\nconst error = ref(null)\n\nasync function handleLogin() {\n  loading.value = true\n  error.value = null\n\n  try {\n    await login(credentials.value.usr, credentials.value.pwd)\n    toast.success('Login successful')\n    router.push('/dashboard')\n  } catch (err) {\n    error.value = err.message || 'Invalid credentials'\n    toast.error('Login failed')\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n"],"names":["useAuth","authStore","useAuthStore","user","employee","isAuthenticated","userName","userInitials","roles","loading","error","storeToRefs","router","useRouter","login","toast","useToast","credentials","ref","handleLogin","err","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","$event","_vModelText","_hoisted_4","_toDisplayString","_hoisted_7"],"mappings":"mPAcO,SAASA,GAAU,CACtB,MAAMC,EAAYC,EAAY,EAGxB,CACF,KAAAC,EACA,SAAAC,EACA,gBAAAC,EACA,SAAAC,EACA,aAAAC,EACA,MAAAC,EACA,QAAAC,EACA,MAAAC,CACR,EAAQC,EAAYV,CAAS,EAEzB,MAAO,CAEH,KAAAE,EACA,SAAAC,EACA,gBAAAC,EACA,SAAAC,EACA,aAAAC,EACA,MAAAC,EACA,QAAAC,EACA,MAAAC,EAGA,cAAeT,EAAU,cACzB,MAAOA,EAAU,MACjB,QAASA,EAAU,QACnB,WAAYA,EAAU,WACtB,cAAeA,EAAU,cACzB,OAAQA,EAAU,OAClB,UAAWA,EAAU,SAC7B,CACA,oXCqBA,MAAMW,EAASC,EAAS,EAClB,CAAE,MAAAC,CAAK,EAAKd,EAAO,EACnBe,EAAQC,EAAQ,EAEhBC,EAAcC,EAAI,CACtB,IAAK,GACL,IAAK,EACP,CAAC,EAEKT,EAAUS,EAAI,EAAK,EACnBR,EAAQQ,EAAI,IAAI,EAEtB,eAAeC,GAAc,CAC3BV,EAAQ,MAAQ,GAChBC,EAAM,MAAQ,KAEd,GAAI,CACF,MAAMI,EAAMG,EAAY,MAAM,IAAKA,EAAY,MAAM,GAAG,EACxDF,EAAM,QAAQ,kBAAkB,EAChCH,EAAO,KAAK,YAAY,CAC1B,OAASQ,EAAK,CACZV,EAAM,MAAQU,EAAI,SAAW,sBAC7BL,EAAM,MAAM,cAAc,CAC5B,QAAC,CACCN,EAAQ,MAAQ,EAClB,CACF,eA/FEY,EAAA,EAAAC,EA6DM,MA7DNC,EA6DM,CA5DJC,EA2DM,MA3DNC,EA2DM,kTAlDJD,EAiDO,OAAA,CAjDA,WAAgBL,EAAW,CAAA,SAAA,CAAA,EAAE,MAAM,sEACxCK,EA4BM,MA5BNE,EA4BM,CA3BJF,EAYM,MAAA,KAAA,aAXJA,EAEQ,QAAA,CAFD,IAAI,MAAM,MAAM,mEAAkE,aAEzF,EAAA,KACAA,EAOE,QAAA,CANA,GAAG,MACM,sBAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAX,EAAA,MAAY,IAAGW,GACxB,KAAK,OACL,SAAA,GACA,MAAM,qRACN,YAAY,kCAJH,CAAAC,EAAAZ,EAAA,MAAY,GAAG,MAQ5BO,EAYM,MAAA,KAAA,aAXJA,EAEQ,QAAA,CAFD,IAAI,MAAM,MAAM,mEAAkE,aAEzF,EAAA,KACAA,EAOE,QAAA,CANA,GAAG,MACM,sBAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAX,EAAA,MAAY,IAAGW,GACxB,KAAK,WACL,SAAA,GACA,MAAM,qRACN,YAAY,kCAJH,CAAAC,EAAAZ,EAAA,MAAY,GAAG,QASnBP,EAAA,WAAXY,EAEM,MAFNQ,EAEMC,EADDrB,EAAA,KAAK,EAAA,CAAA,YAGVc,EAaS,SAAA,CAZP,KAAK,SACJ,SAAUf,EAAA,MACX,MAAM,wSAEOA,EAAA,OACbY,IAAAC,EAMO,OANPU,EAMO,CAAA,GAAAL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CALLH,EAGM,MAAA,CAHD,MAAM,4BAA4B,QAAQ,cAC7CA,EAA8G,SAAA,CAAtG,MAAM,aAAa,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,OAAO,eAAe,eAAa,IAAI,KAAK,SAC9FA,EAAwK,OAAA,CAAlK,MAAM,aAAa,KAAK,eAAe,EAAE,2HAC3C,kBAER,EAAA,QAPAH,EAAA,EAAAC,EAAoC,SAAd,SAAO"}
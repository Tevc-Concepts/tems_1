import{u as k}from"./communication-DkZwE38D.js";import{_ as w}from"./LoadingSpinner-BQrI8T8P.js";import{_ as N}from"./EmptyState-Ws_K2wgV.js";import{_ as C}from"./index-CvUSgFKw.js";import{c as T}from"./createLucideIcon-TnRFscOj.js";import{R as I}from"./refresh-cw-BAKKBxtm.js";import{F as M}from"./file-text-DFOq66YR.js";import{T as u}from"./truck-iOzUoDvC.js";import{U as B}from"./users-BMsH5R0H.js";import{P}from"./package-BrCQSYfT.js";import{T as S}from"./triangle-alert-f0HtByGp.js";import{I as F}from"./info-D1l5phir.js";import{p as V,a as L}from"./utils-DGK9-2WQ.js";import{k as _,l as R,c as r,a as e,d,h as c,m as i,t as l,F as A,q as j,g as D,n as p,o,p as O,G as U}from"./vue-vendor-85nDNI24.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=T("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),$={class:"space-y-6"},H={key:0,class:"card p-4 bg-primary-50 border-l-4 border-primary-600"},J={class:"flex items-center space-x-3"},q={class:"font-semibold text-gray-900"},z={key:1,class:"card p-8"},E={key:2,class:"card p-8"},G={key:3,class:"card divide-y"},Y=["onClick"],K={class:"flex items-start space-x-3"},Q={class:"flex-1 min-w-0"},W={class:"flex items-start justify-between mb-1"},X={class:"font-semibold text-gray-900 truncate"},Z={key:0,class:"w-2 h-2 bg-blue-600 rounded-full ml-2 mt-2"},ee=["innerHTML"],te={class:"flex items-center space-x-4 mt-2 text-xs text-gray-500"},se={key:0,class:"flex items-center space-x-1"},ae=["disabled"],oe={__name:"Notifications",setup(re){const n=k(),f=_(()=>n.notifications),m=_(()=>n.unreadCount);function y(t){return{"Journey Plan":u,"Operation Plan":u,"Safety Incident":S,"Cargo Consignment":P,"Passenger Booking":B,Vehicle:u}[t]||F}function h(t){return{"Journey Plan":"bg-blue-100 text-blue-600","Operation Plan":"bg-blue-100 text-blue-600","Safety Incident":"bg-red-100 text-red-600","Cargo Consignment":"bg-amber-100 text-amber-600","Passenger Booking":"bg-green-100 text-green-600",Vehicle:"bg-purple-100 text-purple-600"}[t]||"bg-gray-100 text-gray-600"}function x(t){if(!t)return"";try{const s=typeof t=="string"?V(t):t;return L(s,{addSuffix:!0})}catch{return""}}async function b(t){if(!t.read)try{await n.markNotificationRead(t.name)}catch(s){console.error("Failed to mark notification as read:",s)}}async function v(){try{await n.fetchNotifications()}catch(t){console.error("Failed to refresh notifications:",t)}}return R(async()=>{await n.fetchNotifications()}),(t,s)=>(o(),r("div",$,[s[2]||(s[2]=e("div",{class:"card p-4"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Notifications"),e("p",{class:"text-sm text-gray-600"},"Stay updated with important alerts")],-1)),m.value>0?(o(),r("div",H,[e("div",J,[c(i(g),{class:"w-6 h-6 text-primary-600"}),e("div",null,[e("p",q,l(m.value)+" Unread Notification"+l(m.value>1?"s":""),1),s[0]||(s[0]=e("p",{class:"text-sm text-gray-600"},"Tap on a notification to mark as read",-1))])])])):d("",!0),i(n).loading?(o(),r("div",z,[c(w,{message:"Loading notifications..."})])):f.value.length===0?(o(),r("div",E,[c(N,{icon:i(g),title:"No notifications",message:"You're all caught up! No new notifications at the moment."},null,8,["icon"])])):(o(),r("div",G,[(o(!0),r(A,null,j(f.value,a=>(o(),r("div",{key:a.name,class:p(["p-4 hover:bg-gray-50 cursor-pointer transition-colors",{"bg-blue-50":!a.read}]),onClick:ne=>b(a)},[e("div",K,[e("div",{class:p(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center",h(a.document_type)])},[(o(),O(U(y(a.document_type)),{class:"w-5 h-5"}))],2),e("div",Q,[e("div",W,[e("p",X,l(a.subject),1),a.read?d("",!0):(o(),r("span",Z))]),a.email_content?(o(),r("div",{key:0,class:"text-sm text-gray-600 line-clamp-2",innerHTML:a.email_content},null,8,ee)):d("",!0),e("div",te,[e("span",null,l(x(a.creation)),1),a.document_type&&a.document_name?(o(),r("span",se,[c(i(M),{class:"w-3 h-3"}),e("span",null,l(a.document_type),1)])):d("",!0)])])])],10,Y))),128))])),e("button",{onClick:v,class:"w-full btn-secondary py-3",disabled:i(n).loading},[c(i(I),{class:p(["w-5 h-5 mr-2",{"animate-spin":i(n).loading}])},null,8,["class"]),s[1]||(s[1]=D(" Refresh ",-1))],8,ae)]))}},ve=C(oe,[["__scopeId","data-v-70ace60b"]]);export{ve as default};
//# sourceMappingURL=Notifications-4MxWt55j.js.map

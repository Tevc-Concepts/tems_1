import{u as A,r as _,c,o as E,a as d,b as e,d as u,t as a,e as i,f as n,n as y,g as x,w as g,h as S,F as N,i as q,j as F,k as o,l as I}from"./index-PcK2SAYs.js";import{u as P}from"./trip-BsvOeZik.js";import{_ as B}from"./TripCard-cp4zoCsE.js";import{_ as L}from"./LoadingSpinner-xLVHgiLr.js";import{_ as R}from"./EmptyState-ZY4GGyjY.js";import{d as U,C as Y}from"./differenceInDays-BjSjOcVc.js";import{U as z,C as W}from"./user-duRkX_VX.js";import{C as G}from"./circle-alert-DgqhRVXg.js";import{M as H}from"./map-pin-jftitRPm.js";import{T as b}from"./triangle-alert-FxvP7yeT.js";import{F as J}from"./fuel-CrYuq5tK.js";import{C as K}from"./chevron-right-BZqzenys.js";import{f as w}from"./format-BFuVVRWF.js";import"./StatusBadge-Cp8b1Ujq.js";import"./circle-x-DQl-CdHB.js";import"./createLucideIcon-BA_zicjl.js";import"./package-CUuzKkes.js";import"./users-C0doFVNm.js";import"./navigation-BF03CYMh.js";import"./truck-CIvaZl73.js";import"./parseISO-9qduH5JA.js";import"./en-US-DL7QEam1.js";const O={class:"space-y-6"},Q={class:"card p-6 bg-gradient-to-br from-primary-500 to-primary-600 text-white"},X={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold mb-1"},ee={class:"text-primary-100"},te={class:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm"},se={class:"grid grid-cols-3 gap-4 mt-6"},re={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center"},ie={class:"text-2xl font-bold"},ne={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center"},oe={class:"text-2xl font-bold"},ae={class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center"},le={class:"text-2xl font-bold"},de={class:"flex items-center justify-between"},ce={class:"flex items-center space-x-3"},ue={class:"w-12 h-12 bg-primary-50 rounded-xl flex items-center justify-center"},pe={class:"text-sm text-gray-600"},me={class:"text-right"},xe={key:0,class:"mt-3 p-3 bg-amber-50 rounded-lg flex items-start space-x-2"},fe={class:"space-y-4"},ve={class:"flex items-center justify-between"},he={key:1,class:"card p-4"},_e={class:"space-y-3"},ye={key:0,class:"flex items-center justify-between p-3 bg-amber-50 rounded-lg"},ge={class:"flex items-center space-x-3"},be={class:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center"},we={class:"text-sm text-gray-600"},ke={key:1,class:"flex items-center justify-between p-3 bg-red-50 rounded-lg"},Ce={class:"flex items-center space-x-3"},je={class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},De={class:"text-sm text-gray-600"},Te={class:"grid grid-cols-2 gap-4"},Me={class:"flex flex-col items-center space-y-2 text-center"},$e={class:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center"},Ve={class:"flex flex-col items-center space-y-2 text-center"},Ae={class:"w-12 h-12 bg-red-50 rounded-xl flex items-center justify-center"},tt={__name:"Dashboard",setup(Ee){const f=F(),k=A(),v=P(),s=_(null),C=_(!1),j=c(()=>w(new Date,"EEEE, MMMM d, yyyy")),h=c(()=>{if(!s.value)return[];const r=s.value.journey_plans||[],t=s.value.operation_plans||[];return[...r,...t].sort((p,l)=>new Date(p.start_time)-new Date(l.start_time)).slice(0,3)}),D=c(()=>s.value?(s.value.operation_plans||[]).filter(t=>t.status==="Active").length:0),m=c(()=>{if(!s.value?.qualification?.expiry_date)return!1;const r=U(new Date(s.value.qualification.expiry_date),new Date);return r<=30&&r>=0}),T=c(()=>s.value?.pending_checks?.length>0||s.value?.recent_incidents?.length>0);function M(r){return w(new Date(r),"MMM d, yyyy")}async function $(r){f.push(`/driver/trips/${r.name}?action=start`)}function V(r){f.push(`/driver/trips/${r.name}`)}return E(async()=>{try{s.value=await v.fetchDashboard()}catch(r){console.error("Failed to load dashboard:",r)}}),(r,t)=>{const p=S("router-link");return o(),d("div",O,[e("div",Q,[e("div",X,[e("div",null,[e("h2",Z," Welcome back, "+a(i(k).driverName)+"! ",1),e("p",ee,a(j.value),1)]),e("div",te,[n(i(z),{class:"w-8 h-8"})])]),e("div",se,[e("div",re,[e("p",ie,a(s.value?.journey_plans?.length||0),1),t[3]||(t[3]=e("p",{class:"text-xs text-primary-100"},"Trips Today",-1))]),e("div",ne,[e("p",oe,a(D.value),1),t[4]||(t[4]=e("p",{class:"text-xs text-primary-100"},"Active",-1))]),e("div",ae,[e("p",le,a(s.value?.pending_checks?.length||0),1),t[5]||(t[5]=e("p",{class:"text-xs text-primary-100"},"Pending",-1))])])]),s.value?.qualification?(o(),d("div",{key:0,class:y(["card p-4",m.value?"border-l-4 border-amber-500":""])},[e("div",de,[e("div",ce,[e("div",ue,[n(i(Y),{class:"w-6 h-6 text-primary-600"})]),e("div",null,[t[6]||(t[6]=e("h3",{class:"font-semibold text-gray-900"},"Driver License",-1)),e("p",pe,a(s.value.qualification.license_no),1)])]),e("div",me,[t[7]||(t[7]=e("p",{class:"text-xs text-gray-500"},"Expires",-1)),e("p",{class:y(["text-sm font-semibold",m.value?"text-amber-600":"text-gray-900"])},a(M(s.value.qualification.expiry_date)),3)])]),m.value?(o(),d("div",xe,[n(i(G),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),t[8]||(t[8]=e("p",{class:"text-sm text-amber-700"}," Your license is expiring soon. Please renew it to continue driving. ",-1))])):u("",!0)],2)):u("",!0),e("div",fe,[e("div",ve,[t[10]||(t[10]=e("h3",{class:"section-title mb-0"},"Today's Trips",-1)),n(p,{to:"/driver/trips",class:"text-sm text-primary-600 font-medium flex items-center space-x-1 hover:text-primary-700"},{default:g(()=>[t[9]||(t[9]=e("span",null,"View All",-1)),n(i(K),{class:"w-4 h-4"})]),_:1})]),i(v).loading?(o(),x(L,{key:0,message:"Loading trips..."})):h.value.length>0?(o(!0),d(N,{key:1},q(h.value,l=>(o(),x(B,{key:l.name,trip:l,onStart:$,onView:V},null,8,["trip"]))),128)):(o(),x(R,{key:2,icon:i(H),title:"No trips scheduled",message:"You don't have any trips scheduled for today. Check back later or contact dispatch."},null,8,["icon"]))]),T.value?(o(),d("div",he,[t[14]||(t[14]=e("h3",{class:"section-title"},"Pending Actions",-1)),e("div",_e,[s.value?.pending_checks?.length>0?(o(),d("div",ye,[e("div",ge,[e("div",be,[n(i(W),{class:"w-5 h-5 text-amber-600"})]),e("div",null,[t[11]||(t[11]=e("p",{class:"font-medium text-gray-900"},"Vehicle Inspection",-1)),e("p",we,a(s.value.pending_checks.length)+" pending check(s) ",1)])]),n(p,{to:"/driver/inspection",class:"btn-secondary text-sm py-2"},{default:g(()=>[...t[12]||(t[12]=[I(" Inspect Now ",-1)])]),_:1})])):u("",!0),s.value?.recent_incidents?.length>0?(o(),d("div",ke,[e("div",Ce,[e("div",je,[n(i(b),{class:"w-5 h-5 text-red-600"})]),e("div",null,[t[13]||(t[13]=e("p",{class:"font-medium text-gray-900"},"Recent Incidents",-1)),e("p",De,a(s.value.recent_incidents.length)+" incident(s) this week ",1)])]),e("button",{class:"btn-secondary text-sm py-2",onClick:t[0]||(t[0]=l=>C.value=!0)}," View ")])):u("",!0)])])):u("",!0),e("div",Te,[e("button",{onClick:t[1]||(t[1]=l=>r.$router.push("/driver/fuel")),class:"card p-4 hover:shadow-lg transition-shadow active:scale-95 duration-200"},[e("div",Me,[e("div",$e,[n(i(J),{class:"w-6 h-6 text-blue-600"})]),t[15]||(t[15]=e("p",{class:"font-semibold text-gray-900"},"Log Fuel",-1))])]),e("button",{onClick:t[2]||(t[2]=l=>r.$router.push("/driver/incident")),class:"card p-4 hover:shadow-lg transition-shadow active:scale-95 duration-200"},[e("div",Ve,[e("div",Ae,[n(i(b),{class:"w-6 h-6 text-red-600"})]),t[16]||(t[16]=e("p",{class:"font-semibold text-gray-900"},"Report Incident",-1))])])])])}}};export{tt as default};
//# sourceMappingURL=Dashboard-B8b8APeY.js.map

import{r as y,c as a,o,a as t,p as g,d as _,F as v,q as x,e as w,t as m,f as V,v as S,h as k,g as $,m as u,w as F,l as I,A as j,u as M}from"./vue-vendor-85nDNI24.js";import{u as N}from"./vehicle-TsAMTadY.js";import"./index-CvUSgFKw.js";import{C as T,_ as B}from"./CameraModal-C0XdpclG.js";import{_ as A}from"./LoadingSpinner-BQrI8T8P.js";import{T as P}from"./truck-iOzUoDvC.js";import{C as U}from"./chevron-right-CW-NWNE4.js";import"./utils-DGK9-2WQ.js";import"./Modal-BTglq67a.js";import"./x-BTU5YQqX.js";import"./createLucideIcon-TnRFscOj.js";import"./refresh-cw-BAKKBxtm.js";const q={class:"space-y-2"},L={class:"text-sm font-medium"},R=["onUpdate:modelValue"],W={key:0,class:"mt-2 grid grid-cols-3 gap-2"},D=["src"],K={__name:"SpotCheckForm",emits:["submit"],setup(C,{emit:c}){const p=c,r=y(!1),h=[{id:"tires",label:"Tire Condition"},{id:"lights",label:"Lights Functional"},{id:"brakes",label:"Brakes Working"},{id:"fluids",label:"Fluid Levels OK"},{id:"mirrors",label:"Mirrors Adjusted"},{id:"wipers",label:"Wipers Working"},{id:"horn",label:"Horn Functional"},{id:"seatbelts",label:"Seatbelts OK"}],s=y({checklist:{},notes:"",photos:[]}),d=()=>{r.value=!0},f=l=>{s.value.photos.push(l.dataUrl),r.value=!1},i=()=>{p("submit",s.value)};return(l,e)=>(o(),a("form",{onSubmit:F(i,["prevent"]),class:"bg-white rounded-xl shadow-card p-4 space-y-4"},[e[5]||(e[5]=t("h2",{class:"text-lg font-bold text-gray-800"},"Vehicle Spot Check",-1)),t("div",q,[(o(),a(v,null,x(h,n=>t("div",{key:n.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("span",L,m(n.label),1),w(t("input",{type:"checkbox","onUpdate:modelValue":b=>s.value.checklist[n.id]=b,class:"w-5 h-5 text-primary-600 rounded focus:ring-2 focus:ring-primary-500"},null,8,R),[[V,s.value.checklist[n.id]]])])),64))]),t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Additional Notes",-1)),w(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.notes=n),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any issues or observations..."},null,512),[[S,s.value.notes]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photos",-1)),t("button",{type:"button",onClick:d,class:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 flex items-center justify-center"},[k(u(T),{class:"w-5 h-5 mr-2"}),e[3]||(e[3]=$(" Take Photo ",-1))]),s.value.photos.length?(o(),a("div",W,[(o(!0),a(v,null,x(s.value.photos,(n,b)=>(o(),a("img",{key:b,src:n,alt:"Inspection photo",class:"w-full h-20 object-cover rounded-lg"},null,8,D))),128))])):_("",!0)]),e[6]||(e[6]=t("button",{type:"submit",class:"w-full py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 transition"}," Submit Inspection ",-1)),r.value?(o(),g(B,{key:0,onClose:e[1]||(e[1]=n=>r.value=!1),onCapture:f})):_("",!0)],32))}},O={class:"space-y-6"},E={key:0,class:"card p-4"},H={key:1,class:"space-y-3"},z=["onClick"],G={class:"flex items-center space-x-4"},J={class:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center"},Q={class:"flex-1"},X={class:"font-semibold text-gray-900"},Y={class:"text-sm text-gray-600"},de={__name:"VehicleInspection",setup(C){const c=j(),p=M(),r=N(),{showSuccess:h}=useNotification(),s=y(null);function d(i){s.value=i,r.setCurrentVehicle(i)}async function f(i){h("Inspection submitted successfully"),s.value=null,p.push("/driver")}return I(async()=>{if(await r.fetchMyVehicles(),c.query.vehicle){const i=i=r.assignedVehicles.find(l=>l.name===c.query.vehicle);i&&d(i)}}),(i,l)=>(o(),a("div",O,[l[2]||(l[2]=t("div",{class:"flex items-center justify-between"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Vehicle Inspection")],-1)),s.value?(o(),g(K,{key:1,vehicle:s.value,onCancel:l[0]||(l[0]=e=>s.value=null),onSubmit:f},null,8,["vehicle"])):(o(),a("div",E,[l[1]||(l[1]=t("h3",{class:"section-title"},"Select Vehicle",-1)),u(r).loading?(o(),g(A,{key:0})):(o(),a("div",H,[(o(!0),a(v,null,x(u(r).assignedVehicles,e=>(o(),a("button",{key:e.name,onClick:n=>d(e),class:"w-full p-4 border-2 border-gray-200 rounded-lg hover:border-primary-500 hover:bg-primary-50 transition-all text-left"},[t("div",G,[t("div",J,[k(u(P),{class:"w-6 h-6 text-gray-600"})]),t("div",Q,[t("p",X,m(e.license_plate),1),t("p",Y,m(e.make)+" "+m(e.model),1)]),k(u(U),{class:"w-5 h-5 text-gray-400"})])],8,z))),128))]))]))]))}};export{de as default};
//# sourceMappingURL=VehicleInspection-D-jJlIE1.js.map

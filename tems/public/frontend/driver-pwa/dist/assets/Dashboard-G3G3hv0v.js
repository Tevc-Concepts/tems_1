import{r as _,j as d,o as V,c,b as e,e as p,t as a,k as o,l as i,n as b,m as f,p as g,q as E,F as q,s as I,a as N,i as n,h as S}from"./vue-vendor-Drzz9AVS.js";import{u as F}from"./index-Ddao6l4m.js";import{u as P}from"./trip-BhkitPdW.js";import{_ as B}from"./TripCard-D3Chmm_-.js";import{_ as L}from"./LoadingSpinner-8TgqN-e3.js";import{_ as R}from"./EmptyState-DMTapcdr.js";import{f as w,d as U}from"./utils-DGK9-2WQ.js";import{U as Y}from"./user-B7IlW45Z.js";import{C as z}from"./credit-card-BFhocA5m.js";import{C as W}from"./circle-alert-CoqcVHEx.js";import{M as G}from"./map-pin-CmG9l5GE.js";import{C as H}from"./clipboard-check-DZC-xaGE.js";import{T as k}from"./triangle-alert-C4Mkg0bL.js";import{F as J}from"./fuel-DyGHqSvX.js";import{C as K}from"./chevron-right-DK6DSZJH.js";import"./StatusBadge-BRll2oj-.js";import"./circle-x-C5bF3VpG.js";import"./createLucideIcon-_YMTRyyK.js";import"./package-De-QoVLn.js";import"./users-Dyu2Lg02.js";import"./navigation-C-73Ygfz.js";import"./truck-Dvio2Uh9.js";const O={class:"space-y-6"},Q={class:"card p-6 bg-gradient-to-br from-charcoal-600 via-charcoal-500 to-charcoal-600 border-2 border-primary-500/30 shadow-neon"},X={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold mb-1 text-primary-500"},ee={class:"text-charcoal-300"},te={class:"w-16 h-16 bg-primary-500/20 rounded-2xl flex items-center justify-center backdrop-blur-sm border-2 border-primary-500/50"},se={class:"grid grid-cols-3 gap-4 mt-6"},re={class:"bg-primary-500/10 backdrop-blur-sm rounded-lg p-3 text-center border border-primary-500/30"},oe={class:"text-2xl font-bold text-primary-500"},ie={class:"bg-primary-500/10 backdrop-blur-sm rounded-lg p-3 text-center border border-primary-500/30"},ne={class:"text-2xl font-bold text-primary-500"},ae={class:"bg-primary-500/10 backdrop-blur-sm rounded-lg p-3 text-center border border-primary-500/30"},le={class:"text-2xl font-bold text-primary-500"},ce={class:"flex items-center justify-between"},de={class:"flex items-center space-x-3"},pe={class:"w-12 h-12 bg-primary-50 rounded-xl flex items-center justify-center"},ue={class:"text-sm text-gray-600"},me={class:"text-right"},xe={key:0,class:"mt-3 p-3 bg-amber-50 rounded-lg flex items-start space-x-2"},fe={class:"space-y-4"},ve={class:"flex items-center justify-between"},he={key:1,class:"card p-4"},ye={class:"space-y-3"},_e={key:0,class:"flex items-center justify-between p-3 bg-amber-50 rounded-lg"},be={class:"flex items-center space-x-3"},ge={class:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center"},we={class:"text-sm text-gray-600"},ke={key:1,class:"flex items-center justify-between p-3 bg-red-50 rounded-lg"},Ce={class:"flex items-center space-x-3"},je={class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},De={class:"text-sm text-gray-600"},Te={class:"grid grid-cols-2 gap-4"},Me={class:"flex flex-col items-center space-y-2 text-center"},$e={class:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center"},Ae={class:"flex flex-col items-center space-y-2 text-center"},Ve={class:"w-12 h-12 bg-red-50 rounded-xl flex items-center justify-center"},tt={__name:"Dashboard",setup(Ee){const v=N(),m=F(),h=P(),s=_(null),C=_(!1),j=d(()=>w(new Date,"EEEE, MMMM d, yyyy")),y=d(()=>{if(!s.value)return[];const r=s.value.journey_plans||[],t=s.value.operation_plans||[];return[...r,...t].sort((u,l)=>new Date(u.start_time)-new Date(l.start_time)).slice(0,3)}),D=d(()=>s.value?(s.value.operation_plans||[]).filter(t=>t.status==="Active").length:0),x=d(()=>{if(!s.value?.qualification?.expiry_date)return!1;const r=U(new Date(s.value.qualification.expiry_date),new Date);return r<=30&&r>=0}),T=d(()=>s.value?.pending_checks?.length>0||s.value?.recent_incidents?.length>0);function M(r){return w(new Date(r),"MMM d, yyyy")}async function $(r){v.push(`/driver/trips/${r.name}?action=start`)}function A(r){v.push(`/driver/trips/${r.name}`)}return V(async()=>{try{m.isAuthenticated||await m.fetchUserInfo(),s.value=await h.fetchDashboard()}catch(r){console.error("Failed to load dashboard:",r)}}),(r,t)=>{const u=E("router-link");return n(),c("div",O,[e("div",Q,[e("div",X,[e("div",null,[e("h2",Z," Welcome back, "+a(o(m).userName||"Driver")+"! ",1),e("p",ee,a(j.value),1)]),e("div",te,[i(o(Y),{class:"w-8 h-8 text-primary-500"})])]),e("div",se,[e("div",re,[e("p",oe,a(s.value?.journey_plans?.length||0),1),t[3]||(t[3]=e("p",{class:"text-xs text-charcoal-300"},"Trips Today",-1))]),e("div",ie,[e("p",ne,a(D.value),1),t[4]||(t[4]=e("p",{class:"text-xs text-charcoal-300"},"Active",-1))]),e("div",ae,[e("p",le,a(s.value?.pending_checks?.length||0),1),t[5]||(t[5]=e("p",{class:"text-xs text-charcoal-300"},"Pending",-1))])])]),s.value?.qualification?(n(),c("div",{key:0,class:b(["card p-4",x.value?"border-l-4 border-amber-500":""])},[e("div",ce,[e("div",de,[e("div",pe,[i(o(z),{class:"w-6 h-6 text-primary-600"})]),e("div",null,[t[6]||(t[6]=e("h3",{class:"font-semibold text-gray-900"},"Driver License",-1)),e("p",ue,a(s.value.qualification.license_no),1)])]),e("div",me,[t[7]||(t[7]=e("p",{class:"text-xs text-gray-500"},"Expires",-1)),e("p",{class:b(["text-sm font-semibold",x.value?"text-amber-600":"text-gray-900"])},a(M(s.value.qualification.expiry_date)),3)])]),x.value?(n(),c("div",xe,[i(o(W),{class:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),t[8]||(t[8]=e("p",{class:"text-sm text-amber-700"}," Your license is expiring soon. Please renew it to continue driving. ",-1))])):p("",!0)],2)):p("",!0),e("div",fe,[e("div",ve,[t[10]||(t[10]=e("h3",{class:"section-title mb-0"},"Today's Trips",-1)),i(u,{to:"/driver/trips",class:"text-sm text-primary-600 font-medium flex items-center space-x-1 hover:text-primary-700"},{default:g(()=>[t[9]||(t[9]=e("span",null,"View All",-1)),i(o(K),{class:"w-4 h-4"})]),_:1})]),o(h).loading?(n(),f(L,{key:0,message:"Loading trips..."})):y.value.length>0?(n(!0),c(q,{key:1},I(y.value,l=>(n(),f(B,{key:l.name,trip:l,onStart:$,onView:A},null,8,["trip"]))),128)):(n(),f(R,{key:2,icon:o(G),title:"No trips scheduled",message:"You don't have any trips scheduled for today. Check back later or contact dispatch."},null,8,["icon"]))]),T.value?(n(),c("div",he,[t[14]||(t[14]=e("h3",{class:"section-title"},"Pending Actions",-1)),e("div",ye,[s.value?.pending_checks?.length>0?(n(),c("div",_e,[e("div",be,[e("div",ge,[i(o(H),{class:"w-5 h-5 text-amber-600"})]),e("div",null,[t[11]||(t[11]=e("p",{class:"font-medium text-gray-900"},"Vehicle Inspection",-1)),e("p",we,a(s.value.pending_checks.length)+" pending check(s) ",1)])]),i(u,{to:"/driver/inspection",class:"btn-secondary text-sm py-2"},{default:g(()=>[...t[12]||(t[12]=[S(" Inspect Now ",-1)])]),_:1})])):p("",!0),s.value?.recent_incidents?.length>0?(n(),c("div",ke,[e("div",Ce,[e("div",je,[i(o(k),{class:"w-5 h-5 text-red-600"})]),e("div",null,[t[13]||(t[13]=e("p",{class:"font-medium text-gray-900"},"Recent Incidents",-1)),e("p",De,a(s.value.recent_incidents.length)+" incident(s) this week ",1)])]),e("button",{class:"btn-secondary text-sm py-2",onClick:t[0]||(t[0]=l=>C.value=!0)}," View ")])):p("",!0)])])):p("",!0),e("div",Te,[e("button",{onClick:t[1]||(t[1]=l=>r.$router.push("/driver/fuel")),class:"card p-4 hover:shadow-lg transition-shadow active:scale-95 duration-200"},[e("div",Me,[e("div",$e,[i(o(J),{class:"w-6 h-6 text-blue-600"})]),t[15]||(t[15]=e("p",{class:"font-semibold text-gray-900"},"Log Fuel",-1))])]),e("button",{onClick:t[2]||(t[2]=l=>r.$router.push("/driver/incident")),class:"card p-4 hover:shadow-lg transition-shadow active:scale-95 duration-200"},[e("div",Ae,[e("div",Ve,[i(o(k),{class:"w-6 h-6 text-red-600"})]),t[16]||(t[16]=e("p",{class:"font-semibold text-gray-900"},"Report Incident",-1))])])])])}}};export{tt as default};
//# sourceMappingURL=Dashboard-G3G3hv0v.js.map

import{s as f,r as i}from"./vue-vendor-85nDNI24.js";import{f as l}from"./index-CvUSgFKw.js";const m=f("incident",()=>{const s=i([]),a=i(!1),r=i(null);async function u(e){a.value=!0,r.value=null;try{const t=await l.call("tems.api.pwa.driver.report_incident",{data:e});return s.value.unshift({name:t.incident,...e,status:"Open",created:new Date().toISOString()}),t}catch(t){throw r.value=t.message,t}finally{a.value=!1}}async function c(e,t=null){try{return await l.uploadFile(e,!0,"Home/Incidents")}catch(n){throw r.value=n.message,n}}async function o(e,t=""){a.value=!0;try{return await l.call("tems.api.pwa.driver.send_sos_alert",{location_data:e,notes:t})}catch(n){throw r.value=n.message,n}finally{a.value=!1}}async function d(){a.value=!0;try{const e=await l.call("tems.api.pwa.driver.get_driver_incidents");return s.value=e||[],e}catch(e){throw r.value=e.message,e}finally{a.value=!1}}return{incidents:s,loading:a,error:r,reportIncident:u,uploadIncidentPhoto:c,sendSOSAlert:o,fetchIncidents:d}});export{m as u};
//# sourceMappingURL=incident-D0Jc3bXl.js.map

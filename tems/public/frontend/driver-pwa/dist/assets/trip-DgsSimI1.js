import{B as w,r as o,c as m,C as i}from"./index-B9iqHgVa.js";const g=w("trip",()=>{const s=o([]),c=o(null),n=o(!1),t=o(null),v=m(()=>s.value.filter(a=>new Date(a.start_time)>new Date)),d=m(()=>s.value.filter(a=>a.status==="Active"));async function u(){n.value=!0,t.value=null;try{const a=await i.call("tems.api.pwa.driver.get_driver_dashboard");return s.value=[...a.journey_plans.map(e=>({...e,type:"journey"})),...a.operation_plans.map(e=>({...e,type:"operation"}))],a}catch(a){throw t.value=a.message,a}finally{n.value=!1}}async function _(a){n.value=!0;try{return await i.call("tems.api.pwa.driver.get_journey_details",{journey_plan_name:a})}catch(e){throw t.value=e.message,e}finally{n.value=!1}}async function y(a,e,p){try{const r=await i.call("tems.api.pwa.driver.start_trip",{journey_plan_name:a,odometer_reading:e,location_data:p});return c.value=a,await u(),r}catch(r){throw t.value=r.message,r}}async function f(a,e,p,r){try{const l=await i.call("tems.api.pwa.driver.complete_trip",{journey_plan_name:a,odometer_reading:e,location_data:p,notes:r});return c.value=null,await u(),l}catch(l){throw t.value=l.message,l}}return{trips:s,activeTrip:c,loading:n,error:t,upcomingTrips:v,inProgressTrips:d,fetchDashboard:u,fetchTripDetails:_,startTrip:y,completeTrip:f}});export{g as u};
//# sourceMappingURL=trip-DgsSimI1.js.map

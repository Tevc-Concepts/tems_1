import{r as b,c as p,i as l,b as e,m as _,e as f,f as c,B as k,d as S,v,l as m,k as y,h as C,w as I,a as V}from"./vue-vendor-Drzz9AVS.js";import{u as B}from"./incident-BTB4hAqI.js";import{b as M}from"./index-Ddao6l4m.js";import{u as T}from"./useGeolocation-D92nn38v.js";import{C as $,_ as F}from"./CameraModal-BNYXbbzZ.js";import{M as P}from"./map-pin-CmG9l5GE.js";import"./utils-DGK9-2WQ.js";import"./Modal--Nc8TLzj.js";import"./x-BTQ7jAj7.js";import"./createLucideIcon-_YMTRyyK.js";import"./refresh-cw-D3ZSG_y3.js";const N={class:"bg-white rounded-xl shadow-card p-4"},R={class:"mb-4"},U={class:"mb-4"},q={class:"mb-4"},D={class:"flex space-x-2"},L={class:"mb-4"},j={key:0,class:"mt-2"},A=["src"],E={__name:"IncidentReportForm",emits:["submit"],setup(g,{emit:d}){const u=d,{getCurrentPosition:a}=T(),s=b(!1),o=b({incident_type:"",description:"",location:"",photo:null,coordinates:null}),i=async()=>{try{const r=await a();o.value.coordinates={latitude:r.coords.latitude,longitude:r.coords.longitude},o.value.location=`${r.coords.latitude.toFixed(6)}, ${r.coords.longitude.toFixed(6)}`}catch(r){console.error("Failed to get location:",r)}},x=()=>{s.value=!0},h=r=>{o.value.photo=r.dataUrl,s.value=!1},w=()=>{u("submit",o.value)};return(r,t)=>(l(),p("form",{onSubmit:I(w,["prevent"]),class:"space-y-4"},[e("div",N,[e("div",R,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Incident Type",-1)),c(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.value.incident_type=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:""},[...t[4]||(t[4]=[S('<option value="">Select Type</option><option value="Accident">Accident</option><option value="Breakdown">Breakdown</option><option value="Medical">Medical Emergency</option><option value="Security">Security Issue</option><option value="Other">Other</option>',6)])],512),[[k,o.value.incident_type]])]),e("div",U,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),c(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.value.description=n),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Describe what happened...",required:""},null,512),[[v,o.value.description]])]),e("div",q,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Location",-1)),e("div",D,[c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.value.location=n),type:"text",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Location details",required:""},null,512),[[v,o.value.location]]),e("button",{type:"button",onClick:i,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"},[m(y(P),{class:"w-5 h-5"})])])]),e("div",L,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photos",-1)),e("button",{type:"button",onClick:x,class:"w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 flex items-center justify-center"},[m(y($),{class:"w-5 h-5 mr-2"}),t[8]||(t[8]=C(" Take Photo ",-1))]),o.value.photo?(l(),p("div",j,[e("img",{src:o.value.photo,alt:"Incident photo",class:"w-full h-40 object-cover rounded-lg"},null,8,A)])):f("",!0)]),t[10]||(t[10]=e("button",{type:"submit",class:"w-full py-3 bg-danger-600 text-white rounded-lg font-medium hover:bg-danger-700 transition"}," Submit Report ",-1))]),s.value?(l(),_(F,{key:0,onClose:t[3]||(t[3]=n=>s.value=!1),onCapture:h})):f("",!0)],32))}},O={class:"min-h-screen bg-background pb-20"},G={class:"p-4"},ot={__name:"IncidentReport",setup(g){const d=V(),u=B(),{showToast:a}=M(),s=async o=>{try{await u.reportIncident(o),a("Incident reported successfully","success"),d.push("/driver")}catch{a("Failed to report incident","error")}};return(o,i)=>(l(),p("div",O,[e("div",G,[i[0]||(i[0]=e("h1",{class:"text-2xl font-bold text-gray-800 mb-4"},"Report Incident",-1)),m(E,{onSubmit:s})])]))}};export{ot as default};
//# sourceMappingURL=IncidentReport-BZxG7EgJ.js.map
